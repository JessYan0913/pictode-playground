var al=Object.defineProperty;var il=(e,t,n)=>t in e?al(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var E=(e,t,n)=>(il(e,typeof t!="symbol"?t+"":t,n),n);import{r as x,d as O,c as y,m as wt,o as V,a as le,n as rl,h as z,f as Ne,b as Ge,H as q,F as H,w as ve,S as Ce,e as be,g as _,E as kt,u as Y,i as Fe,P as je,N as ge,T as sl,p as te,j as de,s as ul,t as fe,k as He,l as G,V as cl,q as dl,M as fl,y as ot,v as j,x as A,U as vl,_ as pl,z as mt,A as Te,B as St,C as $t,D as _t,G as at,I as ml,K as Ct,J as it,L as rt,O as Tt,Q as oe,R as gl,W as hl,X as Et,Y as bl,Z as yl,$ as $e,a0 as xl,a1 as ae,a2 as Ze,a3 as Pt,a4 as P,a5 as wl,a6 as R,a7 as kl,a8 as Rt,a9 as S,aa as B,ab as g,ac as F,ad as At,ae as X,af as Sl,ag as $l,ah as Q,ai as Ee,aj as _l,ak as Pe,al as D,am as st,an as Lt,ao as Dt,ap as Cl,aq as Bt,ar as Tl}from"./index-ce153b80.js";import{K as ce,A as El,H as Pl,S as Rl,a as Al,P as he,f as De,b as Ll,T as Dl}from"./index-8ed7eb6a.js";function Bl(e){throw new Error("Unexpected object: "+e)}var M=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(M||{});function Ot(e,t){let n=t.resolveItems();if(n.length<=0)return null;let o=t.resolveActiveIndex(),l=o??-1,a=(()=>{switch(e.focus){case 0:return n.findIndex(i=>!t.resolveDisabled(i));case 1:{let i=n.slice().reverse().findIndex((r,c,s)=>l!==-1&&s.length-c-1>=l?!1:!t.resolveDisabled(r));return i===-1?i:n.length-1-i}case 2:return n.findIndex((i,r)=>r<=l?!1:!t.resolveDisabled(i));case 3:{let i=n.slice().reverse().findIndex(r=>!t.resolveDisabled(r));return i===-1?i:n.length-1-i}case 4:return n.findIndex(i=>t.resolveId(i)===e.id);case 5:return null;default:Bl(e)}})();return a===-1?o:a}function gt(e){return[e.screenX,e.screenY]}function It(){let e=x([-1,-1]);return{wasMoved(t){let n=gt(t);return e.value[0]===n[0]&&e.value[1]===n[1]?!1:(e.value=n,!0)},update(t){e.value=gt(t)}}}function Ol(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function ut(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Oe(){let e=[],t={addEventListener(n,o,l,a){return n.addEventListener(o,l,a),t.add(()=>n.removeEventListener(o,l,a))},requestAnimationFrame(...n){let o=requestAnimationFrame(...n);t.add(()=>cancelAnimationFrame(o))},nextFrame(...n){t.requestAnimationFrame(()=>{t.requestAnimationFrame(...n)})},setTimeout(...n){let o=setTimeout(...n);t.add(()=>clearTimeout(o))},microTask(...n){let o={current:!0};return ut(()=>{o.current&&n[0]()}),t.add(()=>{o.current=!1})},style(n,o,l){let a=n.style.getPropertyValue(o);return Object.assign(n.style,{[o]:l}),this.add(()=>{Object.assign(n.style,{[o]:a})})},group(n){let o=Oe();return n(o),this.add(()=>o.dispose())},add(n){return e.push(n),()=>{let o=e.indexOf(n);if(o>=0)for(let l of e.splice(o,1))l()}},dispose(){for(let n of e.splice(0))n()}};return t}function Il(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}function Mt(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.value){let o=_(n);o instanceof HTMLElement&&t.add(o)}return t}var Ft=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(Ft||{});let Ae=Object.assign(O({name:"FocusTrap",props:{as:{type:[Object,String],default:"div"},initialFocus:{type:Object,default:null},features:{type:Number,default:30},containers:{type:[Object,Function],default:x(new Set)}},inheritAttrs:!1,setup(e,{attrs:t,slots:n,expose:o}){let l=x(null);o({el:l,$el:l});let a=y(()=>wt(l)),i=x(!1);V(()=>i.value=!0),le(()=>i.value=!1),Fl({ownerDocument:a},y(()=>i.value&&!!(e.features&16)));let r=Kl({ownerDocument:a,container:l,initialFocus:y(()=>e.initialFocus)},y(()=>i.value&&!!(e.features&2)));Vl({ownerDocument:a,container:l,containers:e.containers,previousActiveElement:r},y(()=>i.value&&!!(e.features&8)));let c=rl();function s(p){let b=_(l);b&&(v=>v())(()=>{Y(c.value,{[Fe.Forwards]:()=>{je(b,ge.First,{skipElements:[p.relatedTarget]})},[Fe.Backwards]:()=>{je(b,ge.Last,{skipElements:[p.relatedTarget]})}})})}let u=x(!1);function d(p){p.key==="Tab"&&(u.value=!0,requestAnimationFrame(()=>{u.value=!1}))}function f(p){if(!i.value)return;let b=Mt(e.containers);_(l)instanceof HTMLElement&&b.add(_(l));let v=p.relatedTarget;v instanceof HTMLElement&&v.dataset.headlessuiFocusGuard!=="true"&&(Kt(b,v)||(u.value?je(_(l),Y(c.value,{[Fe.Forwards]:()=>ge.Next,[Fe.Backwards]:()=>ge.Previous})|ge.WrapAround,{relativeTo:p.target}):p.target instanceof HTMLElement&&Ce(p.target)))}return()=>{let p={},b={ref:l,onKeydown:d,onFocusout:f},{features:v,initialFocus:m,containers:h,...k}=e;return z(H,[!!(v&4)&&z(Ne,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:s,features:Ge.Focusable}),q({ourProps:b,theirProps:{...t,...k},slot:p,attrs:t,slots:n,name:"FocusTrap"}),!!(v&4)&&z(Ne,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:s,features:Ge.Focusable})])}}}),{features:Ft}),Se=[];Il(()=>{function e(t){t.target instanceof HTMLElement&&t.target!==document.body&&Se[0]!==t.target&&(Se.unshift(t.target),Se=Se.filter(n=>n!=null&&n.isConnected),Se.splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function Ml(e){let t=x(Se.slice());return be([e],([n],[o])=>{o===!0&&n===!1?ut(()=>{t.value.splice(0)}):o===!1&&n===!0&&(t.value=Se.slice())},{flush:"post"}),()=>{var n;return(n=t.value.find(o=>o!=null&&o.isConnected))!=null?n:null}}function Fl({ownerDocument:e},t){let n=Ml(t);V(()=>{ve(()=>{var o,l;t.value||((o=e.value)==null?void 0:o.activeElement)===((l=e.value)==null?void 0:l.body)&&Ce(n())},{flush:"post"})}),le(()=>{t.value&&Ce(n())})}function Kl({ownerDocument:e,container:t,initialFocus:n},o){let l=x(null),a=x(!1);return V(()=>a.value=!0),le(()=>a.value=!1),V(()=>{be([t,n,o],(i,r)=>{if(i.every((s,u)=>(r==null?void 0:r[u])===s)||!o.value)return;let c=_(t);c&&ut(()=>{var s,u;if(!a.value)return;let d=_(n),f=(s=e.value)==null?void 0:s.activeElement;if(d){if(d===f){l.value=f;return}}else if(c.contains(f)){l.value=f;return}d?Ce(d):je(c,ge.First|ge.NoScroll)===sl.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),l.value=(u=e.value)==null?void 0:u.activeElement})},{immediate:!0,flush:"post"})}),l}function Vl({ownerDocument:e,container:t,containers:n,previousActiveElement:o},l){var a;kt((a=e.value)==null?void 0:a.defaultView,"focus",i=>{if(!l.value)return;let r=Mt(n);_(t)instanceof HTMLElement&&r.add(_(t));let c=o.value;if(!c)return;let s=i.target;s&&s instanceof HTMLElement?Kt(r,s)?(o.value=s,Ce(s)):(i.preventDefault(),i.stopPropagation(),Ce(c)):Ce(o.value)},!0)}function Kt(e,t){for(let n of e)if(n.contains(t))return!0;return!1}let qe=new Map,Le=new Map;function ht(e,t=x(!0)){ve(n=>{var o;if(!t.value)return;let l=_(e);if(!l)return;n(function(){var i;if(!l)return;let r=(i=Le.get(l))!=null?i:1;if(r===1?Le.delete(l):Le.set(l,r-1),r!==1)return;let c=qe.get(l);c&&(c["aria-hidden"]===null?l.removeAttribute("aria-hidden"):l.setAttribute("aria-hidden",c["aria-hidden"]),l.inert=c.inert,qe.delete(l))});let a=(o=Le.get(l))!=null?o:0;Le.set(l,a+1),a===0&&(qe.set(l,{"aria-hidden":l.getAttribute("aria-hidden"),inert:l.inert}),l.setAttribute("aria-hidden","true"),l.inert=!0)})}let Vt=Symbol("StackContext");var Qe=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(Qe||{});function jl(){return de(Vt,()=>{})}function Nl({type:e,enabled:t,element:n,onUpdate:o}){let l=jl();function a(...i){o==null||o(...i),l(...i)}V(()=>{be(t,(i,r)=>{i?a(0,e,n):r===!0&&a(1,e,n)},{immediate:!0,flush:"sync"})}),le(()=>{t.value&&a(1,e,n)}),te(Vt,a)}function Gl(e){let t=ul(e.getSnapshot());return le(e.subscribe(()=>{t.value=e.getSnapshot()})),t}function Ul(e,t){let n=e(),o=new Set;return{getSnapshot(){return n},subscribe(l){return o.add(l),()=>o.delete(l)},dispatch(l,...a){let i=t[l].call(n,...a);i&&(n=i,o.forEach(r=>r()))}}}function Hl(){let e;return{before({doc:t}){var n;let o=t.documentElement;e=((n=t.defaultView)!=null?n:window).innerWidth-o.clientWidth},after({doc:t,d:n}){let o=t.documentElement,l=o.clientWidth-o.offsetWidth,a=e-l;n.style(o,"paddingRight",`${a}px`)}}}function Wl(){if(!Ol())return{};let e;return{before(){e=window.pageYOffset},after({doc:t,d:n,meta:o}){function l(i){return o.containers.flatMap(r=>r()).some(r=>r.contains(i))}if(window.getComputedStyle(t.documentElement).scrollBehavior!=="auto"){let i=Oe();i.style(t.documentElement,"scroll-behavior","auto"),n.add(()=>n.microTask(()=>i.dispose()))}n.style(t.body,"marginTop",`-${e}px`),window.scrollTo(0,0);let a=null;n.addEventListener(t,"click",i=>{if(i.target instanceof HTMLElement)try{let r=i.target.closest("a");if(!r)return;let{hash:c}=new URL(r.href),s=t.querySelector(c);s&&!l(s)&&(a=s)}catch{}},!0),n.addEventListener(t,"touchmove",i=>{i.target instanceof HTMLElement&&!l(i.target)&&i.preventDefault()},{passive:!1}),n.add(()=>{window.scrollTo(0,window.pageYOffset+e),a&&a.isConnected&&(a.scrollIntoView({block:"nearest"}),a=null)})}}}function zl(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function Yl(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let _e=Ul(()=>new Map,{PUSH(e,t){var n;let o=(n=this.get(e))!=null?n:{doc:e,count:0,d:Oe(),meta:new Set};return o.count++,o.meta.add(t),this.set(e,o),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let o={doc:e,d:t,meta:Yl(n)},l=[Wl(),Hl(),zl()];l.forEach(({before:a})=>a==null?void 0:a(o)),l.forEach(({after:a})=>a==null?void 0:a(o))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});_e.subscribe(()=>{let e=_e.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let o=t.get(n.doc)==="hidden",l=n.count!==0;(l&&!o||!l&&o)&&_e.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&_e.dispatch("TEARDOWN",n)}});function Xl(e,t,n){let o=Gl(_e),l=y(()=>{let a=e.value?o.value.get(e.value):void 0;return a?a.count>0:!1});return be([e,t],([a,i],[r],c)=>{if(!a||!i)return;_e.dispatch("PUSH",a,n);let s=!1;c(()=>{s||(_e.dispatch("POP",r??a,n),s=!0)})},{immediate:!0}),l}var ql=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(ql||{});let et=Symbol("DialogContext");function ct(e){let t=de(et,null);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,ct),n}return t}let Ke="DC8F892D-2EBD-447C-A4C8-A03058436FF4",Jl=O({name:"Dialog",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},open:{type:[Boolean,String],default:Ke},initialFocus:{type:Object,default:null},id:{type:String,default:()=>`headlessui-dialog-${fe()}`}},emits:{close:e=>!0},setup(e,{emit:t,attrs:n,slots:o,expose:l}){var a;let i=x(!1);V(()=>{i.value=!0});let r=x(0),c=He(),s=y(()=>e.open===Ke&&c!==null?(c.value&G.Open)===G.Open:e.open),u=x(null),d=y(()=>wt(u));if(l({el:u,$el:u}),!(e.open!==Ke||c!==null))throw new Error("You forgot to provide an `open` prop to the `Dialog`.");if(typeof s.value!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${s.value===Ke?void 0:e.open}`);let f=y(()=>i.value&&s.value?0:1),p=y(()=>f.value===0),b=y(()=>r.value>1),v=de(et,null)!==null,[m,h]=cl(),{resolveContainers:k,mainTreeNodeRef:w,MainTreeNode:$}=dl({portals:m,defaultContainers:[y(()=>{var I;return(I=W.panelRef.value)!=null?I:u.value})]}),C=y(()=>b.value?"parent":"leaf"),T=y(()=>c!==null?(c.value&G.Closing)===G.Closing:!1),L=y(()=>v||T.value?!1:p.value),U=y(()=>{var I,N,ee;return(ee=Array.from((N=(I=d.value)==null?void 0:I.querySelectorAll("body > *"))!=null?N:[]).find(se=>se.id==="headlessui-portal-root"?!1:se.contains(_(w))&&se instanceof HTMLElement))!=null?ee:null});ht(U,L);let J=y(()=>b.value?!0:p.value),ye=y(()=>{var I,N,ee;return(ee=Array.from((N=(I=d.value)==null?void 0:I.querySelectorAll("[data-headlessui-portal]"))!=null?N:[]).find(se=>se.contains(_(w))&&se instanceof HTMLElement))!=null?ee:null});ht(ye,J),Nl({type:"Dialog",enabled:y(()=>f.value===0),element:u,onUpdate:(I,N)=>{if(N==="Dialog")return Y(I,{[Qe.Add]:()=>r.value+=1,[Qe.Remove]:()=>r.value-=1})}});let ie=fl({name:"DialogDescription",slot:y(()=>({open:s.value}))}),xe=x(null),W={titleId:xe,panelRef:x(null),dialogState:f,setTitleId(I){xe.value!==I&&(xe.value=I)},close(){t("close",!1)}};te(et,W);let we=y(()=>!(!p.value||b.value));ot(k,(I,N)=>{W.close(),j(()=>N==null?void 0:N.focus())},we);let re=y(()=>!(b.value||f.value!==0));kt((a=d.value)==null?void 0:a.defaultView,"keydown",I=>{re.value&&(I.defaultPrevented||I.key===A.Escape&&(I.preventDefault(),I.stopPropagation(),W.close()))});let pe=y(()=>!(T.value||f.value!==0||v));return Xl(d,pe,I=>{var N;return{containers:[...(N=I.containers)!=null?N:[],k]}}),ve(I=>{if(f.value!==0)return;let N=_(u);if(!N)return;let ee=new ResizeObserver(se=>{for(let Me of se){let me=Me.target.getBoundingClientRect();me.x===0&&me.y===0&&me.width===0&&me.height===0&&W.close()}});ee.observe(N),I(()=>ee.disconnect())}),()=>{let{id:I,open:N,initialFocus:ee,...se}=e,Me={...n,ref:u,id:I,role:"dialog","aria-modal":f.value===0?!0:void 0,"aria-labelledby":xe.value,"aria-describedby":ie.value},me={open:f.value===0};return z(mt,{force:!0},()=>[z(vl,()=>z(pl,{target:u.value},()=>z(mt,{force:!1},()=>z(Ae,{initialFocus:ee,containers:k,features:p.value?Y(C.value,{parent:Ae.features.RestoreFocus,leaf:Ae.features.All&~Ae.features.FocusLock}):Ae.features.None},()=>z(h,{},()=>q({ourProps:Me,theirProps:{...se,...n},slot:me,attrs:n,slots:o,visible:f.value===0,features:Te.RenderStrategy|Te.Static,name:"Dialog"})))))),z($)])}}}),Zl=O({name:"DialogPanel",props:{as:{type:[Object,String],default:"div"},id:{type:String,default:()=>`headlessui-dialog-panel-${fe()}`}},setup(e,{attrs:t,slots:n,expose:o}){let l=ct("DialogPanel");o({el:l.panelRef,$el:l.panelRef});function a(i){i.stopPropagation()}return()=>{let{id:i,...r}=e,c={id:i,ref:l.panelRef,onClick:a};return q({ourProps:c,theirProps:r,slot:{open:l.dialogState.value===0},attrs:t,slots:n,name:"DialogPanel"})}}}),Ql=O({name:"DialogTitle",props:{as:{type:[Object,String],default:"h2"},id:{type:String,default:()=>`headlessui-dialog-title-${fe()}`}},setup(e,{attrs:t,slots:n}){let o=ct("DialogTitle");return V(()=>{o.setTitleId(e.id),le(()=>o.setTitleId(null))}),()=>{let{id:l,...a}=e;return q({ourProps:{id:l},theirProps:a,slot:{open:o.dialogState.value===0},attrs:t,slots:n,name:"DialogTitle"})}}}),bt=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function yt(e){var t,n;let o=(t=e.innerText)!=null?t:"",l=e.cloneNode(!0);if(!(l instanceof HTMLElement))return o;let a=!1;for(let r of l.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))r.remove(),a=!0;let i=a?(n=l.innerText)!=null?n:"":o;return bt.test(i)&&(i=i.replace(bt,"")),i}function en(e){let t=e.getAttribute("aria-label");if(typeof t=="string")return t.trim();let n=e.getAttribute("aria-labelledby");if(n){let o=n.split(" ").map(l=>{let a=document.getElementById(l);if(a){let i=a.getAttribute("aria-label");return typeof i=="string"?i.trim():yt(a).trim()}return null}).filter(Boolean);if(o.length>0)return o.join(", ")}return yt(e).trim()}function jt(e){let t=x(""),n=x("");return()=>{let o=_(e);if(!o)return"";let l=o.innerText;if(t.value===l)return n.value;let a=en(o).trim().toLowerCase();return t.value=l,n.value=a,a}}function tn(e,t){return e===t}var ln=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(ln||{}),nn=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(nn||{}),on=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(on||{});function an(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let Nt=Symbol("ListboxContext");function We(e){let t=de(Nt,null);if(t===null){let n=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,We),n}return t}let rn=O({name:"Listbox",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>tn},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:t,attrs:n,emit:o}){let l=x(1),a=x(null),i=x(null),r=x(null),c=x([]),s=x(""),u=x(null),d=x(1);function f(w=$=>$){let $=u.value!==null?c.value[u.value]:null,C=Tt(w(c.value.slice()),L=>_(L.dataRef.domRef)),T=$?C.indexOf($):null;return T===-1&&(T=null),{options:C,activeOptionIndex:T}}let p=y(()=>e.multiple?1:0),[b,v]=St(y(()=>e.modelValue),w=>o("update:modelValue",w),y(()=>e.defaultValue)),m=y(()=>b.value===void 0?Y(p.value,{1:[],0:void 0}):b.value),h={listboxState:l,value:m,mode:p,compare(w,$){if(typeof e.by=="string"){let C=e.by;return(w==null?void 0:w[C])===($==null?void 0:$[C])}return e.by(w,$)},orientation:y(()=>e.horizontal?"horizontal":"vertical"),labelRef:a,buttonRef:i,optionsRef:r,disabled:y(()=>e.disabled),options:c,searchQuery:s,activeOptionIndex:u,activationTrigger:d,closeListbox(){e.disabled||l.value!==1&&(l.value=1,u.value=null)},openListbox(){e.disabled||l.value!==0&&(l.value=0)},goToOption(w,$,C){if(e.disabled||l.value===1)return;let T=f(),L=Ot(w===M.Specific?{focus:M.Specific,id:$}:{focus:w},{resolveItems:()=>T.options,resolveActiveIndex:()=>T.activeOptionIndex,resolveId:U=>U.id,resolveDisabled:U=>U.dataRef.disabled});s.value="",u.value=L,d.value=C??1,c.value=T.options},search(w){if(e.disabled||l.value===1)return;let $=s.value!==""?0:1;s.value+=w.toLowerCase();let C=(u.value!==null?c.value.slice(u.value+$).concat(c.value.slice(0,u.value+$)):c.value).find(L=>L.dataRef.textValue.startsWith(s.value)&&!L.dataRef.disabled),T=C?c.value.indexOf(C):-1;T===-1||T===u.value||(u.value=T,d.value=1)},clearSearch(){e.disabled||l.value!==1&&s.value!==""&&(s.value="")},registerOption(w,$){let C=f(T=>[...T,{id:w,dataRef:$}]);c.value=C.options,u.value=C.activeOptionIndex},unregisterOption(w){let $=f(C=>{let T=C.findIndex(L=>L.id===w);return T!==-1&&C.splice(T,1),C});c.value=$.options,u.value=$.activeOptionIndex,d.value=1},theirOnChange(w){e.disabled||v(w)},select(w){e.disabled||v(Y(p.value,{0:()=>w,1:()=>{let $=oe(h.value.value).slice(),C=oe(w),T=$.findIndex(L=>h.compare(C,oe(L)));return T===-1?$.push(C):$.splice(T,1),$}}))}};ot([i,r],(w,$)=>{var C;h.closeListbox(),$t($,_t.Loose)||(w.preventDefault(),(C=_(i))==null||C.focus())},y(()=>l.value===0)),te(Nt,h),at(y(()=>Y(l.value,{0:G.Open,1:G.Closed})));let k=y(()=>{var w;return(w=_(i))==null?void 0:w.closest("form")});return V(()=>{be([k],()=>{if(!k.value||e.defaultValue===void 0)return;function w(){h.theirOnChange(e.defaultValue)}return k.value.addEventListener("reset",w),()=>{var $;($=k.value)==null||$.removeEventListener("reset",w)}},{immediate:!0})}),()=>{let{name:w,modelValue:$,disabled:C,form:T,...L}=e,U={open:l.value===0,disabled:C,value:m.value};return z(H,[...w!=null&&m.value!=null?ml({[w]:m.value}).map(([J,ye])=>z(Ne,Ct({features:Ge.Hidden,key:J,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:T,name:J,value:ye}))):[],q({ourProps:{},theirProps:{...n,...it(L,["defaultValue","onUpdate:modelValue","horizontal","multiple","by"])},slot:U,slots:t,attrs:n,name:"Listbox"})])}}}),sn=O({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-listbox-button-${fe()}`}},setup(e,{attrs:t,slots:n,expose:o}){let l=We("ListboxButton");o({el:l.buttonRef,$el:l.buttonRef});function a(s){switch(s.key){case A.Space:case A.Enter:case A.ArrowDown:s.preventDefault(),l.openListbox(),j(()=>{var u;(u=_(l.optionsRef))==null||u.focus({preventScroll:!0}),l.value.value||l.goToOption(M.First)});break;case A.ArrowUp:s.preventDefault(),l.openListbox(),j(()=>{var u;(u=_(l.optionsRef))==null||u.focus({preventScroll:!0}),l.value.value||l.goToOption(M.Last)});break}}function i(s){switch(s.key){case A.Space:s.preventDefault();break}}function r(s){l.disabled.value||(l.listboxState.value===0?(l.closeListbox(),j(()=>{var u;return(u=_(l.buttonRef))==null?void 0:u.focus({preventScroll:!0})})):(s.preventDefault(),l.openListbox(),an(()=>{var u;return(u=_(l.optionsRef))==null?void 0:u.focus({preventScroll:!0})})))}let c=rt(y(()=>({as:e.as,type:t.type})),l.buttonRef);return()=>{var s,u;let d={open:l.listboxState.value===0,disabled:l.disabled.value,value:l.value.value},{id:f,...p}=e,b={ref:l.buttonRef,id:f,type:c.value,"aria-haspopup":"listbox","aria-controls":(s=_(l.optionsRef))==null?void 0:s.id,"aria-expanded":l.listboxState.value===0,"aria-labelledby":l.labelRef.value?[(u=_(l.labelRef))==null?void 0:u.id,f].join(" "):void 0,disabled:l.disabled.value===!0?!0:void 0,onKeydown:a,onKeyup:i,onClick:r};return q({ourProps:b,theirProps:p,slot:d,attrs:t,slots:n,name:"ListboxButton"})}}}),un=O({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-listbox-options-${fe()}`}},setup(e,{attrs:t,slots:n,expose:o}){let l=We("ListboxOptions"),a=x(null);o({el:l.optionsRef,$el:l.optionsRef});function i(s){switch(a.value&&clearTimeout(a.value),s.key){case A.Space:if(l.searchQuery.value!=="")return s.preventDefault(),s.stopPropagation(),l.search(s.key);case A.Enter:if(s.preventDefault(),s.stopPropagation(),l.activeOptionIndex.value!==null){let u=l.options.value[l.activeOptionIndex.value];l.select(u.dataRef.value)}l.mode.value===0&&(l.closeListbox(),j(()=>{var u;return(u=_(l.buttonRef))==null?void 0:u.focus({preventScroll:!0})}));break;case Y(l.orientation.value,{vertical:A.ArrowDown,horizontal:A.ArrowRight}):return s.preventDefault(),s.stopPropagation(),l.goToOption(M.Next);case Y(l.orientation.value,{vertical:A.ArrowUp,horizontal:A.ArrowLeft}):return s.preventDefault(),s.stopPropagation(),l.goToOption(M.Previous);case A.Home:case A.PageUp:return s.preventDefault(),s.stopPropagation(),l.goToOption(M.First);case A.End:case A.PageDown:return s.preventDefault(),s.stopPropagation(),l.goToOption(M.Last);case A.Escape:s.preventDefault(),s.stopPropagation(),l.closeListbox(),j(()=>{var u;return(u=_(l.buttonRef))==null?void 0:u.focus({preventScroll:!0})});break;case A.Tab:s.preventDefault(),s.stopPropagation();break;default:s.key.length===1&&(l.search(s.key),a.value=setTimeout(()=>l.clearSearch(),350));break}}let r=He(),c=y(()=>r!==null?(r.value&G.Open)===G.Open:l.listboxState.value===0);return()=>{var s,u,d,f;let p={open:l.listboxState.value===0},{id:b,...v}=e,m={"aria-activedescendant":l.activeOptionIndex.value===null||(s=l.options.value[l.activeOptionIndex.value])==null?void 0:s.id,"aria-multiselectable":l.mode.value===1?!0:void 0,"aria-labelledby":(f=(u=_(l.labelRef))==null?void 0:u.id)!=null?f:(d=_(l.buttonRef))==null?void 0:d.id,"aria-orientation":l.orientation.value,id:b,onKeydown:i,role:"listbox",tabIndex:0,ref:l.optionsRef};return q({ourProps:m,theirProps:v,slot:p,attrs:t,slots:n,features:Te.RenderStrategy|Te.Static,visible:c.value,name:"ListboxOptions"})}}}),cn=O({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-listbox.option-${fe()}`}},setup(e,{slots:t,attrs:n,expose:o}){let l=We("ListboxOption"),a=x(null);o({el:a,$el:a});let i=y(()=>l.activeOptionIndex.value!==null?l.options.value[l.activeOptionIndex.value].id===e.id:!1),r=y(()=>Y(l.mode.value,{0:()=>l.compare(oe(l.value.value),oe(e.value)),1:()=>oe(l.value.value).some(h=>l.compare(oe(h),oe(e.value)))})),c=y(()=>Y(l.mode.value,{1:()=>{var h;let k=oe(l.value.value);return((h=l.options.value.find(w=>k.some($=>l.compare(oe($),oe(w.dataRef.value)))))==null?void 0:h.id)===e.id},0:()=>r.value})),s=jt(a),u=y(()=>({disabled:e.disabled,value:e.value,get textValue(){return s()},domRef:a}));V(()=>l.registerOption(e.id,u)),le(()=>l.unregisterOption(e.id)),V(()=>{be([l.listboxState,r],()=>{l.listboxState.value===0&&r.value&&Y(l.mode.value,{1:()=>{c.value&&l.goToOption(M.Specific,e.id)},0:()=>{l.goToOption(M.Specific,e.id)}})},{immediate:!0})}),ve(()=>{l.listboxState.value===0&&i.value&&l.activationTrigger.value!==0&&j(()=>{var h,k;return(k=(h=_(a))==null?void 0:h.scrollIntoView)==null?void 0:k.call(h,{block:"nearest"})})});function d(h){if(e.disabled)return h.preventDefault();l.select(e.value),l.mode.value===0&&(l.closeListbox(),j(()=>{var k;return(k=_(l.buttonRef))==null?void 0:k.focus({preventScroll:!0})}))}function f(){if(e.disabled)return l.goToOption(M.Nothing);l.goToOption(M.Specific,e.id)}let p=It();function b(h){p.update(h)}function v(h){p.wasMoved(h)&&(e.disabled||i.value||l.goToOption(M.Specific,e.id,0))}function m(h){p.wasMoved(h)&&(e.disabled||i.value&&l.goToOption(M.Nothing))}return()=>{let{disabled:h}=e,k={active:i.value,selected:r.value,disabled:h},{id:w,value:$,disabled:C,...T}=e,L={id:w,ref:a,role:"option",tabIndex:h===!0?void 0:-1,"aria-disabled":h===!0?!0:void 0,"aria-selected":r.value,disabled:void 0,onClick:d,onFocus:f,onPointerenter:b,onMouseenter:b,onPointermove:v,onMousemove:v,onPointerleave:m,onMouseleave:m};return q({ourProps:L,theirProps:T,slot:k,attrs:n,slots:t,name:"ListboxOption"})}}});var dn=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(dn||{}),fn=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(fn||{});function vn(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let Gt=Symbol("MenuContext");function ze(e){let t=de(Gt,null);if(t===null){let n=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,ze),n}return t}let pn=O({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(e,{slots:t,attrs:n}){let o=x(1),l=x(null),a=x(null),i=x([]),r=x(""),c=x(null),s=x(1);function u(f=p=>p){let p=c.value!==null?i.value[c.value]:null,b=Tt(f(i.value.slice()),m=>_(m.dataRef.domRef)),v=p?b.indexOf(p):null;return v===-1&&(v=null),{items:b,activeItemIndex:v}}let d={menuState:o,buttonRef:l,itemsRef:a,items:i,searchQuery:r,activeItemIndex:c,activationTrigger:s,closeMenu:()=>{o.value=1,c.value=null},openMenu:()=>o.value=0,goToItem(f,p,b){let v=u(),m=Ot(f===M.Specific?{focus:M.Specific,id:p}:{focus:f},{resolveItems:()=>v.items,resolveActiveIndex:()=>v.activeItemIndex,resolveId:h=>h.id,resolveDisabled:h=>h.dataRef.disabled});r.value="",c.value=m,s.value=b??1,i.value=v.items},search(f){let p=r.value!==""?0:1;r.value+=f.toLowerCase();let b=(c.value!==null?i.value.slice(c.value+p).concat(i.value.slice(0,c.value+p)):i.value).find(m=>m.dataRef.textValue.startsWith(r.value)&&!m.dataRef.disabled),v=b?i.value.indexOf(b):-1;v===-1||v===c.value||(c.value=v,s.value=1)},clearSearch(){r.value=""},registerItem(f,p){let b=u(v=>[...v,{id:f,dataRef:p}]);i.value=b.items,c.value=b.activeItemIndex,s.value=1},unregisterItem(f){let p=u(b=>{let v=b.findIndex(m=>m.id===f);return v!==-1&&b.splice(v,1),b});i.value=p.items,c.value=p.activeItemIndex,s.value=1}};return ot([l,a],(f,p)=>{var b;d.closeMenu(),$t(p,_t.Loose)||(f.preventDefault(),(b=_(l))==null||b.focus())},y(()=>o.value===0)),te(Gt,d),at(y(()=>Y(o.value,{0:G.Open,1:G.Closed}))),()=>{let f={open:o.value===0,close:d.closeMenu};return q({ourProps:{},theirProps:e,slot:f,slots:t,attrs:n,name:"Menu"})}}}),mn=O({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-menu-button-${fe()}`}},setup(e,{attrs:t,slots:n,expose:o}){let l=ze("MenuButton");o({el:l.buttonRef,$el:l.buttonRef});function a(s){switch(s.key){case A.Space:case A.Enter:case A.ArrowDown:s.preventDefault(),s.stopPropagation(),l.openMenu(),j(()=>{var u;(u=_(l.itemsRef))==null||u.focus({preventScroll:!0}),l.goToItem(M.First)});break;case A.ArrowUp:s.preventDefault(),s.stopPropagation(),l.openMenu(),j(()=>{var u;(u=_(l.itemsRef))==null||u.focus({preventScroll:!0}),l.goToItem(M.Last)});break}}function i(s){switch(s.key){case A.Space:s.preventDefault();break}}function r(s){e.disabled||(l.menuState.value===0?(l.closeMenu(),j(()=>{var u;return(u=_(l.buttonRef))==null?void 0:u.focus({preventScroll:!0})})):(s.preventDefault(),l.openMenu(),vn(()=>{var u;return(u=_(l.itemsRef))==null?void 0:u.focus({preventScroll:!0})})))}let c=rt(y(()=>({as:e.as,type:t.type})),l.buttonRef);return()=>{var s;let u={open:l.menuState.value===0},{id:d,...f}=e,p={ref:l.buttonRef,id:d,type:c.value,"aria-haspopup":"menu","aria-controls":(s=_(l.itemsRef))==null?void 0:s.id,"aria-expanded":l.menuState.value===0,onKeydown:a,onKeyup:i,onClick:r};return q({ourProps:p,theirProps:f,slot:u,attrs:t,slots:n,name:"MenuButton"})}}}),gn=O({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-menu-items-${fe()}`}},setup(e,{attrs:t,slots:n,expose:o}){let l=ze("MenuItems"),a=x(null);o({el:l.itemsRef,$el:l.itemsRef}),gl({container:y(()=>_(l.itemsRef)),enabled:y(()=>l.menuState.value===0),accept(u){return u.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:u.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(u){u.setAttribute("role","none")}});function i(u){var d;switch(a.value&&clearTimeout(a.value),u.key){case A.Space:if(l.searchQuery.value!=="")return u.preventDefault(),u.stopPropagation(),l.search(u.key);case A.Enter:if(u.preventDefault(),u.stopPropagation(),l.activeItemIndex.value!==null){let f=l.items.value[l.activeItemIndex.value];(d=_(f.dataRef.domRef))==null||d.click()}l.closeMenu(),Et(_(l.buttonRef));break;case A.ArrowDown:return u.preventDefault(),u.stopPropagation(),l.goToItem(M.Next);case A.ArrowUp:return u.preventDefault(),u.stopPropagation(),l.goToItem(M.Previous);case A.Home:case A.PageUp:return u.preventDefault(),u.stopPropagation(),l.goToItem(M.First);case A.End:case A.PageDown:return u.preventDefault(),u.stopPropagation(),l.goToItem(M.Last);case A.Escape:u.preventDefault(),u.stopPropagation(),l.closeMenu(),j(()=>{var f;return(f=_(l.buttonRef))==null?void 0:f.focus({preventScroll:!0})});break;case A.Tab:u.preventDefault(),u.stopPropagation(),l.closeMenu(),j(()=>hl(_(l.buttonRef),u.shiftKey?ge.Previous:ge.Next));break;default:u.key.length===1&&(l.search(u.key),a.value=setTimeout(()=>l.clearSearch(),350));break}}function r(u){switch(u.key){case A.Space:u.preventDefault();break}}let c=He(),s=y(()=>c!==null?(c.value&G.Open)===G.Open:l.menuState.value===0);return()=>{var u,d;let f={open:l.menuState.value===0},{id:p,...b}=e,v={"aria-activedescendant":l.activeItemIndex.value===null||(u=l.items.value[l.activeItemIndex.value])==null?void 0:u.id,"aria-labelledby":(d=_(l.buttonRef))==null?void 0:d.id,id:p,onKeydown:i,onKeyup:r,role:"menu",tabIndex:0,ref:l.itemsRef};return q({ourProps:v,theirProps:b,slot:f,attrs:t,slots:n,features:Te.RenderStrategy|Te.Static,visible:s.value,name:"MenuItems"})}}}),hn=O({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-menu-item-${fe()}`}},setup(e,{slots:t,attrs:n,expose:o}){let l=ze("MenuItem"),a=x(null);o({el:a,$el:a});let i=y(()=>l.activeItemIndex.value!==null?l.items.value[l.activeItemIndex.value].id===e.id:!1),r=jt(a),c=y(()=>({disabled:e.disabled,get textValue(){return r()},domRef:a}));V(()=>l.registerItem(e.id,c)),le(()=>l.unregisterItem(e.id)),ve(()=>{l.menuState.value===0&&i.value&&l.activationTrigger.value!==0&&j(()=>{var v,m;return(m=(v=_(a))==null?void 0:v.scrollIntoView)==null?void 0:m.call(v,{block:"nearest"})})});function s(v){if(e.disabled)return v.preventDefault();l.closeMenu(),Et(_(l.buttonRef))}function u(){if(e.disabled)return l.goToItem(M.Nothing);l.goToItem(M.Specific,e.id)}let d=It();function f(v){d.update(v)}function p(v){d.wasMoved(v)&&(e.disabled||i.value||l.goToItem(M.Specific,e.id,0))}function b(v){d.wasMoved(v)&&(e.disabled||i.value&&l.goToItem(M.Nothing))}return()=>{let{disabled:v}=e,m={active:i.value,disabled:v,close:l.closeMenu},{id:h,...k}=e;return q({ourProps:{id:h,ref:a,role:"menuitem",tabIndex:v===!0?void 0:-1,"aria-disabled":v===!0?!0:void 0,disabled:void 0,onClick:s,onFocus:u,onPointerenter:f,onMouseenter:f,onPointermove:p,onMousemove:p,onPointerleave:b,onMouseleave:b},theirProps:{...n,...k},slot:m,attrs:n,slots:t,name:"MenuItem"})}}}),bn=Symbol("GroupContext"),yn=O({name:"Switch",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"button"},modelValue:{type:Boolean,default:void 0},defaultChecked:{type:Boolean,optional:!0},form:{type:String,optional:!0},name:{type:String,optional:!0},value:{type:String,optional:!0},id:{type:String,default:()=>`headlessui-switch-${fe()}`}},inheritAttrs:!1,setup(e,{emit:t,attrs:n,slots:o,expose:l}){let a=de(bn,null),[i,r]=St(y(()=>e.modelValue),m=>t("update:modelValue",m),y(()=>e.defaultChecked));function c(){r(!i.value)}let s=x(null),u=a===null?s:a.switchRef,d=rt(y(()=>({as:e.as,type:n.type})),u);l({el:u,$el:u});function f(m){m.preventDefault(),c()}function p(m){m.key===A.Space?(m.preventDefault(),c()):m.key===A.Enter&&bl(m.currentTarget)}function b(m){m.preventDefault()}let v=y(()=>{var m,h;return(h=(m=_(u))==null?void 0:m.closest)==null?void 0:h.call(m,"form")});return V(()=>{be([v],()=>{if(!v.value||e.defaultChecked===void 0)return;function m(){r(e.defaultChecked)}return v.value.addEventListener("reset",m),()=>{var h;(h=v.value)==null||h.removeEventListener("reset",m)}},{immediate:!0})}),()=>{let{id:m,name:h,value:k,form:w,...$}=e,C={checked:i.value},T={id:m,ref:u,role:"switch",type:d.value,tabIndex:0,"aria-checked":i.value,"aria-labelledby":a==null?void 0:a.labelledby.value,"aria-describedby":a==null?void 0:a.describedby.value,onClick:f,onKeyup:p,onKeypress:b};return z(H,[h!=null&&i.value!=null?z(Ne,Ct({features:Ge.Hidden,as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:i.value,form:w,name:h,value:k})):null,q({ourProps:T,theirProps:{...n,...it($,["modelValue","defaultChecked"])},slot:C,attrs:n,slots:o,name:"Switch"})])}}});function xn(e){let t={called:!1};return(...n)=>{if(!t.called)return t.called=!0,e(...n)}}function Je(e,...t){e&&t.length>0&&e.classList.add(...t)}function Ve(e,...t){e&&t.length>0&&e.classList.remove(...t)}var tt=(e=>(e.Finished="finished",e.Cancelled="cancelled",e))(tt||{});function wn(e,t){let n=Oe();if(!e)return n.dispose;let{transitionDuration:o,transitionDelay:l}=getComputedStyle(e),[a,i]=[o,l].map(r=>{let[c=0]=r.split(",").filter(Boolean).map(s=>s.includes("ms")?parseFloat(s):parseFloat(s)*1e3).sort((s,u)=>u-s);return c});return a!==0?n.setTimeout(()=>t("finished"),a+i):t("finished"),n.add(()=>t("cancelled")),n.dispose}function xt(e,t,n,o,l,a){let i=Oe(),r=a!==void 0?xn(a):()=>{};return Ve(e,...l),Je(e,...t,...n),i.nextFrame(()=>{Ve(e,...n),Je(e,...o),i.add(wn(e,c=>(Ve(e,...o,...t),Je(e,...l),r(c))))}),i.add(()=>Ve(e,...t,...n,...o,...l)),i.add(()=>r("cancelled")),i.dispose}function ke(e=""){return e.split(" ").filter(t=>t.trim().length>1)}let dt=Symbol("TransitionContext");var kn=(e=>(e.Visible="visible",e.Hidden="hidden",e))(kn||{});function Sn(){return de(dt,null)!==null}function $n(){let e=de(dt,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}function _n(){let e=de(ft,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}let ft=Symbol("NestingContext");function Ye(e){return"children"in e?Ye(e.children):e.value.filter(({state:t})=>t==="visible").length>0}function Ut(e){let t=x([]),n=x(!1);V(()=>n.value=!0),le(()=>n.value=!1);function o(a,i=$e.Hidden){let r=t.value.findIndex(({id:c})=>c===a);r!==-1&&(Y(i,{[$e.Unmount](){t.value.splice(r,1)},[$e.Hidden](){t.value[r].state="hidden"}}),!Ye(t)&&n.value&&(e==null||e()))}function l(a){let i=t.value.find(({id:r})=>r===a);return i?i.state!=="visible"&&(i.state="visible"):t.value.push({id:a,state:"visible"}),()=>o(a,$e.Unmount)}return{children:t,register:l,unregister:o}}let Ht=Te.RenderStrategy,lt=O({props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:n,slots:o,expose:l}){let a=x(0);function i(){a.value|=G.Opening,t("beforeEnter")}function r(){a.value&=~G.Opening,t("afterEnter")}function c(){a.value|=G.Closing,t("beforeLeave")}function s(){a.value&=~G.Closing,t("afterLeave")}if(!Sn()&&yl())return()=>z(Wt,{...e,onBeforeEnter:i,onAfterEnter:r,onBeforeLeave:c,onAfterLeave:s},o);let u=x(null),d=y(()=>e.unmount?$e.Unmount:$e.Hidden);l({el:u,$el:u});let{show:f,appear:p}=$n(),{register:b,unregister:v}=_n(),m=x(f.value?"visible":"hidden"),h={value:!0},k=fe(),w={value:!1},$=Ut(()=>{!w.value&&m.value!=="hidden"&&(m.value="hidden",v(k),s())});V(()=>{let W=b(k);le(W)}),ve(()=>{if(d.value===$e.Hidden&&k){if(f.value&&m.value!=="visible"){m.value="visible";return}Y(m.value,{hidden:()=>v(k),visible:()=>b(k)})}});let C=ke(e.enter),T=ke(e.enterFrom),L=ke(e.enterTo),U=ke(e.entered),J=ke(e.leave),ye=ke(e.leaveFrom),ie=ke(e.leaveTo);V(()=>{ve(()=>{if(m.value==="visible"){let W=_(u);if(W instanceof Comment&&W.data==="")throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}})});function xe(W){let we=h.value&&!p.value,re=_(u);!re||!(re instanceof HTMLElement)||we||(w.value=!0,f.value&&i(),f.value||c(),W(f.value?xt(re,C,T,L,U,pe=>{w.value=!1,pe===tt.Finished&&r()}):xt(re,J,ye,ie,U,pe=>{w.value=!1,pe===tt.Finished&&(Ye($)||(m.value="hidden",v(k),s()))})))}return V(()=>{be([f],(W,we,re)=>{xe(re),h.value=!1},{immediate:!0})}),te(ft,$),at(y(()=>Y(m.value,{visible:G.Open,hidden:G.Closed})|a.value)),()=>{let{appear:W,show:we,enter:re,enterFrom:pe,enterTo:I,entered:N,leave:ee,leaveFrom:se,leaveTo:Me,...me}=e,nl={ref:u},ol={...me,...p.value&&f.value&&xl.isServer?{class:ae([n.class,me.class,...C,...T])}:{}};return q({theirProps:ol,ourProps:nl,slot:{},slots:o,attrs:n,features:Ht,visible:m.value==="visible",name:"TransitionChild"})}}}),Cn=lt,Wt=O({inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:n,slots:o}){let l=He(),a=y(()=>e.show===null&&l!==null?(l.value&G.Open)===G.Open:e.show);ve(()=>{if(![!0,!1].includes(a.value))throw new Error('A <Transition /> is used but it is missing a `:show="true | false"` prop.')});let i=x(a.value?"visible":"hidden"),r=Ut(()=>{i.value="hidden"}),c=x(!0),s={show:a,appear:y(()=>e.appear||!c.value)};return V(()=>{ve(()=>{c.value=!1,a.value?i.value="visible":Ye(r)||(i.value="hidden")})}),te(ft,r),te(dt,s),()=>{let u=it(e,["show","appear","unmount","onBeforeEnter","onBeforeLeave","onAfterEnter","onAfterLeave"]),d={unmount:e.unmount};return q({ourProps:{...d,as:"template"},theirProps:{},slot:{},slots:{...o,default:()=>[z(Cn,{onBeforeEnter:()=>t("beforeEnter"),onAfterEnter:()=>t("afterEnter"),onBeforeLeave:()=>t("beforeLeave"),onAfterLeave:()=>t("afterLeave"),...n,...d,...u},o.default)]},attrs:{},features:Ht,visible:i.value==="visible",name:"Transition"})}}});const Tn=e=>{let t=document.body;return e.appendTo&&(typeof e.appendTo=="string"&&(t=document.querySelector(e.appendTo)),e.appendTo instanceof HTMLElement&&(t=e.appendTo),t instanceof HTMLElement||(t=document.body)),t},En=(e,t,n,o=null)=>{const l=P(e,t);return l.appContext=o,Pt(l,n),Tn(t).appendChild(n),l},Ue=e=>{var a,i;const t=(a=Ze())==null?void 0:a.appContext;if(t){const r=(i=Ze())==null?void 0:i.provides;Reflect.set(t,"provides",{...t.provides,...r})}const n=document.createElement("div"),o=()=>{var r;Pt(null,n),(r=n.parentNode)==null||r.removeChild(n)},l=r=>{var u;if(Reflect.has(r,"visible")||(r.visible=!0),typeof r.onClose!="function")r.onClose=o;else{const d=r.onClose;r.onClose=()=>{d(),o()}}const c=En(e,r,n,t),s=(u=c.component)==null?void 0:u.proxy;for(const d in r)Reflect.has(r,d)&&!Reflect.has(s.$props,d)&&(s[d]=r[d]);return c};return l.close=o,l},K=(e,t)=>{const n=(t==null?void 0:t.target)??window,o=navigator.userAgent.toLowerCase().includes("mac");let l=!1,a=t==null?void 0:t.key;const i=()=>{const s=t??{},u=[];return s.ctrlKey&&u.push(o?"Cmd":"Ctrl"),s.shiftKey&&u.push(o?"Option":"Shift"),a&&u.push(a),u},c=wl(n,"keydown",s=>{s.stopPropagation();const u=t??{};if(!(l||!a)&&(a=typeof a=="string"?[a]:a,a.map(d=>d.toLowerCase()).includes(s.key.toLowerCase())&&Pn(u,s))){s.preventDefault();const d=e();if(typeof d!="function")return;const f=R(n)??window,p=b=>{b.preventDefault(),d(),f.removeEventListener("keyup",p)};f.addEventListener("keyup",p)}});return e.hotKey=i(),e.directions=(t==null?void 0:t.directions)??"",e.removeListener=c,e.pause=()=>l=!0,e.unpause=()=>l=!1,e},Pn=(e,t)=>{const n=e.ctrlKey??!1,o=e.shiftKey??!1;if(e.exact)return(n===t.metaKey||n===t.ctrlKey)&&o===t.shiftKey;const l=[];return l.push(n===t.metaKey||n===t.ctrlKey),l.push(o===t.shiftKey),l.every(a=>a)},Rn=(e,t,n)=>{kl(window,e,o=>{var a;const l=o.target;(a=t.value)!=null&&a.contains(l)||n()})},ue=(e,t)=>{const n=de(e,t);if(!n)throw new Error(`Could not resolve ${e.description}`);return n},zt=(e,t)=>{const n=Ze();return(n==null?void 0:n.provides[e])||de(e,t)},An=(e,t)=>{const n=zt(e,t);if(!n)throw new Error(`Could not resolve ${e.description}`);return n},Yt=Symbol("FORM_STATE"),Ie=Symbol("PictodeAppKey"),Ln=Symbol("PictodePluginKey"),vt=Symbol("PictodeSelectedKey"),Xt=Symbol("PictodePanelFormKey"),Re=Symbol("PictodeHotKeyListKey"),Dn=O({__name:"Container",props:{config:{},model:{},prop:{default:""},labelWidth:{},size:{default:"small"}},emits:["change"],setup(e,{emit:t}){const n=e,o=ue(Yt),{config:l,prop:a,model:i}=Rt(n),r=y(()=>l.value.name||""),c=y(()=>{let d="";if(r.value)d=r.value;else return a.value;return`${a.value}${a.value?".":""}${d}`}),s=y(()=>{let{type:d}=l.value;return d==="form"?"":d==null?void 0:d.replace(/([A-Z])/g,"-$1").toLowerCase()}),u=async(d,f)=>{let p=f;try{typeof l.value.onChange=="function"&&(p=await l.value.onChange(o,p,{model:i.value,config:l.value,prop:d}))}catch(b){console.error(b)}Reflect.get(i.value,d)!==p&&(Reflect.set(i.value,d,p),t("change",i.value))};return(d,f)=>(S(),B("div",{class:ae([`${d.labelWidth}`=="0"||!R(l).label?"hidden":"","select-none","flex flex-col content-start gap-1 px-1 py-2"])},[g("label",{style:At({width:`${d.labelWidth}px`}),class:"text-start text-sm text-gray-600 dark:text-gray-300"},F(d.$t(R(l).label??"")),5),(S(),X(Sl(s.value),{key:R(l).name,class:ae(R(l).class),model:R(i),config:R(l),prop:c.value,onChange:u},null,40,["class","model","config","prop"]))],2))}}),Bn=["model","size"],On=O({__name:"Form",props:{model:{default:()=>({})},config:{default:()=>[]},labelWidth:{default:"200px"},disabled:{type:Boolean,default:!1},height:{default:"auto"},size:{default:"default"},inline:{type:Boolean,default:!1}},emits:["change","update:modelValue"],setup(e,{expose:t,emit:n}){const o=e,{config:l,model:a}=Rt(o),i=x(),r=x(a),c=$l({config:l.value,model:r.value}),s=()=>n("change",r.value),u=async()=>{var f;try{return await((f=i.value)==null?void 0:f.validate()),oe(r.value)}catch{const b=[];throw new Error(b.join("<br>"))}},d=()=>{var f;return(f=i.value)==null?void 0:f.resetFields()};return te(Yt,c),t({formModel:r,formState:c,resetForm:d,submitForm:u}),(f,p)=>(S(),B("form",{ref_key:"formRef",ref:i,model:r.value,size:f.size,onChange:s},[(S(!0),B(H,null,Q(o.config,(b,v)=>(S(),X(Dn,{key:v,config:b,model:r.value,onChange:s},null,8,["config","model"]))),128))],40,Bn))}}),In={class:"flex justify-center items-center"},Mn=["name","title"],Fn={class:"cursor-pointer"},Z=O({__name:"Button",props:{icon:{},text:{}},setup(e){return(t,n)=>(S(),B("button",_l({type:"button"},t.$attrs),[Ee(t.$slots,"default",{},()=>[g("label",In,[t.icon?(S(),B("iconpark-icon",{key:0,name:t.icon,title:t.$attrs.title,class:"cursor-pointer"},null,8,Mn)):Pe("",!0),g("span",Fn,F(t.text),1)])])],16))}});function Kn(e,t){return S(),B("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[g("path",{"fill-rule":"evenodd",d:"M19.916 4.626a.75.75 0 01.208 1.04l-9 13.5a.75.75 0 01-1.154.114l-6-6a.75.75 0 011.06-1.06l5.353 5.353 8.493-12.739a.75.75 0 011.04-.208z","clip-rule":"evenodd"})])}function qt(e,t){return S(),B("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[g("path",{"fill-rule":"evenodd",d:"M11.47 4.72a.75.75 0 011.06 0l3.75 3.75a.75.75 0 01-1.06 1.06L12 6.31 8.78 9.53a.75.75 0 01-1.06-1.06l3.75-3.75zm-3.75 9.75a.75.75 0 011.06 0L12 17.69l3.22-3.22a.75.75 0 111.06 1.06l-3.75 3.75a.75.75 0 01-1.06 0l-3.75-3.75a.75.75 0 010-1.06z","clip-rule":"evenodd"})])}const Vn={class:"relative mt-1"},jn={class:"relative w-full cursor-pointer rounded ring-1 ring-black ring-opacity-5 p-0.5 py-2 pl-3 pr-10 text-left focus:outline-none focus-visible:border-indigo-500 focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75 focus-visible:ring-offset-2 sm:text-sm"},Nn={class:"block truncate"},Gn={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},Jt=O({__name:"Select",props:{modelValue:{}},emits:["update:modelValue","change"],setup(e,{emit:t}){const n=e,o=y({get(){return n.modelValue},set(l){l!==n.modelValue&&(t("update:modelValue",l),t("change",l))}});return(l,a)=>(S(),X(R(rn),{modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=i=>o.value=i)},{default:D(()=>[g("div",Vn,[P(R(sn),{class:"relative w-full"},{default:D(()=>[Ee(l.$slots,"listbox",{selected:o.value},()=>[g("div",jn,[g("span",Nn,F(o.value),1),g("span",Gn,[P(R(qt),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})])])])]),_:3}),P(st,{"leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:D(()=>[P(R(un),null,{default:D(()=>[Ee(l.$slots,"default")]),_:3})]),_:3})])]),_:3},8,["modelValue"]))}}),Un={key:0,class:"absolute inset-y-0 left-0 flex items-center pl-3 text-blue-400"},Zt=O({__name:"SelectOption",props:{value:{type:[String,Number,Boolean]},label:{type:[String,Number,Boolean]}},setup(e){return(t,n)=>(S(),X(R(cn),{value:t.value},{default:D(({active:o,selected:l})=>[Ee(t.$slots,"default",{active:o,selected:l,item:t.value},()=>[g("li",{class:ae([o?"bg-gray-200 dark:bg-navyBlue-100":"","relative rounded-lg cursor-pointer select-none p-2 pl-10 text-gray-900 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-navyBlue-100"])},[g("span",{class:ae([l?"font-medium":"font-normal","block truncate"])},F(t.label),3),l?(S(),B("span",Un,[P(R(Kn),{class:"h-5 w-5","aria-hidden":"true"})])):Pe("",!0)],2)])]),_:3},8,["value"]))}});class Xe extends Error{constructor(n,o){super(n,o);E(this,"cause");this.name=this.constructor.name}}class Hn extends Xe{constructor(){super("This is not a browser environment")}}class nt extends Xe{constructor(){super("Cancel select")}}class Qt extends Xe{constructor(n){super(`Please select files in ${n} format`);E(this,"accepts");this.accepts=n}}const Wn=e=>{let t;return e instanceof File?t=e.name:t=e,RegExp(/\.([0-9a-z]+)(?:[\\?#]|$)/i).exec(t)[1]??""},el=(e=["*"],t)=>{if(!globalThis.document||!(globalThis.document instanceof Document))throw new Hn;const n=globalThis.document.createElement("input");return n.setAttribute("type","file"),n.setAttribute("visibility","hidden"),Array.isArray(e)&&e.length>0&&n.setAttribute("accept",e.join(",")),t&&n.setAttribute("multiple","true"),n.click(),new Promise((l,a)=>{globalThis.addEventListener("focus",()=>{setTimeout(()=>{var i;(!n.files||((i=n.files)==null?void 0:i.length)===0)&&a(new nt)},1e3)},{once:!0}),n.addEventListener("change",()=>{var i;if(!n.files||((i=n.files)==null?void 0:i.length)===0)a(new nt);else{const r=Array.from(n.files);o(r)&&a(new Qt(e)),l(r)}})});function o(l){return!e.includes("*")&&l.some(a=>!e.includes(`.${Wn(a)}`))}},zn=e=>{const t=new FileReader;return new Promise((n,o)=>{t.addEventListener("progress",l=>{const a="("+Math.floor(l.total/1e3)+" KB)",i=Math.floor(l.loaded/l.total*100)+"%";console.log(`Loading size: ${a} progress: ${i}`)}),t.addEventListener("load",l=>{var a;n((a=l.target)==null?void 0:a.result)}),t.addEventListener("error",l=>{o(l)}),e(t)})},ne=(e=[])=>{function t(o){return o.charAt(0).toUpperCase()+o.slice(1)}function n(o){if(typeof o=="string")return t(o);if(Array.isArray(o))return o.map(l=>t(l)).join("/")}return Array.isArray(e)?e.map(o=>n(o)).join("+"):t(e)},Yn=(e=[])=>{function t(o){return o===" "?"Space":o.charAt(0).toUpperCase()+o.slice(1)}function n(o){if(typeof o=="string")return t(o);if(Array.isArray(o))return o.map(l=>t(l)).join(" / ")}return Array.isArray(e)?e.map(o=>n(o)):[t(e)]},Xn=["onClick"],qn={class:"w-full grid grid-cols-[1rem_1fr_1.5fr] gap-2 text-sm font-medium select-none"},Jn=["name"],Zn=O({__name:"ContextMenu",props:{visible:{type:Boolean},x:{},y:{},menuGroups:{default:()=>[]}},emits:["update:visible","close"],setup(e,{emit:t}){const n=e,o=x(null),l=y({get(){return n.visible},set(s){t("update:visible",s),s||t("close")}}),a=y(()=>{const s=Math.max(n.x-2,0),u=Math.max(n.y-2,0),d=12,f=224,p=n.menuGroups.flat().length*40,b=s+f-window.innerWidth+d,v=u+p-window.innerHeight+d;return{left:b>0?`${s-b}px`:`${s}px`,top:v>0?`${u-v}px`:`${u}px`}}),i=y(()=>n.menuGroups.filter(s=>s.length));Rn("mousedown",o,()=>{l.value=!1});const r=s=>{s.preventDefault()},c=s=>{var u;s.disable||((u=s.action)==null||u.call(s),l.value=!1)};return V(()=>{o.value&&o.value.addEventListener("contextmenu",r,!1)}),le(()=>{o.value&&o.value.removeEventListener("contextmenu",r,!1)}),(s,u)=>(S(),X(st,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"translate-y-1 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-1 opacity-0"},{default:D(()=>[l.value?(S(),B("div",{key:0,style:At(a.value),class:"absolute w-screen max-w-sm transform"},[g("div",{ref_key:"popoverRef",ref:o,class:"absolute w-fit py-1 divide-y rounded-sm bg-gray-50 dark:bg-navyBlue-200 shadow-md ring-1 ring-gray-600 dark:ring-navyBlue-100 ring-opacity-5 focus:outline-none"},[(S(!0),B(H,null,Q(i.value,(d,f)=>(S(),B("div",{key:f,class:"py-1"},[(S(!0),B(H,null,Q(d,(p,b)=>(S(),B("div",{key:b,class:ae(["flex items-center py-2 px-4 transition duration-150 ease-in-out",[p.disable?"text-gray-300 dark:text-slate-500 cursor-default":"text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-navyBlue-100 cursor-pointer"]]),onClick:v=>c(p)},[g("div",qn,[p.icon?(S(),B("iconpark-icon",{key:0,name:p.icon},null,8,Jn)):Pe("",!0),g("p",null,F(s.$t(p.label)),1),g("p",{class:ae([p.disable?"":"text-gray-400 dark:text-slate-400","text-end text-xs"])},F(p.hotKey),3)])],10,Xn))),128))]))),128))],512)],4)):Pe("",!0)]),_:1}))}});const Qn=(e,t)=>{const n=Ue(Zn),{moveDown:o,moveUp:l,moveBottom:a,moveTop:i,deleteNode:r,selectAll:c,resetStage:s,undo:u,redo:d,makeGroup:f,decomposeGroup:p}=An(Re),b=({event:v})=>{v.evt.preventDefault();let m=!1;const h=e.findTopGroup(v.target);if(v.target instanceof ce.Stage)m=!0;else if(!t.value.find(J=>J.id()===v.target.id()||J.id()===(h==null?void 0:h.id()))){const J=h??v.target;e.select(J)}const k=t.value.length&&!m?[{icon:"sent-to-back",label:o.directions,hotKey:ne(o.hotKey),action:o},{icon:"bring-to-front",label:l.directions,hotKey:ne(l.hotKey),action:l},{icon:"bring-to-front-one",label:a.directions,hotKey:ne(a.hotKey),action:a},{icon:"send-to-back",label:i.directions,hotKey:ne(i.hotKey),action:i}]:[],w=t.value.length>1&&!m?[{icon:"group",label:f.directions,hotKey:ne(f.hotKey),action:f}]:[],$=t.value.length===1&&t.value[0]instanceof ce.Group?[{icon:"ungroup",label:p.directions,hotKey:ne(p.hotKey),action:p}]:[],C=t.value.length&&!m?[{icon:"delete-one",label:r.directions,hotKey:ne(r.hotKey),action:r}]:[],T=m||t.value.length===0?[{icon:"full-selection",label:c.directions,hotKey:ne(c.hotKey),action:c},{icon:"clear",label:s.directions,hotKey:ne(s.hotKey),action:s}]:[],L=[{icon:"undo",label:u.directions,hotKey:ne(u.hotKey),disable:!e.canUndo(),action:u},{icon:"redo",label:d.directions,hotKey:ne(d.hotKey),disable:!e.canRedo(),action:d}],U=[T,k,w,$,L,C];n({x:v.evt.clientX,y:v.evt.clientY,menuGroups:U})};V(()=>e.on("mouse:contextmenu",b)),le(()=>e.off("mouse:contextmenu",b))},eo=Qn,to=g("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),lo={class:"fixed inset-0 overflow-y-auto"},no={class:"flex min-h-full items-center justify-center p-4 text-center"},pt=O({__name:"Dialog",props:{visible:{type:Boolean}},emits:["update:visible","close"],setup(e,{emit:t}){const n=e,o=y({get(){return n.visible},set(a){t("update:visible",a),a||t("close")}});function l(){o.value=!1}return(a,i)=>(S(),X(R(Wt),{appear:"",show:o.value,as:"template"},{default:D(()=>[P(R(Jl),{as:"div",class:"relative z-10",onClose:l},{default:D(()=>[P(R(lt),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:D(()=>[to]),_:1}),g("div",lo,[g("div",no,[P(R(lt),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:D(()=>[P(R(Zl),{class:"rounded-lg bg-white dark:bg-navyBlue-200 p-4 text-left dark:text-gray-300 align-middle shadow-xl transition-all w-auto"},{default:D(()=>[P(R(Ql),{class:"grid grid-cols-[1fr_2rem] py-2"},{default:D(()=>[g("div",null,[Ee(a.$slots,"title")]),P(Z,{class:"hover:bg-none",icon:"close",onClick:l})]),_:3}),Ee(a.$slots,"default")]),_:3})]),_:3})])])]),_:3})]),_:3},8,["show"]))}}),oo={as:"h3",class:"text-lg font-medium leading-6"},ao={class:"flex flex-col"},io={class:"mt-3"},ro={class:"text-sm text-gray-500"},so={class:"mt-4 flex flex-row justify-between"},uo=O({__name:"MessageBox",props:{visible:{type:Boolean},title:{},message:{}},emits:["update:visible","close","submit"],setup(e,{emit:t}){const n=e,o=y({get(){return n.visible},set(i){t("update:visible",i),i||t("close")}}),l=()=>{o.value=!1},a=()=>{t("submit"),l()};return(i,r)=>(S(),X(pt,{visible:o.value,onClose:l},{title:D(()=>[g("div",oo,F(i.$t(i.title)),1)]),default:D(()=>[g("div",ao,[g("div",io,[g("p",ro,F(i.$t(i.message)),1)]),g("div",so,[P(Z,{class:"inline-flex justify-center rounded-md border border-transparent bg-red-400 px-4 py-2 text-sm font-medium text-red-50 hover:bg-red-500 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2",title:i.$t("关闭"),text:i.$t("关闭"),onClick:l},null,8,["title","text"]),P(Z,{class:"inline-flex justify-center rounded-md border border-transparent bg-blue-400 px-4 py-2 text-sm font-medium text-blue-50 hover:bg-blue-500 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",title:i.$t("确认"),text:i.$t("确认"),onClick:a},null,8,["title","text"])])])]),_:1},8,["visible"]))}}),co=()=>{const e=x(!1),t=x();return{loading:e,error:t,execute:async(o=["*"],l=!1)=>{try{return e.value=!0,await el(o,l)}catch(a){throw(a instanceof nt||a instanceof Qt)&&(t.value=a),a}finally{e.value=!1}}}},fo=()=>{const e=x(!1),t=x(),{error:n,execute:o}=co();return be(()=>n.value,a=>{t.value=a}),{loading:e,error:t,execute:async(a=["*"])=>{try{e.value=!0;const i=await o(a)??[],r=new FileReader;return new Promise((c,s)=>{r.onload=({target:u})=>{c(u==null?void 0:u.result)},r.onerror=u=>{t.value=u,s(t.value)},r.readAsText(i[0])})}catch(i){t.value=i}finally{e.value=!1}}}},vo=g("span",{class:"sr-only"},"Enable notifications",-1),po=O({__name:"Switch",props:{modelValue:{type:Boolean}},emits:["change","update:modelValue"],setup(e,{emit:t}){const n=e,o=y({get(){return n.modelValue},set(l){l!==n.modelValue&&(t("update:modelValue",l),t("change",l))}});return(l,a)=>(S(),X(R(yn),{modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=i=>o.value=i),class:ae([o.value?"bg-blue-400":"bg-gray-200","relative inline-flex h-6 w-11 items-center rounded-full"])},{default:D(()=>[vo,g("span",{class:ae([o.value?"translate-x-6":"translate-x-1","inline-block h-4 w-4 transform rounded-full bg-white transition"])},null,2)]),_:1},8,["modelValue","class"]))}});var Be=(e=>(e.HTML="text/html",e.CSS="text/css",e.JPEG="image/jpeg",e.PNG="image/png",e.GIF="image/gif",e.MPEG="audio/mpeg",e.OGG="audio/ogg",e.MP4="video/mp4",e.JSON="application/json",e.JAVASCRIPT="application/javascript",e.ECMASCRIPT="application/ecmascript",e.EXCEL="application/vnb.ms-excel",e.CSV="application/x-csv",e.ZIP="application/zip",e.TGZ="application/x-gtar",e.TAR_GZ="application/x-gzip",e.XML="text/xml",e.TEXT="text/plain",e.SVG="image/svg+xml",e))(Be||{});class mo extends Xe{constructor(t,n){super(`${t} 导出失败`,{cause:n.cause})}}const tl=(e,t="file",n=Be.TEXT,o="utf-8",l=!1)=>{const a=x(!1),i=x();return{execute:async c=>{a.value=!0,typeof t=="function"&&(t=t(c));try{const s=await Promise.resolve(e(c)),u=document.createElement("a");if(l)u.href=s;else{const d=new Blob([s],{type:`${n};charset=${o}`});u.href=window.URL.createObjectURL(d)}u.download=t,u.click(),window.URL.revokeObjectURL(u.href)}catch(s){throw i.value=new mo(t,s),i.value}finally{a.value=!1}},loading:a,error:i}},go={class:"text-lg"},ho={class:"max-w-5xl min-w-fit flex flex-row justify-between transform overflow-hidden"},bo={class:"flex items-center h-96 w-96"},yo={class:"w-full h-full flex flex-grow justify-center bg-fixed rounded-md p-1",style:{"background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMUlEQVQ4T2NkYGAQYcAP3uCTZhw1gGGYhAGBZIA/nYDCgBDAm9BGDWAAJyRCgLaBCAAgXwixzAS0pgAAAABJRU5ErkJggg==)"}},xo=["src"],wo={class:"flex flex-col flex-wrap w-96 min-w-max gap-6 grow ml-6 antialiased p-2"},ko={class:"flex flex-row justify-between items-center"},So={class:"flex flex-row justify-between items-center"},$o={class:"flex flex-grow justify-around flex-wrap"},_o={class:"flex flex-row justify-between items-center"},Co={class:"relative w-full cursor-pointer rounded-lg ring-1 ring-slate-950 dark:ring-navyBlue-100 py-2 pl-2 pr-6 text-left focus:outline-none focus-visible:border-indigo-500 focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75 focus-visible:ring-offset-2 sm:text-sm"},To={class:"block truncate"},Eo={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},Po={class:"absolute mt-3 max-h-60 w-fit rounded-lg bg-white dark:bg-navyBlue-200 py-1 text-base shadow-lg ring-1 ring-slate-950 dark:ring-navyBlue-100 focus:outline-none sm:text-sm"},Ro={class:"grow flex flex-col justify-end"},Ao=O({__name:"ExportImageDialog",props:{visible:{type:Boolean}},emits:["update:visible","close"],setup(e,{emit:t}){const n=e,o=ue(Ie),l=ue(vt),a=y({get(){return n.visible},set(v){t("update:visible",v),v||t("close")}}),i=[{label:"PNG",value:Be.PNG,format:"png"},{label:"JPEG",value:Be.JPEG,format:"jpeg"}],r=[1,2,3],c=x(!0),s=x(2),u=x(i[0].value),d=x(""),f=()=>{a.value=!1},p=async()=>{const{dataURL:v}=await o.toDataURL(l.value,{pixelRatio:s.value,mimeType:u.value,haveBackground:c.value});d.value=v},b=async()=>{const{execute:v}=tl(()=>d.value,()=>{var m;return`Pictode-${new Date}.${(m=i.find(h=>h.value===u.value))==null?void 0:m.format}`},u.value,"utf-8",!0);await v(),a.value=!1};return V(()=>{j(()=>{p()})}),(v,m)=>(S(),X(pt,{visible:a.value,onClose:f},{title:D(()=>[g("div",go,F(v.$t("导出图片")),1)]),default:D(()=>[g("div",ho,[g("div",bo,[g("div",yo,[g("img",{src:d.value,class:"object-contain max-w-full max-h-full"},null,8,xo)])]),g("div",wo,[g("div",ko,[g("label",null,F(v.$t("背景")),1),P(po,{modelValue:c.value,"onUpdate:modelValue":m[0]||(m[0]=h=>c.value=h),onChange:p},null,8,["modelValue"])]),g("div",So,[g("label",null,F(v.$t("缩放比")),1),P(R(Lt),{modelValue:s.value,"onUpdate:modelValue":m[1]||(m[1]=h=>s.value=h),class:"rounded-lg ring-1 w-24 ring-slate-950 dark:ring-navyBlue-100 p-0.5",onChange:p},{default:D(()=>[g("div",$o,[(S(),B(H,null,Q(r,(h,k)=>P(R(Dt),{key:k,value:h,class:"font-mono text-xs"},{default:D(({checked:w})=>[g("div",{class:ae(["rounded-lg inline-flex items-center relative cursor-pointer select-none p-2",w?"bg-blue-500":"hover:bg-gray-200 dark:hover:bg-navyBlue-100"])},F(`${h}x`),3)]),_:2},1032,["value"])),64))])]),_:1},8,["modelValue"])]),g("div",_o,[g("label",null,F(v.$t("图片格式")),1),P(Jt,{modelValue:u.value,"onUpdate:modelValue":m[2]||(m[2]=h=>u.value=h),class:"w-24",onChange:p},{listbox:D(()=>{var h;return[g("div",Co,[g("span",To,F((h=i.find(k=>k.value===u.value))==null?void 0:h.label),1),g("span",Eo,[P(R(qt),{class:"h-3 w-3 text-gray-400","aria-hidden":"true"})])])]}),default:D(()=>[g("div",Po,[(S(),B(H,null,Q(i,({label:h,value:k},w)=>P(Zt,{key:w,value:k,label:h,class:"p-1 w-24"},null,8,["value","label"])),64))])]),_:1},8,["modelValue"])]),g("div",Ro,[P(Z,{class:"inline-flex justify-center rounded-md border border-transparent px-4 py-2 text-sm font-medium bg-blue-400 text-blue-50",title:v.$t("下载"),text:v.$t("下载"),onClick:b},null,8,["title","text"])])])])]),_:1},8,["visible"]))}}),Lo=(e,t,n)=>{const o=zt(Re,null);if(o)return o;const l=Ue(uo),a=Ue(Ao),{execute:i}=fo(),r={open:K(async()=>{const c=await i([".pictode"]);c&&t.fromJSON(c)},{key:"o",directions:"打开",exact:!0,ctrlKey:!0,target:e}),exportImg:K(()=>{a({})},{key:"e",directions:"导出图片",exact:!0,ctrlKey:!0,shiftKey:!0,target:e}),moveDown:K(()=>{t.moveDown(...n.value)},{key:"[",directions:"下移一层",exact:!0,ctrlKey:!0,target:e}),moveUp:K(()=>{t.moveUp(...n.value)},{key:"]",directions:"上移一层",exact:!0,ctrlKey:!0,target:e}),moveBottom:K(()=>{t.moveBottom(...n.value)},{key:"[",directions:"置于底层",exact:!0,ctrlKey:!0,shiftKey:!0,target:e}),moveTop:K(()=>{t.moveTop(...n.value)},{key:"]",directions:"置于顶层",exact:!0,ctrlKey:!0,shiftKey:!0,target:e}),deleteNode:K(()=>{t.remove(...n.value)},{key:["delete","backspace"],directions:"删除",target:e}),selectAll:K(()=>{const c=t.isPluginEnable("selectorPlugin");t.triggerSelector(!0),t.selectAll(),t.triggerSelector(c)},{key:"a",directions:"全部选中",exact:!0,ctrlKey:!0,target:e}),resetStage:K(()=>{l({title:"清除画布",message:"将会清空画布内容，是否继续？",onSubmit:()=>{t.clear(),l.close()}})},{key:"r",directions:"重置画布",exact:!0,ctrlKey:!0,target:e}),undo:K(()=>{t.undo()},{key:"z",directions:"撤销",exact:!0,ctrlKey:!0,target:e}),redo:K(()=>{t.redo()},{key:"y",directions:"重做",exact:!0,ctrlKey:!0,target:e}),stageDrag:K(()=>(t.triggerPanning(!0),()=>{t.triggerPanning(!1)}),{key:" ",directions:"移动画布",target:e}),mouseWheel:K(()=>(t.triggerMouseWheel(!0),()=>{t.triggerMouseWheel(!1)}),{key:["Control","Meta"],directions:"缩放画布",target:e}),makeGroup:K(()=>{const c=t.makeGroup(n.value);Array.isArray(c)||t.select(c)},{key:"g",directions:"组合",ctrlKey:!0,shiftKey:!0,exact:!0,target:e}),decomposeGroup:K(()=>{const c=n.value[0];c instanceof ce.Group&&t.decomposeGroup(c)},{key:"j",directions:"解除组合",ctrlKey:!0,shiftKey:!0,exact:!0,target:e}),alignLeft:K(()=>{n.value.length<1||t.alignLeft(n.value)},{key:"a",directions:"左对齐",shiftKey:!0,target:e}),alignCenterX:K(()=>{n.value.length<1||t.alignCenterX(n.value)},{key:"h",directions:"水平居中",shiftKey:!0,target:e}),alignRight:K(()=>{n.value.length<1||t.alignRight(n.value)},{key:"d",directions:"右对齐",shiftKey:!0,target:e}),alignTop:K(()=>{n.value.length<1||t.alignTop(n.value)},{key:"w",directions:"顶对齐",shiftKey:!0,target:e}),alignCenterY:K(()=>{n.value.length<1||t.alignCenterY(n.value)},{key:"v",directions:"垂直居中",shiftKey:!0,target:e}),alignBottom:K(()=>{n.value.length<1||t.alignBottom(n.value)},{key:"s",directions:"底对齐",shiftKey:!0,target:e}),distributeX:K(()=>{n.value.length<2||t.dispersionX(n.value)},{key:"h",directions:"水平分布",ctrlKey:!0,shiftKey:!0,target:e}),distributeY:K(()=>{n.value.length<2||t.dispersionY(n.value)},{key:"v",directions:"垂直分布",ctrlKey:!0,shiftKey:!0,target:e})};return te(Re,r),r},Do=Lo,Bo={bindTool:["diamondTool"],bindShape:["RegularPolygon"],formConfig:[{name:"stroke",label:"描边",type:"Color"},{name:"fill",label:"填充",type:"Color"},{name:"strokeWidth",label:"描边宽度",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:2,title:"细"},{label:"line-2",value:4,title:"粗"},{label:"line-3",value:8,title:"特粗"}]},{name:"dash",label:"边框样式",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:[],title:"实线"},{label:"dotted-line-2",value:[12,8],title:"虚线"},{label:"dotted-line-1",value:[6,4],title:"点虚线"}]},{name:"opacity",label:"透明度",type:"Slider"}],model:{stroke:"#000000",fill:"#ffffff",strokeWidth:2,dash:[],opacity:1}},Oo={bindTool:["ellipseTool"],bindShape:["Ellipse"],formConfig:[{name:"stroke",label:"描边",type:"Color"},{name:"fill",label:"填充",type:"Color"},{name:"strokeWidth",label:"描边宽度",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:2,title:"细"},{label:"line-2",value:4,title:"粗"},{label:"line-3",value:8,title:"特粗"}]},{name:"dash",label:"边框样式",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:[],title:"实线"},{label:"dotted-line-2",value:[12,8],title:"虚线"},{label:"dotted-line-1",value:[6,4],title:"点虚线"}]},{name:"opacity",label:"透明度",type:"Slider"}],model:{stroke:"#000",fill:"#ffffff",strokeWidth:2,dash:[],opacity:1}},Io={bindTool:["imageTool"],bindShape:["Image"],formConfig:[{name:"stroke",label:"描边",type:"Color"},{name:"strokeWidth",label:"描边宽度",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:2,title:"细"},{label:"line-2",value:4,title:"粗"},{label:"line-3",value:8,title:"特粗"}]},{name:"dash",label:"边框样式",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:[],title:"实线"},{label:"dotted-line-2",value:[12,8],title:"虚线"},{label:"dotted-line-1",value:[6,4],title:"点虚线"}]},{name:"opacity",label:"透明度",type:"Slider"}],model:{stroke:"#ffffff00",strokeWidth:2,dash:[],opacity:1}},Mo={bindTool:["lineTool","drawingTool"],bindShape:["Line"],formConfig:[{name:"stroke",label:"描边",type:"Color"},{name:"strokeWidth",label:"描边宽度",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:2,title:"细"},{label:"line-2",value:4,title:"粗"},{label:"line-3",value:8,title:"特粗"}]},{name:"tension",label:"边角",type:"RadioGroup",optionType:"icon",options:[{label:"node-flat",value:0,title:"直角"},{label:"node-round",value:.4,title:"圆角"}]},{name:"dash",label:"边框样式",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:[],title:"实线"},{label:"dotted-line-2",value:[12,8],title:"虚线"},{label:"dotted-line-1",value:[6,4],title:"点虚线"}]},{name:"opacity",label:"透明度",type:"Slider"}],model:{stroke:"#000000",strokeWidth:2,opacity:1,tension:.4,dash:[]}},Fo={bindTool:["rectTool"],bindShape:["Rect"],formConfig:[{name:"stroke",label:"描边",type:"Color"},{name:"fill",label:"填充",type:"Color"},{name:"strokeWidth",label:"描边宽度",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:2,title:"细"},{label:"line-2",value:4,title:"粗"},{label:"line-3",value:8,title:"特粗"}]},{name:"cornerRadius",label:"边角",type:"RadioGroup",optionType:"icon",options:[{label:"node-flat",value:0,title:"直角"},{label:"node-round",value:20,title:"圆角"}]},{name:"dash",label:"边框样式",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:[],title:"实线"},{label:"dotted-line-2",value:[12,8],title:"虚线"},{label:"dotted-line-1",value:[6,4],title:"点虚线"}]},{name:"opacity",label:"透明度",type:"Slider"}],model:{stroke:"#000000",fill:"#ffffff",strokeWidth:2,cornerRadius:20,dash:[],opacity:1}},Ko={bindTool:["textTool"],bindShape:["Text"],formConfig:[{name:"fill",label:"填充",type:"Color"},{name:"fontSize",label:"字体大小",type:"RadioGroup",optionType:"text",options:[{label:"S",value:12,class:"w-[1rem] h-[1rem] flex items-center justify-center",title:"S"},{label:"M",value:16,class:"w-[1rem] h-[1rem] flex items-center justify-center",title:"M"},{label:"L",value:20,class:"w-[1rem] h-[1rem] flex items-center justify-center",title:"L"},{label:"XL",value:24,class:"w-[1rem] h-[1rem] flex items-center justify-center",title:"XL"}]},{name:"stroke",label:"描边",type:"Color"},{name:"strokeWidth",label:"描边宽度",type:"Slider",min:0,max:2},{name:"opacity",label:"透明度",type:"Slider"}],model:{stroke:"#000000",strokeWidth:0,fill:"#000000",fontSize:16,opacity:1}},ll=[Bo,Oo,Io,Mo,Fo,Ko],Vo=e=>ll.find(({bindShape:t})=>t.includes(e)),jo=e=>ll.find(({bindTool:t})=>t.includes(e)),No=()=>{const e=new El,t=new Pl({enabled:!0,stackSize:50}),n=new Rl({enabled:!0,multipleSelect:!0}),o=new Al({enabled:!0});e.use(t),e.use(n),e.use(o);const l=x([]),a=x([]),i=x({}),r=x(e.scale()),c=({selected:d})=>{var p,b;if(l.value=d,((p=e.curTool)==null?void 0:p.name)!=="selectTool")return;const f=Vo(((b=d[0])==null?void 0:b.className)??"");a.value=(f==null?void 0:f.formConfig)??[],f!=null&&f.model&&(f.model=Object.keys(f.model).reduce((v,m)=>{var h;return{...v,[m]:(h=l.value)==null?void 0:h[0].attrs[m]}},{})),i.value=(f==null?void 0:f.model)??{}},s=({curTool:d})=>{const f=jo(d.name);f&&(a.value=f.formConfig,i.value=f.model,d.config=i.value)},u=({scale:d})=>{r.value=d};return V(()=>{e.on("selected:changed",c),e.on("tool:changed",s),e.on("canvas:zoom:end",u)}),le(()=>{e.off("selected:changed",c),e.off("tool:changed",s),e.off("canvas:zoom:end",u)}),te(Ie,e),te(vt,l),te(Ln,{selectorPlugin:n,historyPlugin:t}),te(Xt,{panelFormConfig:a,panelFormModel:i}),{app:e,scale:r,selected:l,panelFormConfig:a,panelFormModel:i}},Go=No,Uo={class:"w-full min-w-fit md:min-w-[60rem] h-[40rem] p-2 overflow-auto scrollbar scrollbar-w-2 scrollbar-thumb-gray-200 scrollbar-track-gray-100 scrollbar-thumb-rounded-lg scrollbar-track-rounded-lg"},Ho={class:"my-4 text-xl font-bold"},Wo={class:"columns-2 gap-8"},zo={class:"font-bold text-base"},Yo={class:"rounded-lg ring-1 ring-slate-950 dark:ring-navyBlue-100 divide-y divide-slate-950 dark:divide-navyBlue-100 mt-2 text-xs"},Xo={class:"justify-self-end flex flex-row gap-1"},qo=O({__name:"HotKeyList",props:{visible:{type:Boolean}},emits:["update:visible","close"],setup(e,{emit:t}){const n=e,{undo:o,redo:l,deleteNode:a,selectAll:i,resetStage:r,stageDrag:c,mouseWheel:s,moveUp:u,moveBottom:d,moveTop:f,moveDown:p,makeGroup:b,decomposeGroup:v,alignBottom:m,alignLeft:h,alignCenterX:k,alignCenterY:w,alignRight:$,alignTop:C,distributeX:T,distributeY:L}=ue(Re),U=[{title:"编辑",hotKeyList:[o,l,i,a,r]},{title:"视图",hotKeyList:[c,s]},{title:"转换",hotKeyList:[f,u,p,d,b,v,h,k,$,C,w,m,T,L]}],J=y({get(){return n.visible},set(ie){t("update:visible",ie),ie||t("close")}}),ye=()=>{J.value=!1};return(ie,xe)=>(S(),X(pt,{visible:J.value,onClose:ye},{title:D(()=>[Cl(F(ie.$t("帮助中心")),1)]),default:D(()=>[g("div",Uo,[g("h3",Ho,F(ie.$t("快捷键列表")),1),g("div",Wo,[(S(),B(H,null,Q(U,({title:W,hotKeyList:we},re)=>g("div",{key:re,class:"w-full break-inside-avoid-column pb-4"},[g("h3",zo,F(ie.$t(W)),1),g("div",Yo,[(S(!0),B(H,null,Q(we,(pe,I)=>(S(),B("div",{key:I,class:"w-full p-4 flex flex-row justify-between items-center"},[g("div",null,F(ie.$t(pe.directions??"")),1),g("div",Xo,[(S(!0),B(H,null,Q(R(Yn)(pe.hotKey),(N,ee)=>(S(),B("i",{key:ee,class:"p-2 min-w-fit bg-blue-100 rounded-lg dark:text-gray-600"},F(N),1))),128))])]))),128))])])),64))])])]),_:1},8,["visible"]))}}),Jo=g("iconpark-icon",{name:"hamburger",class:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-navyBlue-100 text-lg dark:text-gray-300"},null,-1),Zo={class:"relative"},Qo={class:"w-full flex flex-row justify-between items-center gap-2"},ea=["name"],ta={class:"flex-1 text-start"},la={class:"text-xs text-gray-700 dark:text-slate-400"},na=O({__name:"Menu",setup(e){const t=ue(Ie),{open:n,resetStage:o,exportImg:l}=ue(Re),{execute:a}=tl(()=>t.toJSON(),()=>`Pictode-${new Date}.pictode`,Be.JSON,"utf-8"),i=[[{icon:"folder-close",label:n.directions??"",hotkey:n.hotKey,handler:n},{icon:"hard-disk-one",label:"保存到本地",handler:()=>{a()}},{icon:"down-picture",label:l.directions??"",hotkey:l.hotKey,handler:l},{icon:"clear",label:o.directions??"",hotkey:o.hotKey,handler:o}]];return(r,c)=>(S(),X(R(pn),{as:"div"},{default:D(()=>[P(R(mn),{class:"outline-none flex justify-start dark:bg-navyBlue-200 rounded-lg"},{default:D(()=>[Jo]),_:1}),P(st,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:D(()=>[g("div",Zo,[P(R(gn),{class:"absolute mt-2 w-60 p-1 divide-y rounded-lg bg-white dark:bg-navyBlue-200 shadow-md ring-1 ring-slate-950 dark:ring-navyBlue-100 focus:outline-none"},{default:D(()=>[(S(),B(H,null,Q(i,(s,u)=>g("div",{key:u,class:"px-1 py-1"},[(S(!0),B(H,null,Q(s,(d,f)=>(S(),X(R(hn),{key:f,class:"hover:bg-gray-200 dark:hover:bg-navyBlue-100"},{default:D(({active:p})=>[P(Z,{class:ae([p?"bg-blue-100":"text-gray-900 ","group flex w-full items-center rounded-md px-2 py-2 text-sm dark:text-gray-300"]),title:r.$t(d.label),onClick:d.handler},{default:D(()=>[g("div",Qo,[g("iconpark-icon",{name:d.icon},null,8,ea),g("span",ta,F(r.$t(d.label)),1),g("span",la,F(R(ne)(d.hotkey)),1)])]),_:2},1032,["class","title","onClick"])]),_:2},1024))),128))])),64))]),_:1})])]),_:1})]),_:1}))}}),oa={key:0},aa={key:0,class:"flex flex-col content-start gap-1 px-1 py-2 select-none"},ia={class:"text-start text-sm text-gray-600 dark:text-gray-300"},ra={class:"flex flex-row justify-start flex-wrap gap-2"},sa={key:1,class:"select-none p-2"},ua=g("iconpark-icon",null,null,-1),ca=[ua],da={class:"flex flex-col content-start gap-1 px-1 py-2 select-none"},fa={class:"text-start text-sm text-gray-600 dark:text-gray-300"},va={class:"flex flex-row justify-start flex-wrap gap-2"},pa=O({__name:"PropertyPanel",setup(e){const t=ue(Ie),n=ue(vt),{panelFormConfig:o,panelFormModel:l}=ue(Xt),{moveBottom:a,moveDown:i,moveUp:r,moveTop:c,alignLeft:s,alignRight:u,alignTop:d,alignBottom:f,alignCenterX:p,alignCenterY:b,distributeX:v,distributeY:m}=ue(Re),h=y(()=>[{icon:"bring-to-front-one",action:a},{icon:"sent-to-back",action:i},{icon:"bring-to-front",action:r},{icon:"send-to-back",action:c}]),k=y(()=>[{icon:"align-left",visible:n.value.length>1,action:s},{icon:"align-horizontally",visible:n.value.length>1,action:p},{icon:"align-right",visible:n.value.length>1,action:u},{icon:"distribute-horizontal-spacing",visible:n.value.length>2,action:v},{icon:"align-top",visible:n.value.length>1,action:d},{icon:"align-vertically",visible:n.value.length>1,action:b},{icon:"align-bottom",visible:n.value.length>1,action:f},{icon:"distribute-vertical-spacing",visible:n.value.length>2,action:m}]),w=y(()=>n.value.length>1),$=C=>{t.update(...n.value.map(T=>{const L=T.toObject();return L.attrs={...L.attrs,...C},L}))};return(C,T)=>R(o).length?(S(),B("div",oa,[P(R(On),{model:R(l),config:R(o),onChange:$},null,8,["model","config"]),w.value?(S(),B("div",aa,[g("label",ia,F(C.$t("对齐")),1),g("div",ra,[(S(!0),B(H,null,Q(k.value,(L,U)=>(S(),B("div",{key:U},[L.visible?(S(),X(Z,{key:0,class:"rounded-lg inline-flex items-center relative cursor-pointer select-none p-2 hover:bg-gray-200 dark:hover:bg-navyBlue-100 dark:text-gray-300",title:C.$t(L.action.directions??""),icon:L.icon,onClick:L.action},null,8,["title","icon","onClick"])):(S(),B("div",sa,ca))]))),128))])])):Pe("",!0),g("div",da,[g("label",fa,F(C.$t("层级")),1),g("div",va,[(S(!0),B(H,null,Q(h.value,(L,U)=>(S(),X(Z,{key:U,class:"rounded-lg inline-flex items-center relative cursor-pointer select-none p-2 hover:bg-gray-200 dark:hover:bg-navyBlue-100 dark:text-gray-300",title:C.$t(L.action.directions??""),icon:L.icon,onClick:L.action},null,8,["title","icon","onClick"]))),128))])])])):Pe("",!0)}});class ma{constructor({config:t,hooks:n}){E(this,"name","diamondTool");E(this,"hooks");E(this,"config");E(this,"diamond",null);E(this,"startPointer",new he(0,0));this.config=t,this.hooks=n}mousedown({app:t}){var n,o;this.diamond||(this.startPointer.clone(t.pointer),this.diamond=new ce.RegularPolygon({sides:4,radius:0,strokeScaleEnabled:!1,...this.config}),this.diamond.setPosition(this.startPointer),t.add(this.diamond),(o=(n=this.hooks)==null?void 0:n.onStartDrawing)==null||o.call(n,t,this.diamond))}mousemove({app:t}){if(!this.diamond)return;const n=t.pointer.x-this.startPointer.x,o=t.pointer.y-this.startPointer.y,l=new he(this.startPointer.x+n/2,this.startPointer.y+o/2);this.diamond.setPosition(l),this.diamond.radius(l.distanceTo(t.pointer)),t.render()}mouseup({app:t,pointer:n}){var o,l,a;if(this.diamond){if(this.startPointer.eq(n)){(o=this.diamond)==null||o.destroy(),this.diamond=null;return}(a=(l=this.hooks)==null?void 0:l.onCompleteDrawing)==null||a.call(l,t,this.diamond),this.diamond=null,this.startPointer.setXY(0,0)}}enableChanged(){this.diamond=null,this.startPointer.setXY(0,0)}}class ga{constructor({config:t,hooks:n}){E(this,"name","drawingTool");E(this,"config");E(this,"hooks");E(this,"line",null);E(this,"points",[]);this.config=t,this.hooks=n}mousedown({app:t}){var o,l;const n=this.points.at(-1);n!=null&&n.eq(t.pointer)||this.points.push(t.pointer),!this.line&&(this.line=new ce.Line({points:De(this.points),globalCompositeOperation:"source-over",lineCap:"round",lineJoin:"round",strokeScaleEnabled:!1,hitStrokeWidth:20,...this.config}),t.add(this.line),(l=(o=this.hooks)==null?void 0:o.onStartDrawing)==null||l.call(o,t,this.line))}mousemove({app:t,event:n}){this.line&&(n.evt.stopPropagation(),this.points.push(t.pointer),this.line.points(De(this.points)))}mouseup({app:t,pointer:n}){var l,a;if(!this.line)return;const o=this.points.at(-1);this.points.length<=6&&o&&n.distanceTo(o)<10&&this.line&&this.line.destroy(),(a=(l=this.hooks)==null?void 0:l.onCompleteDrawing)==null||a.call(l,t,this.line),this.line=null,this.points=[]}enableChanged(){this.line=null,this.points=[]}}class ha{constructor({config:t,hooks:n}){E(this,"name","ellipseTool");E(this,"config");E(this,"hooks");E(this,"ellipse",null);E(this,"startPointer",new he(0,0));this.config=t,this.hooks=n}mousedown({app:t}){this.ellipse||(this.startPointer.clone(t.pointer),this.ellipse=new ce.Ellipse({radiusX:0,radiusY:0,strokeScaleEnabled:!1,...this.config}),this.ellipse.setPosition(this.startPointer),this.ellipse.radius(new he(0,0)),t.add(this.ellipse))}mousemove({app:t}){if(!this.ellipse)return;const n=t.pointer.x-this.startPointer.x,o=t.pointer.y-this.startPointer.y,l=new he(Math.abs(n)/2,Math.abs(o)/2);this.ellipse.setPosition(new he(this.startPointer.x+n/2,this.startPointer.y+o/2)),this.ellipse.radius(l),t.render()}mouseup({app:t,pointer:n}){var o,l,a;if(this.ellipse){if(this.startPointer.eq(n)){(o=this.ellipse)==null||o.destroy(),this.ellipse=null;return}(a=(l=this.hooks)==null?void 0:l.onCompleteDrawing)==null||a.call(l,t,this.ellipse),this.ellipse=null,this.startPointer.setXY(0,0)}}enableChanged(){this.ellipse=null,this.startPointer.setXY(0,0)}}class ba{constructor({config:t,hooks:n}){E(this,"name","imageTool");E(this,"config");E(this,"hooks");E(this,"image",null);E(this,"isAdded",!1);E(this,"imageElement",new Image);this.config=t,this.hooks=n}mousedown({app:t}){var n,o;this.image&&(this.image.opacity(1),(o=(n=this.hooks)==null?void 0:n.onCompleteDrawing)==null||o.call(n,t,this.image),this.image=null)}mousemove({app:t,pointer:n}){if(this.isAdded||(this.image=new ce.Image({strokeScaleEnabled:!1,image:this.imageElement,...this.config}),this.image.opacity(.5),this.image.image(this.imageElement),t.add(this.image),this.isAdded=!0),!this.image)return;const o=200,l=o*((this.imageElement.height??1)/(this.imageElement.width??1));this.image.width(o),this.image.height(l),this.image.position(new he(n.x-o/2,n.y-l/2)),t.render()}enableChanged(){this.image=null,this.imageElement=new Image}}class ya{constructor({config:t,hooks:n}){E(this,"name","lineTool");E(this,"config");E(this,"hooks");E(this,"points",[]);E(this,"line",null);this.config=t,this.hooks=n}mousedown({app:t}){var o,l;this.line||(this.line=new ce.Line({points:De(this.points),fill:"transparent",strokeScaleEnabled:!1,hitStrokeWidth:20,...this.config}),t.add(this.line),(l=(o=this.hooks)==null?void 0:o.onStartDrawing)==null||l.call(o,t,this.line));const n=this.points.at(-1);n!=null&&n.eq(t.pointer)||this.points.push(t.pointer),this.line.points(De(this.points))}mousemove({app:t,pointer:n}){this.line&&(this.line.points(De(this.points).concat(n.x,n.y)),t.render())}doubleClick({app:t}){var n,o;this.line&&((o=(n=this.hooks)==null?void 0:n.onCompleteDrawing)==null||o.call(n,t,this.line),this.line=null,this.points=[])}enableChanged(){this.line=null,this.points=[]}}class xa{constructor({config:t,hooks:n}){E(this,"name","rectTool");E(this,"config");E(this,"hooks");E(this,"startPointer",new he(0,0));E(this,"rectangle",null);this.config=t,this.hooks=n}mousedown({app:t}){var n,o;this.rectangle||(this.startPointer.clone(t.pointer),this.rectangle=new ce.Rect({strokeScaleEnabled:!1,...this.config}),this.rectangle.setPosition(this.startPointer),this.rectangle.width(0),this.rectangle.height(0),t.add(this.rectangle),(o=(n=this.hooks)==null?void 0:n.onStartDrawing)==null||o.call(n,t,this.rectangle))}mousemove({app:t}){this.rectangle&&(this.rectangle.setPosition(new he(Math.min(this.startPointer.x,t.pointer.x),Math.min(this.startPointer.y,t.pointer.y))),this.rectangle.width(Math.abs(t.pointer.x-this.startPointer.x)),this.rectangle.height(Math.abs(t.pointer.y-this.startPointer.y)),t.render())}mouseup({app:t,pointer:n}){var o,l,a;if(this.rectangle){if(this.startPointer.eq(n)){(o=this.rectangle)==null||o.destroy(),this.rectangle=null;return}(a=(l=this.hooks)==null?void 0:l.onCompleteDrawing)==null||a.call(l,t,this.rectangle),this.rectangle=null,this.startPointer.setXY(0,0)}}enableChanged(){this.rectangle=null,this.startPointer.setXY(0,0)}}class wa{constructor(t){E(this,"name","eraserTool");E(this,"hooks");E(this,"targetMap",new Map);E(this,"isEraser",!1);this.hooks=t.hooks}mousedown({event:t}){this.isEraser=!0,!(t.target instanceof ce.Stage)&&(this.targetMap.set(t.target.id(),{node:t.target,opacity:t.target.attrs.opacity}),t.target.opacity(.3))}mouseup({app:t}){this.targetMap.size&&(t.remove(...[...this.targetMap.values()].map(({node:n,opacity:o})=>(n.opacity(o),n))),this.targetMap.clear(),this.isEraser=!1)}mousemove({event:t}){!this.isEraser||t.target instanceof ce.Stage||this.targetMap.get(t.target.id())||(this.targetMap.set(t.target.id(),{node:t.target,opacity:t.target.attrs.opacity}),t.target.opacity(.3))}enableChanged(){this.targetMap.clear(),this.isEraser=!1}}const ka=""+new URL("round-8b362c12.svg",import.meta.url).href,Sa={class:"flex flex-grow justify-around flex-wrap"},$a=["name","stroke"],_a=O({__name:"Tools",setup(e){const t=ue(Ie),n=new Ll({hooks:{onActive(r){var c,s;(s=(c=r.getPlugin("selectorPlugin"))==null?void 0:c.enable)==null||s.call(c)},onInactive(r){var c,s;(s=(c=r.getPlugin("selectorPlugin"))==null?void 0:c.disable)==null||s.call(c)}}}),o=[{icon:"move",name:"selectTool",title:"选择",tool:n},{icon:"rectangle",name:"rectTool",title:"矩形",tool:()=>new xa({hooks:{onActive(r){r.containerElement.style.cursor="crosshair",r.cancelSelect()},onInactive(r){r.containerElement.style.cursor="default"},onCompleteDrawing(r,c){l.value=n.name,j(()=>r.select(c))}}})},{icon:"oval",name:"ellipseTool",title:"椭圆",tool:()=>new ha({hooks:{onActive(r){r.containerElement.style.cursor="crosshair",r.cancelSelect()},onInactive(r){r.containerElement.style.cursor="default"},onCompleteDrawing(r,c){l.value=n.name,j(()=>r.select(c))}}})},{icon:"diamond",name:"diamondTool",title:"菱形",tool:()=>new ma({hooks:{onActive(r){r.containerElement.style.cursor="crosshair",r.cancelSelect()},onInactive(r){r.containerElement.style.cursor="default"},onCompleteDrawing(r,c){l.value=n.name,j(()=>r.select(c))}}})},{icon:"line-1",name:"lineTool",title:"线条",tool:()=>new ya({hooks:{onActive(r){r.containerElement.style.cursor="crosshair",r.cancelSelect()},onInactive(r){r.containerElement.style.cursor="default"},onCompleteDrawing(r,c){l.value=n.name,j(()=>r.select(c))}}})},{icon:"pencil",name:"drawingTool",title:"自由书写",tool:()=>new ga({hooks:{onActive(r){r.containerElement.style.cursor="crosshair",r.cancelSelect()},onInactive(r){r.containerElement.style.cursor="default"}}})},{icon:"picture",name:"imageTool",title:"图片",tool:()=>new ba({hooks:{async onActive(r,c){r.cancelSelect();const s=await el([".jpg",".png",".jpge",".PNG",".JPG",".JPGE",".svg"],!1),u=await zn(d=>d.readAsDataURL(s[0]));c.imageElement.src=u},onInactive(r){r.containerElement.style.cursor="default"},onCompleteDrawing(r,c){l.value=n.name,j(()=>r.select(c))}}})},{icon:"text",name:"textTool",title:"文本",tool:()=>new Dl({hooks:{onActive(r){r.containerElement.style.cursor="crosshair"},onInactive(r){r.containerElement.style.cursor="default"},onCompleteDrawing(r,c){l.value=n.name,j(()=>r.select(c))}}})},{icon:"eraser",name:"eraserTool",title:"橡皮擦",tool:()=>new wa({hooks:{onActive(r){r.containerElement.style.cursor=`url(${ka}), auto`},onInactive(r){r.containerElement.style.cursor="default"}}})}],l=x(o[0].name),{theme:a}=Bt(),i=y(()=>a.value==="dark"?"#d1d5db":"#333333");return ve(()=>{var c;let r=(c=o.find(({name:s})=>s===l.value))==null?void 0:c.tool;typeof r=="function"&&(r=r()),r&&t.setTool(r)}),(r,c)=>(S(),X(R(Lt),{modelValue:l.value,"onUpdate:modelValue":c[0]||(c[0]=s=>l.value=s)},{default:D(()=>[g("div",Sa,[(S(),B(H,null,Q(o,(s,u)=>P(R(Dt),{key:u,value:s.name,title:r.$t(s.title)},{default:D(({checked:d})=>[g("div",{class:ae(["rounded-lg inline-flex items-center relative cursor-pointer select-none p-2",d?"bg-blue-500":"hover:bg-gray-200 dark:hover:bg-navyBlue-100"])},[g("iconpark-icon",{name:s.icon,stroke:i.value},null,8,$a)],2)]),_:2},1032,["value","title"])),64))])]),_:1},8,["modelValue"]))}}),Ca={class:"w-full h-full"},Ta={class:"absolute left-0 top-0 right-0 bottom-0 p-8 z-10 pointer-events-none grid grid-cols-3 grid-rows-[auto_1fr_50px] gap-12"},Ea={class:"row-start-1 col-start-1 justify-self-start"},Pa={class:"row-start-1 col-start-2 justify-self-stretch"},Ra={class:"row-start-1 col-start-3 justify-self-end"},Aa={class:"grid grid-flow-col gap-1 items-center w-full pointer-events-auto rounded-lg p-1 ring-1 ring-slate-950 dark:ring-navyBlue-100 bg-white dark:bg-navyBlue-200"},La={class:"absolute z-50 mt-3 mr-10 max-h-60 left-[-30px] w-fit rounded-lg bg-white dark:bg-navyBlue-200 py-1 text-base shadow-lg ring-1 ring-slate-950 dark:ring-navyBlue-100 focus:outline-none sm:text-sm"},Da={class:"row-start-2 col-start-3 justify-self-end"},Ba={class:"row-start-3 col-start-1 justify-self-start flex flex-row gap-2"},Oa={class:"grid grid-flow-col gap-1 items-center w-full pointer-events-auto rounded-lg p-1 ring-1 ring-slate-950 dark:ring-navyBlue-100 bg-white dark:bg-navyBlue-200"},Ia={class:"flex text-center text-sm text-slate-900 dark:text-gray-300 h-full w-8 justify-center items-center select-none"},Ma={class:"grid grid-flow-col gap-1 items-center w-full pointer-events-auto rounded-lg p-1 ring-1 ring-slate-950 dark:ring-navyBlue-100 bg-white dark:bg-navyBlue-200"},ja=O({__name:"index",setup(e){const t=x(null),{triggerTheme:n,theme:o}=Bt(),{app:l,selected:a,scale:i}=Go(),{undo:r,redo:c}=Do(t,l,a);eo(l,a);const s=y(()=>`${Math.ceil(i.value*100)}%`),u=Ue(qo),d=()=>{l.scaleTo(i.value+l.config.mousewheel.factor)},f=()=>{l.scaleTo(i.value-l.config.mousewheel.factor)},p=()=>r(),b=()=>c(),v=()=>n();return V(()=>{t.value&&(l.mount(t.value),t.value.tabIndex=0)}),(m,h)=>(S(),B("div",Ca,[g("div",Ta,[g("section",Ea,[P(na,{class:"pointer-events-auto rounded-lg ring-1 ring-slate-950 dark:ring-navyBlue-100"})]),g("section",Pa,[P(_a,{class:"pointer-events-auto w-full rounded-lg p-2 ring-1 ring-slate-950 dark:ring-navyBlue-100 bg-white dark:bg-navyBlue-200"})]),g("section",Ra,[g("div",Aa,[P(Z,{class:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-navyBlue-100 text-lg dark:text-gray-300",icon:R(o)==="dark"?"sun":"moon",onClick:v},null,8,["icon"]),P(Jt,{modelValue:m.$i18n.locale,"onUpdate:modelValue":h[0]||(h[0]=k=>m.$i18n.locale=k)},{listbox:D(()=>[P(Z,{class:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-navyBlue-100 text-lg dark:text-gray-300",title:m.$t("语言"),icon:"translate"},null,8,["title"])]),default:D(()=>[g("div",La,[(S(!0),B(H,null,Q(R(Tl),({label:k,value:w},$)=>(S(),X(Zt,{key:$,value:w,label:k,class:"p-1"},null,8,["value","label"]))),128))])]),_:1},8,["modelValue"]),P(Z,{class:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-navyBlue-100 text-lg dark:text-gray-300",title:m.$t("帮助中心"),icon:"helpcenter",onClick:h[1]||(h[1]=k=>R(u)({}))},null,8,["title"])])]),g("section",Da,[P(pa,{class:"p-4 w-56 shadow-md rounded-lg ring-1 ring-slate-950 dark:ring-navyBlue-100 bg-white dark:bg-navyBlue-200 pointer-events-auto"})]),g("section",Ba,[g("div",Oa,[P(Z,{class:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-navyBlue-100 dark:text-gray-300",icon:"minus",title:m.$t("缩小"),onClick:f},null,8,["title"]),g("span",Ia,F(s.value),1),P(Z,{class:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-navyBlue-100 dark:text-gray-300",icon:"plus",title:m.$t("放大"),onClick:d},null,8,["title"])]),g("div",Ma,[P(Z,{class:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-navyBlue-100 dark:text-gray-300",icon:"undo",title:m.$t("撤销"),onClick:p},null,8,["title"]),P(Z,{class:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-navyBlue-100 dark:text-gray-300",icon:"redo",title:m.$t("重做"),onClick:b},null,8,["title"])])])]),g("div",{ref_key:"canvasRef",ref:t,class:"w-full h-full dark:bg-navyBlue-300 focus:border-none"},null,512)]))}});export{ja as default};
