var ll=Object.defineProperty;var nl=(e,t,n)=>t in e?ll(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var C=(e,t,n)=>(nl(e,typeof t!="symbol"?t+"":t,n),n);import{r as w,d as O,c as b,m as bt,o as V,a as le,n as ol,h as z,f as Ne,b as Ge,H as q,F as H,w as pe,S as _e,e as ye,g as $,E as wt,u as Y,i as Fe,P as Ve,N as he,T as al,p as te,j as de,s as il,t as fe,k as He,l as G,V as rl,q as sl,M as ul,y as lt,v as j,x as A,U as cl,_ as dl,z as vt,A as Ce,B as xt,C as kt,D as St,G as nt,I as fl,K as Pt,J as ot,L as at,O as $t,Q as oe,R as vl,W as pl,X as _t,Y as ml,Z as gl,$ as Pe,a0 as hl,a1 as ae,a2 as Je,a3 as Ct,a4 as E,a5 as yl,a6 as R,a7 as bl,a8 as Tt,a9 as S,aa as B,ab as h,ac as F,ad as Et,ae as X,af as wl,ag as xl,ah as Q,ai as Te,aj as kl,ak as Ee,al as D,am as it,an as Rt,ao as At,ap as Sl,aq as Lt,ar as Pl}from"./index-31258a99.js";import{H as $l,K as ce,s as Dt,F as _l,I as Cl,B as Tl,A as El,a as Rl,S as Al,b as Ll,P as ve,f as De,c as Dl,r as Bl,d as Ol,T as Il}from"./index-1e67a727.js";function Ml(e){throw new Error("Unexpected object: "+e)}var M=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(M||{});function Bt(e,t){let n=t.resolveItems();if(n.length<=0)return null;let o=t.resolveActiveIndex(),l=o??-1,a=(()=>{switch(e.focus){case 0:return n.findIndex(r=>!t.resolveDisabled(r));case 1:{let r=n.slice().reverse().findIndex((i,c,u)=>l!==-1&&u.length-c-1>=l?!1:!t.resolveDisabled(i));return r===-1?r:n.length-1-r}case 2:return n.findIndex((r,i)=>i<=l?!1:!t.resolveDisabled(r));case 3:{let r=n.slice().reverse().findIndex(i=>!t.resolveDisabled(i));return r===-1?r:n.length-1-r}case 4:return n.findIndex(r=>t.resolveId(r)===e.id);case 5:return null;default:Ml(e)}})();return a===-1?o:a}function pt(e){return[e.screenX,e.screenY]}function Ot(){let e=w([-1,-1]);return{wasMoved(t){let n=pt(t);return e.value[0]===n[0]&&e.value[1]===n[1]?!1:(e.value=n,!0)},update(t){e.value=pt(t)}}}function Fl(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function rt(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Oe(){let e=[],t={addEventListener(n,o,l,a){return n.addEventListener(o,l,a),t.add(()=>n.removeEventListener(o,l,a))},requestAnimationFrame(...n){let o=requestAnimationFrame(...n);t.add(()=>cancelAnimationFrame(o))},nextFrame(...n){t.requestAnimationFrame(()=>{t.requestAnimationFrame(...n)})},setTimeout(...n){let o=setTimeout(...n);t.add(()=>clearTimeout(o))},microTask(...n){let o={current:!0};return rt(()=>{o.current&&n[0]()}),t.add(()=>{o.current=!1})},style(n,o,l){let a=n.style.getPropertyValue(o);return Object.assign(n.style,{[o]:l}),this.add(()=>{Object.assign(n.style,{[o]:a})})},group(n){let o=Oe();return n(o),this.add(()=>o.dispose())},add(n){return e.push(n),()=>{let o=e.indexOf(n);if(o>=0)for(let l of e.splice(o,1))l()}},dispose(){for(let n of e.splice(0))n()}};return t}function Kl(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}function It(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.value){let o=$(n);o instanceof HTMLElement&&t.add(o)}return t}var Mt=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(Mt||{});let Ae=Object.assign(O({name:"FocusTrap",props:{as:{type:[Object,String],default:"div"},initialFocus:{type:Object,default:null},features:{type:Number,default:30},containers:{type:[Object,Function],default:w(new Set)}},inheritAttrs:!1,setup(e,{attrs:t,slots:n,expose:o}){let l=w(null);o({el:l,$el:l});let a=b(()=>bt(l)),r=w(!1);V(()=>r.value=!0),le(()=>r.value=!1),Vl({ownerDocument:a},b(()=>r.value&&!!(e.features&16)));let i=Nl({ownerDocument:a,container:l,initialFocus:b(()=>e.initialFocus)},b(()=>r.value&&!!(e.features&2)));Gl({ownerDocument:a,container:l,containers:e.containers,previousActiveElement:i},b(()=>r.value&&!!(e.features&8)));let c=ol();function u(d){let m=$(l);m&&(p=>p())(()=>{Y(c.value,{[Fe.Forwards]:()=>{Ve(m,he.First,{skipElements:[d.relatedTarget]})},[Fe.Backwards]:()=>{Ve(m,he.Last,{skipElements:[d.relatedTarget]})}})})}let s=w(!1);function f(d){d.key==="Tab"&&(s.value=!0,requestAnimationFrame(()=>{s.value=!1}))}function v(d){if(!r.value)return;let m=It(e.containers);$(l)instanceof HTMLElement&&m.add($(l));let p=d.relatedTarget;p instanceof HTMLElement&&p.dataset.headlessuiFocusGuard!=="true"&&(Ft(m,p)||(s.value?Ve($(l),Y(c.value,{[Fe.Forwards]:()=>he.Next,[Fe.Backwards]:()=>he.Previous})|he.WrapAround,{relativeTo:d.target}):d.target instanceof HTMLElement&&_e(d.target)))}return()=>{let d={},m={ref:l,onKeydown:f,onFocusout:v},{features:p,initialFocus:g,containers:y,...k}=e;return z(H,[!!(p&4)&&z(Ne,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:u,features:Ge.Focusable}),q({ourProps:m,theirProps:{...t,...k},slot:d,attrs:t,slots:n,name:"FocusTrap"}),!!(p&4)&&z(Ne,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:u,features:Ge.Focusable})])}}}),{features:Mt}),Se=[];Kl(()=>{function e(t){t.target instanceof HTMLElement&&t.target!==document.body&&Se[0]!==t.target&&(Se.unshift(t.target),Se=Se.filter(n=>n!=null&&n.isConnected),Se.splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function jl(e){let t=w(Se.slice());return ye([e],([n],[o])=>{o===!0&&n===!1?rt(()=>{t.value.splice(0)}):o===!1&&n===!0&&(t.value=Se.slice())},{flush:"post"}),()=>{var n;return(n=t.value.find(o=>o!=null&&o.isConnected))!=null?n:null}}function Vl({ownerDocument:e},t){let n=jl(t);V(()=>{pe(()=>{var o,l;t.value||((o=e.value)==null?void 0:o.activeElement)===((l=e.value)==null?void 0:l.body)&&_e(n())},{flush:"post"})}),le(()=>{t.value&&_e(n())})}function Nl({ownerDocument:e,container:t,initialFocus:n},o){let l=w(null),a=w(!1);return V(()=>a.value=!0),le(()=>a.value=!1),V(()=>{ye([t,n,o],(r,i)=>{if(r.every((u,s)=>(i==null?void 0:i[s])===u)||!o.value)return;let c=$(t);c&&rt(()=>{var u,s;if(!a.value)return;let f=$(n),v=(u=e.value)==null?void 0:u.activeElement;if(f){if(f===v){l.value=v;return}}else if(c.contains(v)){l.value=v;return}f?_e(f):Ve(c,he.First|he.NoScroll)===al.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),l.value=(s=e.value)==null?void 0:s.activeElement})},{immediate:!0,flush:"post"})}),l}function Gl({ownerDocument:e,container:t,containers:n,previousActiveElement:o},l){var a;wt((a=e.value)==null?void 0:a.defaultView,"focus",r=>{if(!l.value)return;let i=It(n);$(t)instanceof HTMLElement&&i.add($(t));let c=o.value;if(!c)return;let u=r.target;u&&u instanceof HTMLElement?Ft(i,u)?(o.value=u,_e(u)):(r.preventDefault(),r.stopPropagation(),_e(c)):_e(o.value)},!0)}function Ft(e,t){for(let n of e)if(n.contains(t))return!0;return!1}let Xe=new Map,Le=new Map;function mt(e,t=w(!0)){pe(n=>{var o;if(!t.value)return;let l=$(e);if(!l)return;n(function(){var r;if(!l)return;let i=(r=Le.get(l))!=null?r:1;if(i===1?Le.delete(l):Le.set(l,i-1),i!==1)return;let c=Xe.get(l);c&&(c["aria-hidden"]===null?l.removeAttribute("aria-hidden"):l.setAttribute("aria-hidden",c["aria-hidden"]),l.inert=c.inert,Xe.delete(l))});let a=(o=Le.get(l))!=null?o:0;Le.set(l,a+1),a===0&&(Xe.set(l,{"aria-hidden":l.getAttribute("aria-hidden"),inert:l.inert}),l.setAttribute("aria-hidden","true"),l.inert=!0)})}let Kt=Symbol("StackContext");var Ze=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(Ze||{});function Ul(){return de(Kt,()=>{})}function Hl({type:e,enabled:t,element:n,onUpdate:o}){let l=Ul();function a(...r){o==null||o(...r),l(...r)}V(()=>{ye(t,(r,i)=>{r?a(0,e,n):i===!0&&a(1,e,n)},{immediate:!0,flush:"sync"})}),le(()=>{t.value&&a(1,e,n)}),te(Kt,a)}function Wl(e){let t=il(e.getSnapshot());return le(e.subscribe(()=>{t.value=e.getSnapshot()})),t}function zl(e,t){let n=e(),o=new Set;return{getSnapshot(){return n},subscribe(l){return o.add(l),()=>o.delete(l)},dispatch(l,...a){let r=t[l].call(n,...a);r&&(n=r,o.forEach(i=>i()))}}}function Yl(){let e;return{before({doc:t}){var n;let o=t.documentElement;e=((n=t.defaultView)!=null?n:window).innerWidth-o.clientWidth},after({doc:t,d:n}){let o=t.documentElement,l=o.clientWidth-o.offsetWidth,a=e-l;n.style(o,"paddingRight",`${a}px`)}}}function Xl(){if(!Fl())return{};let e;return{before(){e=window.pageYOffset},after({doc:t,d:n,meta:o}){function l(r){return o.containers.flatMap(i=>i()).some(i=>i.contains(r))}if(window.getComputedStyle(t.documentElement).scrollBehavior!=="auto"){let r=Oe();r.style(t.documentElement,"scroll-behavior","auto"),n.add(()=>n.microTask(()=>r.dispose()))}n.style(t.body,"marginTop",`-${e}px`),window.scrollTo(0,0);let a=null;n.addEventListener(t,"click",r=>{if(r.target instanceof HTMLElement)try{let i=r.target.closest("a");if(!i)return;let{hash:c}=new URL(i.href),u=t.querySelector(c);u&&!l(u)&&(a=u)}catch{}},!0),n.addEventListener(t,"touchmove",r=>{r.target instanceof HTMLElement&&!l(r.target)&&r.preventDefault()},{passive:!1}),n.add(()=>{window.scrollTo(0,window.pageYOffset+e),a&&a.isConnected&&(a.scrollIntoView({block:"nearest"}),a=null)})}}}function ql(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function Jl(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let $e=zl(()=>new Map,{PUSH(e,t){var n;let o=(n=this.get(e))!=null?n:{doc:e,count:0,d:Oe(),meta:new Set};return o.count++,o.meta.add(t),this.set(e,o),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let o={doc:e,d:t,meta:Jl(n)},l=[Xl(),Yl(),ql()];l.forEach(({before:a})=>a==null?void 0:a(o)),l.forEach(({after:a})=>a==null?void 0:a(o))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});$e.subscribe(()=>{let e=$e.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let o=t.get(n.doc)==="hidden",l=n.count!==0;(l&&!o||!l&&o)&&$e.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&$e.dispatch("TEARDOWN",n)}});function Zl(e,t,n){let o=Wl($e),l=b(()=>{let a=e.value?o.value.get(e.value):void 0;return a?a.count>0:!1});return ye([e,t],([a,r],[i],c)=>{if(!a||!r)return;$e.dispatch("PUSH",a,n);let u=!1;c(()=>{u||($e.dispatch("POP",i??a,n),u=!0)})},{immediate:!0}),l}var Ql=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Ql||{});let Qe=Symbol("DialogContext");function st(e){let t=de(Qe,null);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,st),n}return t}let Ke="DC8F892D-2EBD-447C-A4C8-A03058436FF4",en=O({name:"Dialog",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},open:{type:[Boolean,String],default:Ke},initialFocus:{type:Object,default:null},id:{type:String,default:()=>`headlessui-dialog-${fe()}`}},emits:{close:e=>!0},setup(e,{emit:t,attrs:n,slots:o,expose:l}){var a;let r=w(!1);V(()=>{r.value=!0});let i=w(0),c=He(),u=b(()=>e.open===Ke&&c!==null?(c.value&G.Open)===G.Open:e.open),s=w(null),f=b(()=>bt(s));if(l({el:s,$el:s}),!(e.open!==Ke||c!==null))throw new Error("You forgot to provide an `open` prop to the `Dialog`.");if(typeof u.value!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${u.value===Ke?void 0:e.open}`);let v=b(()=>r.value&&u.value?0:1),d=b(()=>v.value===0),m=b(()=>i.value>1),p=de(Qe,null)!==null,[g,y]=rl(),{resolveContainers:k,mainTreeNodeRef:x,MainTreeNode:P}=sl({portals:g,defaultContainers:[b(()=>{var I;return(I=W.panelRef.value)!=null?I:s.value})]}),_=b(()=>m.value?"parent":"leaf"),T=b(()=>c!==null?(c.value&G.Closing)===G.Closing:!1),L=b(()=>p||T.value?!1:d.value),U=b(()=>{var I,N,ee;return(ee=Array.from((N=(I=f.value)==null?void 0:I.querySelectorAll("body > *"))!=null?N:[]).find(se=>se.id==="headlessui-portal-root"?!1:se.contains($(x))&&se instanceof HTMLElement))!=null?ee:null});mt(U,L);let J=b(()=>m.value?!0:d.value),be=b(()=>{var I,N,ee;return(ee=Array.from((N=(I=f.value)==null?void 0:I.querySelectorAll("[data-headlessui-portal]"))!=null?N:[]).find(se=>se.contains($(x))&&se instanceof HTMLElement))!=null?ee:null});mt(be,J),Hl({type:"Dialog",enabled:b(()=>v.value===0),element:s,onUpdate:(I,N)=>{if(N==="Dialog")return Y(I,{[Ze.Add]:()=>i.value+=1,[Ze.Remove]:()=>i.value-=1})}});let ie=ul({name:"DialogDescription",slot:b(()=>({open:u.value}))}),we=w(null),W={titleId:we,panelRef:w(null),dialogState:v,setTitleId(I){we.value!==I&&(we.value=I)},close(){t("close",!1)}};te(Qe,W);let xe=b(()=>!(!d.value||m.value));lt(k,(I,N)=>{W.close(),j(()=>N==null?void 0:N.focus())},xe);let re=b(()=>!(m.value||v.value!==0));wt((a=f.value)==null?void 0:a.defaultView,"keydown",I=>{re.value&&(I.defaultPrevented||I.key===A.Escape&&(I.preventDefault(),I.stopPropagation(),W.close()))});let me=b(()=>!(T.value||v.value!==0||p));return Zl(f,me,I=>{var N;return{containers:[...(N=I.containers)!=null?N:[],k]}}),pe(I=>{if(v.value!==0)return;let N=$(s);if(!N)return;let ee=new ResizeObserver(se=>{for(let Me of se){let ge=Me.target.getBoundingClientRect();ge.x===0&&ge.y===0&&ge.width===0&&ge.height===0&&W.close()}});ee.observe(N),I(()=>ee.disconnect())}),()=>{let{id:I,open:N,initialFocus:ee,...se}=e,Me={...n,ref:s,id:I,role:"dialog","aria-modal":v.value===0?!0:void 0,"aria-labelledby":we.value,"aria-describedby":ie.value},ge={open:v.value===0};return z(vt,{force:!0},()=>[z(cl,()=>z(dl,{target:s.value},()=>z(vt,{force:!1},()=>z(Ae,{initialFocus:ee,containers:k,features:d.value?Y(_.value,{parent:Ae.features.RestoreFocus,leaf:Ae.features.All&~Ae.features.FocusLock}):Ae.features.None},()=>z(y,{},()=>q({ourProps:Me,theirProps:{...se,...n},slot:ge,attrs:n,slots:o,visible:v.value===0,features:Ce.RenderStrategy|Ce.Static,name:"Dialog"})))))),z(P)])}}}),tn=O({name:"DialogPanel",props:{as:{type:[Object,String],default:"div"},id:{type:String,default:()=>`headlessui-dialog-panel-${fe()}`}},setup(e,{attrs:t,slots:n,expose:o}){let l=st("DialogPanel");o({el:l.panelRef,$el:l.panelRef});function a(r){r.stopPropagation()}return()=>{let{id:r,...i}=e,c={id:r,ref:l.panelRef,onClick:a};return q({ourProps:c,theirProps:i,slot:{open:l.dialogState.value===0},attrs:t,slots:n,name:"DialogPanel"})}}}),ln=O({name:"DialogTitle",props:{as:{type:[Object,String],default:"h2"},id:{type:String,default:()=>`headlessui-dialog-title-${fe()}`}},setup(e,{attrs:t,slots:n}){let o=st("DialogTitle");return V(()=>{o.setTitleId(e.id),le(()=>o.setTitleId(null))}),()=>{let{id:l,...a}=e;return q({ourProps:{id:l},theirProps:a,slot:{open:o.dialogState.value===0},attrs:t,slots:n,name:"DialogTitle"})}}}),gt=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function ht(e){var t,n;let o=(t=e.innerText)!=null?t:"",l=e.cloneNode(!0);if(!(l instanceof HTMLElement))return o;let a=!1;for(let i of l.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))i.remove(),a=!0;let r=a?(n=l.innerText)!=null?n:"":o;return gt.test(r)&&(r=r.replace(gt,"")),r}function nn(e){let t=e.getAttribute("aria-label");if(typeof t=="string")return t.trim();let n=e.getAttribute("aria-labelledby");if(n){let o=n.split(" ").map(l=>{let a=document.getElementById(l);if(a){let r=a.getAttribute("aria-label");return typeof r=="string"?r.trim():ht(a).trim()}return null}).filter(Boolean);if(o.length>0)return o.join(", ")}return ht(e).trim()}function jt(e){let t=w(""),n=w("");return()=>{let o=$(e);if(!o)return"";let l=o.innerText;if(t.value===l)return n.value;let a=nn(o).trim().toLowerCase();return t.value=l,n.value=a,a}}function on(e,t){return e===t}var an=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(an||{}),rn=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(rn||{}),sn=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(sn||{});function un(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let Vt=Symbol("ListboxContext");function We(e){let t=de(Vt,null);if(t===null){let n=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,We),n}return t}let cn=O({name:"Listbox",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>on},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:t,attrs:n,emit:o}){let l=w(1),a=w(null),r=w(null),i=w(null),c=w([]),u=w(""),s=w(null),f=w(1);function v(x=P=>P){let P=s.value!==null?c.value[s.value]:null,_=$t(x(c.value.slice()),L=>$(L.dataRef.domRef)),T=P?_.indexOf(P):null;return T===-1&&(T=null),{options:_,activeOptionIndex:T}}let d=b(()=>e.multiple?1:0),[m,p]=xt(b(()=>e.modelValue),x=>o("update:modelValue",x),b(()=>e.defaultValue)),g=b(()=>m.value===void 0?Y(d.value,{1:[],0:void 0}):m.value),y={listboxState:l,value:g,mode:d,compare(x,P){if(typeof e.by=="string"){let _=e.by;return(x==null?void 0:x[_])===(P==null?void 0:P[_])}return e.by(x,P)},orientation:b(()=>e.horizontal?"horizontal":"vertical"),labelRef:a,buttonRef:r,optionsRef:i,disabled:b(()=>e.disabled),options:c,searchQuery:u,activeOptionIndex:s,activationTrigger:f,closeListbox(){e.disabled||l.value!==1&&(l.value=1,s.value=null)},openListbox(){e.disabled||l.value!==0&&(l.value=0)},goToOption(x,P,_){if(e.disabled||l.value===1)return;let T=v(),L=Bt(x===M.Specific?{focus:M.Specific,id:P}:{focus:x},{resolveItems:()=>T.options,resolveActiveIndex:()=>T.activeOptionIndex,resolveId:U=>U.id,resolveDisabled:U=>U.dataRef.disabled});u.value="",s.value=L,f.value=_??1,c.value=T.options},search(x){if(e.disabled||l.value===1)return;let P=u.value!==""?0:1;u.value+=x.toLowerCase();let _=(s.value!==null?c.value.slice(s.value+P).concat(c.value.slice(0,s.value+P)):c.value).find(L=>L.dataRef.textValue.startsWith(u.value)&&!L.dataRef.disabled),T=_?c.value.indexOf(_):-1;T===-1||T===s.value||(s.value=T,f.value=1)},clearSearch(){e.disabled||l.value!==1&&u.value!==""&&(u.value="")},registerOption(x,P){let _=v(T=>[...T,{id:x,dataRef:P}]);c.value=_.options,s.value=_.activeOptionIndex},unregisterOption(x){let P=v(_=>{let T=_.findIndex(L=>L.id===x);return T!==-1&&_.splice(T,1),_});c.value=P.options,s.value=P.activeOptionIndex,f.value=1},theirOnChange(x){e.disabled||p(x)},select(x){e.disabled||p(Y(d.value,{0:()=>x,1:()=>{let P=oe(y.value.value).slice(),_=oe(x),T=P.findIndex(L=>y.compare(_,oe(L)));return T===-1?P.push(_):P.splice(T,1),P}}))}};lt([r,i],(x,P)=>{var _;y.closeListbox(),kt(P,St.Loose)||(x.preventDefault(),(_=$(r))==null||_.focus())},b(()=>l.value===0)),te(Vt,y),nt(b(()=>Y(l.value,{0:G.Open,1:G.Closed})));let k=b(()=>{var x;return(x=$(r))==null?void 0:x.closest("form")});return V(()=>{ye([k],()=>{if(!k.value||e.defaultValue===void 0)return;function x(){y.theirOnChange(e.defaultValue)}return k.value.addEventListener("reset",x),()=>{var P;(P=k.value)==null||P.removeEventListener("reset",x)}},{immediate:!0})}),()=>{let{name:x,modelValue:P,disabled:_,form:T,...L}=e,U={open:l.value===0,disabled:_,value:g.value};return z(H,[...x!=null&&g.value!=null?fl({[x]:g.value}).map(([J,be])=>z(Ne,Pt({features:Ge.Hidden,key:J,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:T,name:J,value:be}))):[],q({ourProps:{},theirProps:{...n,...ot(L,["defaultValue","onUpdate:modelValue","horizontal","multiple","by"])},slot:U,slots:t,attrs:n,name:"Listbox"})])}}}),dn=O({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-listbox-button-${fe()}`}},setup(e,{attrs:t,slots:n,expose:o}){let l=We("ListboxButton");o({el:l.buttonRef,$el:l.buttonRef});function a(u){switch(u.key){case A.Space:case A.Enter:case A.ArrowDown:u.preventDefault(),l.openListbox(),j(()=>{var s;(s=$(l.optionsRef))==null||s.focus({preventScroll:!0}),l.value.value||l.goToOption(M.First)});break;case A.ArrowUp:u.preventDefault(),l.openListbox(),j(()=>{var s;(s=$(l.optionsRef))==null||s.focus({preventScroll:!0}),l.value.value||l.goToOption(M.Last)});break}}function r(u){switch(u.key){case A.Space:u.preventDefault();break}}function i(u){l.disabled.value||(l.listboxState.value===0?(l.closeListbox(),j(()=>{var s;return(s=$(l.buttonRef))==null?void 0:s.focus({preventScroll:!0})})):(u.preventDefault(),l.openListbox(),un(()=>{var s;return(s=$(l.optionsRef))==null?void 0:s.focus({preventScroll:!0})})))}let c=at(b(()=>({as:e.as,type:t.type})),l.buttonRef);return()=>{var u,s;let f={open:l.listboxState.value===0,disabled:l.disabled.value,value:l.value.value},{id:v,...d}=e,m={ref:l.buttonRef,id:v,type:c.value,"aria-haspopup":"listbox","aria-controls":(u=$(l.optionsRef))==null?void 0:u.id,"aria-expanded":l.listboxState.value===0,"aria-labelledby":l.labelRef.value?[(s=$(l.labelRef))==null?void 0:s.id,v].join(" "):void 0,disabled:l.disabled.value===!0?!0:void 0,onKeydown:a,onKeyup:r,onClick:i};return q({ourProps:m,theirProps:d,slot:f,attrs:t,slots:n,name:"ListboxButton"})}}}),fn=O({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-listbox-options-${fe()}`}},setup(e,{attrs:t,slots:n,expose:o}){let l=We("ListboxOptions"),a=w(null);o({el:l.optionsRef,$el:l.optionsRef});function r(u){switch(a.value&&clearTimeout(a.value),u.key){case A.Space:if(l.searchQuery.value!=="")return u.preventDefault(),u.stopPropagation(),l.search(u.key);case A.Enter:if(u.preventDefault(),u.stopPropagation(),l.activeOptionIndex.value!==null){let s=l.options.value[l.activeOptionIndex.value];l.select(s.dataRef.value)}l.mode.value===0&&(l.closeListbox(),j(()=>{var s;return(s=$(l.buttonRef))==null?void 0:s.focus({preventScroll:!0})}));break;case Y(l.orientation.value,{vertical:A.ArrowDown,horizontal:A.ArrowRight}):return u.preventDefault(),u.stopPropagation(),l.goToOption(M.Next);case Y(l.orientation.value,{vertical:A.ArrowUp,horizontal:A.ArrowLeft}):return u.preventDefault(),u.stopPropagation(),l.goToOption(M.Previous);case A.Home:case A.PageUp:return u.preventDefault(),u.stopPropagation(),l.goToOption(M.First);case A.End:case A.PageDown:return u.preventDefault(),u.stopPropagation(),l.goToOption(M.Last);case A.Escape:u.preventDefault(),u.stopPropagation(),l.closeListbox(),j(()=>{var s;return(s=$(l.buttonRef))==null?void 0:s.focus({preventScroll:!0})});break;case A.Tab:u.preventDefault(),u.stopPropagation();break;default:u.key.length===1&&(l.search(u.key),a.value=setTimeout(()=>l.clearSearch(),350));break}}let i=He(),c=b(()=>i!==null?(i.value&G.Open)===G.Open:l.listboxState.value===0);return()=>{var u,s,f,v;let d={open:l.listboxState.value===0},{id:m,...p}=e,g={"aria-activedescendant":l.activeOptionIndex.value===null||(u=l.options.value[l.activeOptionIndex.value])==null?void 0:u.id,"aria-multiselectable":l.mode.value===1?!0:void 0,"aria-labelledby":(v=(s=$(l.labelRef))==null?void 0:s.id)!=null?v:(f=$(l.buttonRef))==null?void 0:f.id,"aria-orientation":l.orientation.value,id:m,onKeydown:r,role:"listbox",tabIndex:0,ref:l.optionsRef};return q({ourProps:g,theirProps:p,slot:d,attrs:t,slots:n,features:Ce.RenderStrategy|Ce.Static,visible:c.value,name:"ListboxOptions"})}}}),vn=O({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-listbox.option-${fe()}`}},setup(e,{slots:t,attrs:n,expose:o}){let l=We("ListboxOption"),a=w(null);o({el:a,$el:a});let r=b(()=>l.activeOptionIndex.value!==null?l.options.value[l.activeOptionIndex.value].id===e.id:!1),i=b(()=>Y(l.mode.value,{0:()=>l.compare(oe(l.value.value),oe(e.value)),1:()=>oe(l.value.value).some(y=>l.compare(oe(y),oe(e.value)))})),c=b(()=>Y(l.mode.value,{1:()=>{var y;let k=oe(l.value.value);return((y=l.options.value.find(x=>k.some(P=>l.compare(oe(P),oe(x.dataRef.value)))))==null?void 0:y.id)===e.id},0:()=>i.value})),u=jt(a),s=b(()=>({disabled:e.disabled,value:e.value,get textValue(){return u()},domRef:a}));V(()=>l.registerOption(e.id,s)),le(()=>l.unregisterOption(e.id)),V(()=>{ye([l.listboxState,i],()=>{l.listboxState.value===0&&i.value&&Y(l.mode.value,{1:()=>{c.value&&l.goToOption(M.Specific,e.id)},0:()=>{l.goToOption(M.Specific,e.id)}})},{immediate:!0})}),pe(()=>{l.listboxState.value===0&&r.value&&l.activationTrigger.value!==0&&j(()=>{var y,k;return(k=(y=$(a))==null?void 0:y.scrollIntoView)==null?void 0:k.call(y,{block:"nearest"})})});function f(y){if(e.disabled)return y.preventDefault();l.select(e.value),l.mode.value===0&&(l.closeListbox(),j(()=>{var k;return(k=$(l.buttonRef))==null?void 0:k.focus({preventScroll:!0})}))}function v(){if(e.disabled)return l.goToOption(M.Nothing);l.goToOption(M.Specific,e.id)}let d=Ot();function m(y){d.update(y)}function p(y){d.wasMoved(y)&&(e.disabled||r.value||l.goToOption(M.Specific,e.id,0))}function g(y){d.wasMoved(y)&&(e.disabled||r.value&&l.goToOption(M.Nothing))}return()=>{let{disabled:y}=e,k={active:r.value,selected:i.value,disabled:y},{id:x,value:P,disabled:_,...T}=e,L={id:x,ref:a,role:"option",tabIndex:y===!0?void 0:-1,"aria-disabled":y===!0?!0:void 0,"aria-selected":i.value,disabled:void 0,onClick:f,onFocus:v,onPointerenter:m,onMouseenter:m,onPointermove:p,onMousemove:p,onPointerleave:g,onMouseleave:g};return q({ourProps:L,theirProps:T,slot:k,attrs:n,slots:t,name:"ListboxOption"})}}});var pn=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(pn||{}),mn=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(mn||{});function gn(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let Nt=Symbol("MenuContext");function ze(e){let t=de(Nt,null);if(t===null){let n=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,ze),n}return t}let hn=O({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(e,{slots:t,attrs:n}){let o=w(1),l=w(null),a=w(null),r=w([]),i=w(""),c=w(null),u=w(1);function s(v=d=>d){let d=c.value!==null?r.value[c.value]:null,m=$t(v(r.value.slice()),g=>$(g.dataRef.domRef)),p=d?m.indexOf(d):null;return p===-1&&(p=null),{items:m,activeItemIndex:p}}let f={menuState:o,buttonRef:l,itemsRef:a,items:r,searchQuery:i,activeItemIndex:c,activationTrigger:u,closeMenu:()=>{o.value=1,c.value=null},openMenu:()=>o.value=0,goToItem(v,d,m){let p=s(),g=Bt(v===M.Specific?{focus:M.Specific,id:d}:{focus:v},{resolveItems:()=>p.items,resolveActiveIndex:()=>p.activeItemIndex,resolveId:y=>y.id,resolveDisabled:y=>y.dataRef.disabled});i.value="",c.value=g,u.value=m??1,r.value=p.items},search(v){let d=i.value!==""?0:1;i.value+=v.toLowerCase();let m=(c.value!==null?r.value.slice(c.value+d).concat(r.value.slice(0,c.value+d)):r.value).find(g=>g.dataRef.textValue.startsWith(i.value)&&!g.dataRef.disabled),p=m?r.value.indexOf(m):-1;p===-1||p===c.value||(c.value=p,u.value=1)},clearSearch(){i.value=""},registerItem(v,d){let m=s(p=>[...p,{id:v,dataRef:d}]);r.value=m.items,c.value=m.activeItemIndex,u.value=1},unregisterItem(v){let d=s(m=>{let p=m.findIndex(g=>g.id===v);return p!==-1&&m.splice(p,1),m});r.value=d.items,c.value=d.activeItemIndex,u.value=1}};return lt([l,a],(v,d)=>{var m;f.closeMenu(),kt(d,St.Loose)||(v.preventDefault(),(m=$(l))==null||m.focus())},b(()=>o.value===0)),te(Nt,f),nt(b(()=>Y(o.value,{0:G.Open,1:G.Closed}))),()=>{let v={open:o.value===0,close:f.closeMenu};return q({ourProps:{},theirProps:e,slot:v,slots:t,attrs:n,name:"Menu"})}}}),yn=O({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-menu-button-${fe()}`}},setup(e,{attrs:t,slots:n,expose:o}){let l=ze("MenuButton");o({el:l.buttonRef,$el:l.buttonRef});function a(u){switch(u.key){case A.Space:case A.Enter:case A.ArrowDown:u.preventDefault(),u.stopPropagation(),l.openMenu(),j(()=>{var s;(s=$(l.itemsRef))==null||s.focus({preventScroll:!0}),l.goToItem(M.First)});break;case A.ArrowUp:u.preventDefault(),u.stopPropagation(),l.openMenu(),j(()=>{var s;(s=$(l.itemsRef))==null||s.focus({preventScroll:!0}),l.goToItem(M.Last)});break}}function r(u){switch(u.key){case A.Space:u.preventDefault();break}}function i(u){e.disabled||(l.menuState.value===0?(l.closeMenu(),j(()=>{var s;return(s=$(l.buttonRef))==null?void 0:s.focus({preventScroll:!0})})):(u.preventDefault(),l.openMenu(),gn(()=>{var s;return(s=$(l.itemsRef))==null?void 0:s.focus({preventScroll:!0})})))}let c=at(b(()=>({as:e.as,type:t.type})),l.buttonRef);return()=>{var u;let s={open:l.menuState.value===0},{id:f,...v}=e,d={ref:l.buttonRef,id:f,type:c.value,"aria-haspopup":"menu","aria-controls":(u=$(l.itemsRef))==null?void 0:u.id,"aria-expanded":l.menuState.value===0,onKeydown:a,onKeyup:r,onClick:i};return q({ourProps:d,theirProps:v,slot:s,attrs:t,slots:n,name:"MenuButton"})}}}),bn=O({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-menu-items-${fe()}`}},setup(e,{attrs:t,slots:n,expose:o}){let l=ze("MenuItems"),a=w(null);o({el:l.itemsRef,$el:l.itemsRef}),vl({container:b(()=>$(l.itemsRef)),enabled:b(()=>l.menuState.value===0),accept(s){return s.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:s.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(s){s.setAttribute("role","none")}});function r(s){var f;switch(a.value&&clearTimeout(a.value),s.key){case A.Space:if(l.searchQuery.value!=="")return s.preventDefault(),s.stopPropagation(),l.search(s.key);case A.Enter:if(s.preventDefault(),s.stopPropagation(),l.activeItemIndex.value!==null){let v=l.items.value[l.activeItemIndex.value];(f=$(v.dataRef.domRef))==null||f.click()}l.closeMenu(),_t($(l.buttonRef));break;case A.ArrowDown:return s.preventDefault(),s.stopPropagation(),l.goToItem(M.Next);case A.ArrowUp:return s.preventDefault(),s.stopPropagation(),l.goToItem(M.Previous);case A.Home:case A.PageUp:return s.preventDefault(),s.stopPropagation(),l.goToItem(M.First);case A.End:case A.PageDown:return s.preventDefault(),s.stopPropagation(),l.goToItem(M.Last);case A.Escape:s.preventDefault(),s.stopPropagation(),l.closeMenu(),j(()=>{var v;return(v=$(l.buttonRef))==null?void 0:v.focus({preventScroll:!0})});break;case A.Tab:s.preventDefault(),s.stopPropagation(),l.closeMenu(),j(()=>pl($(l.buttonRef),s.shiftKey?he.Previous:he.Next));break;default:s.key.length===1&&(l.search(s.key),a.value=setTimeout(()=>l.clearSearch(),350));break}}function i(s){switch(s.key){case A.Space:s.preventDefault();break}}let c=He(),u=b(()=>c!==null?(c.value&G.Open)===G.Open:l.menuState.value===0);return()=>{var s,f;let v={open:l.menuState.value===0},{id:d,...m}=e,p={"aria-activedescendant":l.activeItemIndex.value===null||(s=l.items.value[l.activeItemIndex.value])==null?void 0:s.id,"aria-labelledby":(f=$(l.buttonRef))==null?void 0:f.id,id:d,onKeydown:r,onKeyup:i,role:"menu",tabIndex:0,ref:l.itemsRef};return q({ourProps:p,theirProps:m,slot:v,attrs:t,slots:n,features:Ce.RenderStrategy|Ce.Static,visible:u.value,name:"MenuItems"})}}}),wn=O({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-menu-item-${fe()}`}},setup(e,{slots:t,attrs:n,expose:o}){let l=ze("MenuItem"),a=w(null);o({el:a,$el:a});let r=b(()=>l.activeItemIndex.value!==null?l.items.value[l.activeItemIndex.value].id===e.id:!1),i=jt(a),c=b(()=>({disabled:e.disabled,get textValue(){return i()},domRef:a}));V(()=>l.registerItem(e.id,c)),le(()=>l.unregisterItem(e.id)),pe(()=>{l.menuState.value===0&&r.value&&l.activationTrigger.value!==0&&j(()=>{var p,g;return(g=(p=$(a))==null?void 0:p.scrollIntoView)==null?void 0:g.call(p,{block:"nearest"})})});function u(p){if(e.disabled)return p.preventDefault();l.closeMenu(),_t($(l.buttonRef))}function s(){if(e.disabled)return l.goToItem(M.Nothing);l.goToItem(M.Specific,e.id)}let f=Ot();function v(p){f.update(p)}function d(p){f.wasMoved(p)&&(e.disabled||r.value||l.goToItem(M.Specific,e.id,0))}function m(p){f.wasMoved(p)&&(e.disabled||r.value&&l.goToItem(M.Nothing))}return()=>{let{disabled:p}=e,g={active:r.value,disabled:p,close:l.closeMenu},{id:y,...k}=e;return q({ourProps:{id:y,ref:a,role:"menuitem",tabIndex:p===!0?void 0:-1,"aria-disabled":p===!0?!0:void 0,disabled:void 0,onClick:u,onFocus:s,onPointerenter:v,onMouseenter:v,onPointermove:d,onMousemove:d,onPointerleave:m,onMouseleave:m},theirProps:{...n,...k},slot:g,attrs:n,slots:t,name:"MenuItem"})}}}),xn=Symbol("GroupContext"),kn=O({name:"Switch",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"button"},modelValue:{type:Boolean,default:void 0},defaultChecked:{type:Boolean,optional:!0},form:{type:String,optional:!0},name:{type:String,optional:!0},value:{type:String,optional:!0},id:{type:String,default:()=>`headlessui-switch-${fe()}`}},inheritAttrs:!1,setup(e,{emit:t,attrs:n,slots:o,expose:l}){let a=de(xn,null),[r,i]=xt(b(()=>e.modelValue),g=>t("update:modelValue",g),b(()=>e.defaultChecked));function c(){i(!r.value)}let u=w(null),s=a===null?u:a.switchRef,f=at(b(()=>({as:e.as,type:n.type})),s);l({el:s,$el:s});function v(g){g.preventDefault(),c()}function d(g){g.key===A.Space?(g.preventDefault(),c()):g.key===A.Enter&&ml(g.currentTarget)}function m(g){g.preventDefault()}let p=b(()=>{var g,y;return(y=(g=$(s))==null?void 0:g.closest)==null?void 0:y.call(g,"form")});return V(()=>{ye([p],()=>{if(!p.value||e.defaultChecked===void 0)return;function g(){i(e.defaultChecked)}return p.value.addEventListener("reset",g),()=>{var y;(y=p.value)==null||y.removeEventListener("reset",g)}},{immediate:!0})}),()=>{let{id:g,name:y,value:k,form:x,...P}=e,_={checked:r.value},T={id:g,ref:s,role:"switch",type:f.value,tabIndex:0,"aria-checked":r.value,"aria-labelledby":a==null?void 0:a.labelledby.value,"aria-describedby":a==null?void 0:a.describedby.value,onClick:v,onKeyup:d,onKeypress:m};return z(H,[y!=null&&r.value!=null?z(Ne,Pt({features:Ge.Hidden,as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:r.value,form:x,name:y,value:k})):null,q({ourProps:T,theirProps:{...n,...ot(P,["modelValue","defaultChecked"])},slot:_,attrs:n,slots:o,name:"Switch"})])}}});function Sn(e){let t={called:!1};return(...n)=>{if(!t.called)return t.called=!0,e(...n)}}function qe(e,...t){e&&t.length>0&&e.classList.add(...t)}function je(e,...t){e&&t.length>0&&e.classList.remove(...t)}var et=(e=>(e.Finished="finished",e.Cancelled="cancelled",e))(et||{});function Pn(e,t){let n=Oe();if(!e)return n.dispose;let{transitionDuration:o,transitionDelay:l}=getComputedStyle(e),[a,r]=[o,l].map(i=>{let[c=0]=i.split(",").filter(Boolean).map(u=>u.includes("ms")?parseFloat(u):parseFloat(u)*1e3).sort((u,s)=>s-u);return c});return a!==0?n.setTimeout(()=>t("finished"),a+r):t("finished"),n.add(()=>t("cancelled")),n.dispose}function yt(e,t,n,o,l,a){let r=Oe(),i=a!==void 0?Sn(a):()=>{};return je(e,...l),qe(e,...t,...n),r.nextFrame(()=>{je(e,...n),qe(e,...o),r.add(Pn(e,c=>(je(e,...o,...t),qe(e,...l),i(c))))}),r.add(()=>je(e,...t,...n,...o,...l)),r.add(()=>i("cancelled")),r.dispose}function ke(e=""){return e.split(" ").filter(t=>t.trim().length>1)}let ut=Symbol("TransitionContext");var $n=(e=>(e.Visible="visible",e.Hidden="hidden",e))($n||{});function _n(){return de(ut,null)!==null}function Cn(){let e=de(ut,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}function Tn(){let e=de(ct,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}let ct=Symbol("NestingContext");function Ye(e){return"children"in e?Ye(e.children):e.value.filter(({state:t})=>t==="visible").length>0}function Gt(e){let t=w([]),n=w(!1);V(()=>n.value=!0),le(()=>n.value=!1);function o(a,r=Pe.Hidden){let i=t.value.findIndex(({id:c})=>c===a);i!==-1&&(Y(r,{[Pe.Unmount](){t.value.splice(i,1)},[Pe.Hidden](){t.value[i].state="hidden"}}),!Ye(t)&&n.value&&(e==null||e()))}function l(a){let r=t.value.find(({id:i})=>i===a);return r?r.state!=="visible"&&(r.state="visible"):t.value.push({id:a,state:"visible"}),()=>o(a,Pe.Unmount)}return{children:t,register:l,unregister:o}}let Ut=Ce.RenderStrategy,tt=O({props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:n,slots:o,expose:l}){let a=w(0);function r(){a.value|=G.Opening,t("beforeEnter")}function i(){a.value&=~G.Opening,t("afterEnter")}function c(){a.value|=G.Closing,t("beforeLeave")}function u(){a.value&=~G.Closing,t("afterLeave")}if(!_n()&&gl())return()=>z(Ht,{...e,onBeforeEnter:r,onAfterEnter:i,onBeforeLeave:c,onAfterLeave:u},o);let s=w(null),f=b(()=>e.unmount?Pe.Unmount:Pe.Hidden);l({el:s,$el:s});let{show:v,appear:d}=Cn(),{register:m,unregister:p}=Tn(),g=w(v.value?"visible":"hidden"),y={value:!0},k=fe(),x={value:!1},P=Gt(()=>{!x.value&&g.value!=="hidden"&&(g.value="hidden",p(k),u())});V(()=>{let W=m(k);le(W)}),pe(()=>{if(f.value===Pe.Hidden&&k){if(v.value&&g.value!=="visible"){g.value="visible";return}Y(g.value,{hidden:()=>p(k),visible:()=>m(k)})}});let _=ke(e.enter),T=ke(e.enterFrom),L=ke(e.enterTo),U=ke(e.entered),J=ke(e.leave),be=ke(e.leaveFrom),ie=ke(e.leaveTo);V(()=>{pe(()=>{if(g.value==="visible"){let W=$(s);if(W instanceof Comment&&W.data==="")throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}})});function we(W){let xe=y.value&&!d.value,re=$(s);!re||!(re instanceof HTMLElement)||xe||(x.value=!0,v.value&&r(),v.value||c(),W(v.value?yt(re,_,T,L,U,me=>{x.value=!1,me===et.Finished&&i()}):yt(re,J,be,ie,U,me=>{x.value=!1,me===et.Finished&&(Ye(P)||(g.value="hidden",p(k),u()))})))}return V(()=>{ye([v],(W,xe,re)=>{we(re),y.value=!1},{immediate:!0})}),te(ct,P),nt(b(()=>Y(g.value,{visible:G.Open,hidden:G.Closed})|a.value)),()=>{let{appear:W,show:xe,enter:re,enterFrom:me,enterTo:I,entered:N,leave:ee,leaveFrom:se,leaveTo:Me,...ge}=e,el={ref:s},tl={...ge,...d.value&&v.value&&hl.isServer?{class:ae([n.class,ge.class,..._,...T])}:{}};return q({theirProps:tl,ourProps:el,slot:{},slots:o,attrs:n,features:Ut,visible:g.value==="visible",name:"TransitionChild"})}}}),En=tt,Ht=O({inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:n,slots:o}){let l=He(),a=b(()=>e.show===null&&l!==null?(l.value&G.Open)===G.Open:e.show);pe(()=>{if(![!0,!1].includes(a.value))throw new Error('A <Transition /> is used but it is missing a `:show="true | false"` prop.')});let r=w(a.value?"visible":"hidden"),i=Gt(()=>{r.value="hidden"}),c=w(!0),u={show:a,appear:b(()=>e.appear||!c.value)};return V(()=>{pe(()=>{c.value=!1,a.value?r.value="visible":Ye(i)||(r.value="hidden")})}),te(ct,i),te(ut,u),()=>{let s=ot(e,["show","appear","unmount","onBeforeEnter","onBeforeLeave","onAfterEnter","onAfterLeave"]),f={unmount:e.unmount};return q({ourProps:{...f,as:"template"},theirProps:{},slot:{},slots:{...o,default:()=>[z(En,{onBeforeEnter:()=>t("beforeEnter"),onAfterEnter:()=>t("afterEnter"),onBeforeLeave:()=>t("beforeLeave"),onAfterLeave:()=>t("afterLeave"),...n,...f,...s},o.default)]},attrs:{},features:Ut,visible:r.value==="visible",name:"Transition"})}}});const Rn=e=>{let t=document.body;return e.appendTo&&(typeof e.appendTo=="string"&&(t=document.querySelector(e.appendTo)),e.appendTo instanceof HTMLElement&&(t=e.appendTo),t instanceof HTMLElement||(t=document.body)),t},An=(e,t,n,o=null)=>{const l=E(e,t);return l.appContext=o,Ct(l,n),Rn(t).appendChild(n),l},Ue=e=>{var a,r;const t=(a=Je())==null?void 0:a.appContext;if(t){const i=(r=Je())==null?void 0:r.provides;Reflect.set(t,"provides",{...t.provides,...i})}const n=document.createElement("div"),o=()=>{var i;Ct(null,n),(i=n.parentNode)==null||i.removeChild(n)},l=i=>{var s;if(Reflect.has(i,"visible")||(i.visible=!0),typeof i.onClose!="function")i.onClose=o;else{const f=i.onClose;i.onClose=()=>{f(),o()}}const c=An(e,i,n,t),u=(s=c.component)==null?void 0:s.proxy;for(const f in i)Reflect.has(i,f)&&!Reflect.has(u.$props,f)&&(u[f]=i[f]);return c};return l.close=o,l},K=(e,t)=>{const n=(t==null?void 0:t.target)??window,o=navigator.userAgent.toLowerCase().includes("mac");let l=!1,a=t==null?void 0:t.key;const r=()=>{const u=t??{},s=[];return u.ctrlKey&&s.push(o?"Cmd":"Ctrl"),u.shiftKey&&s.push(o?"Option":"Shift"),a&&s.push(a),s},c=yl(n,"keydown",u=>{u.stopPropagation();const s=t??{};if(!(l||!a)&&(a=typeof a=="string"?[a]:a,a.map(f=>f.toLowerCase()).includes(u.key.toLowerCase())&&Ln(s,u))){u.preventDefault();const f=e();if(typeof f!="function")return;const v=R(n)??window,d=m=>{m.preventDefault(),f(),v.removeEventListener("keyup",d)};v.addEventListener("keyup",d)}});return e.hotKey=r(),e.directions=(t==null?void 0:t.directions)??"",e.removeListener=c,e.pause=()=>l=!0,e.unpause=()=>l=!1,e},Ln=(e,t)=>{const n=e.ctrlKey??!1,o=e.shiftKey??!1;if(e.exact)return(n===t.metaKey||n===t.ctrlKey)&&o===t.shiftKey;const l=[];return l.push(n===t.metaKey||n===t.ctrlKey),l.push(o===t.shiftKey),l.every(a=>a)},Dn=(e,t,n)=>{bl(window,e,o=>{var a;const l=o.target;(a=t.value)!=null&&a.contains(l)||n()})},ue=(e,t)=>{const n=de(e,t);if(!n)throw new Error(`Could not resolve ${e.description}`);return n},Wt=(e,t)=>{const n=Je();return(n==null?void 0:n.provides[e])||de(e,t)},Bn=(e,t)=>{const n=Wt(e,t);if(!n)throw new Error(`Could not resolve ${e.description}`);return n},zt=Symbol("FORM_STATE"),Ie=Symbol("PictodeAppKey"),On=Symbol("PictodePluginKey"),dt=Symbol("PictodeSelectedKey"),Yt=Symbol("PictodePanelFormKey"),Re=Symbol("PictodeHotKeyListKey"),In=O({__name:"Container",props:{config:{},model:{},prop:{default:""},labelWidth:{},size:{default:"small"}},emits:["change"],setup(e,{emit:t}){const n=e,o=ue(zt),{config:l,prop:a,model:r}=Tt(n),i=b(()=>l.value.name??""),c=b(()=>{let f="";if(i.value)f=i.value;else return a.value;return`${a.value}${a.value?".":""}${f}`}),u=b(()=>{let{type:f}=l.value;return f==="form"?"":f==null?void 0:f.replace(/([A-Z])/g,"-$1").toLowerCase()}),s=async(f,v)=>{let d=v;try{typeof l.value.onChange=="function"&&(d=await l.value.onChange(o,d,{model:r.value,config:l.value,prop:f}))}catch(m){console.error(m)}Reflect.get(r.value,f)!==d&&(Reflect.set(r.value,f,d),t("change",r.value))};return(f,v)=>(S(),B("div",{class:ae([`${f.labelWidth}`=="0"||!R(l).label?"hidden":"","select-none","flex flex-col content-start gap-1 px-1 py-2"])},[h("label",{style:Et({width:`${f.labelWidth}px`}),class:"text-start text-sm text-gray-600 dark:text-gray-300"},F(f.$t(R(l).label??"")),5),(S(),X(wl(u.value),{key:R(l).name,class:ae(R(l).class),model:R(r),config:R(l),prop:c.value,onChange:s},null,40,["class","model","config","prop"]))],2))}}),Mn=["model","size"],Fn=O({__name:"Form",props:{model:{default:()=>({})},config:{default:()=>[]},labelWidth:{default:"200px"},disabled:{type:Boolean,default:!1},height:{default:"auto"},size:{default:"default"},inline:{type:Boolean,default:!1}},emits:["change","update:modelValue"],setup(e,{expose:t,emit:n}){const o=e,{config:l,model:a}=Tt(o),r=w(),i=w(a),c=xl({config:l.value,model:i.value}),u=()=>n("change",i.value),s=async()=>{var v;try{return await((v=r.value)==null?void 0:v.validate()),oe(i.value)}catch{throw new Error}},f=()=>{var v;return(v=r.value)==null?void 0:v.resetFields()};return te(zt,c),t({formModel:i,formState:c,resetForm:f,submitForm:s}),(v,d)=>(S(),B("form",{ref_key:"formRef",ref:r,model:i.value,size:v.size,onChange:u},[(S(!0),B(H,null,Q(o.config,(m,p)=>(S(),X(In,{key:p,config:m,model:i.value,onChange:u},null,8,["config","model"]))),128))],40,Mn))}}),Kn={class:"flex justify-center items-center"},jn=["name","title"],Vn={class:"cursor-pointer"},Z=O({__name:"Button",props:{icon:{},text:{}},setup(e){return(t,n)=>(S(),B("button",kl({type:"button"},t.$attrs),[Te(t.$slots,"default",{},()=>[h("label",Kn,[t.icon?(S(),B("iconpark-icon",{key:0,name:t.icon,title:t.$attrs.title,class:"cursor-pointer"},null,8,jn)):Ee("",!0),h("span",Vn,F(t.text),1)])])],16))}});function Nn(e,t){return S(),B("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[h("path",{"fill-rule":"evenodd",d:"M19.916 4.626a.75.75 0 01.208 1.04l-9 13.5a.75.75 0 01-1.154.114l-6-6a.75.75 0 011.06-1.06l5.353 5.353 8.493-12.739a.75.75 0 011.04-.208z","clip-rule":"evenodd"})])}function Xt(e,t){return S(),B("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[h("path",{"fill-rule":"evenodd",d:"M11.47 4.72a.75.75 0 011.06 0l3.75 3.75a.75.75 0 01-1.06 1.06L12 6.31 8.78 9.53a.75.75 0 01-1.06-1.06l3.75-3.75zm-3.75 9.75a.75.75 0 011.06 0L12 17.69l3.22-3.22a.75.75 0 111.06 1.06l-3.75 3.75a.75.75 0 01-1.06 0l-3.75-3.75a.75.75 0 010-1.06z","clip-rule":"evenodd"})])}const Gn={class:"relative mt-1"},Un={class:"relative w-full cursor-pointer rounded ring-1 ring-black ring-opacity-5 p-0.5 py-2 pl-3 pr-10 text-left focus:outline-none focus-visible:border-indigo-500 focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75 focus-visible:ring-offset-2 sm:text-sm"},Hn={class:"block truncate"},Wn={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},qt=O({__name:"Select",props:{modelValue:{}},emits:["update:modelValue","change"],setup(e,{emit:t}){const n=e,o=b({get(){return n.modelValue},set(l){l!==n.modelValue&&(t("update:modelValue",l),t("change",l))}});return(l,a)=>(S(),X(R(cn),{modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=r=>o.value=r)},{default:D(()=>[h("div",Gn,[E(R(dn),{class:"relative w-full"},{default:D(()=>[Te(l.$slots,"listbox",{selected:o.value},()=>[h("div",Un,[h("span",Hn,F(o.value),1),h("span",Wn,[E(R(Xt),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})])])])]),_:3}),E(it,{"leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:D(()=>[E(R(fn),null,{default:D(()=>[Te(l.$slots,"default")]),_:3})]),_:3})])]),_:3},8,["modelValue"]))}}),zn={key:0,class:"absolute inset-y-0 left-0 flex items-center pl-3 text-blue-400"},Jt=O({__name:"SelectOption",props:{value:{type:[String,Number,Boolean]},label:{type:[String,Number,Boolean]}},setup(e){return(t,n)=>(S(),X(R(vn),{value:t.value},{default:D(({active:o,selected:l})=>[Te(t.$slots,"default",{active:o,selected:l,item:t.value},()=>[h("li",{class:ae([o?"bg-gray-200 dark:bg-navyBlue-100":"","relative rounded-lg cursor-pointer select-none p-2 pl-10 text-gray-900 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-navyBlue-100"])},[h("span",{class:ae([l?"font-medium":"font-normal","block truncate"])},F(t.label),3),l?(S(),B("span",zn,[E(R(Nn),{class:"h-5 w-5","aria-hidden":"true"})])):Ee("",!0)],2)])]),_:3},8,["value"]))}});class Yn extends $l{constructor(n){super(n);C(this,"className","Iframe");C(this,"iframeElement",document.createElement("iframe"));this.iframeElement.src=n.src??"",this.iframeElement.style.border="none",this.iframeElement.style.width="100%",this.iframeElement.style.height="100%",this.iframeElement.style.display="block",this.iframeElement.style.margin="0",this.iframeElement.style.boxSizing="border-box",super.setContent(this.iframeElement)}_setAttr(n,o){n==="src"&&this.iframeElement?this.iframeElement.src=o:super._setAttr(n,o)}}const ne=(e=[])=>{function t(o){return o.charAt(0).toUpperCase()+o.slice(1)}function n(o){if(typeof o=="string")return t(o);if(Array.isArray(o))return o.map(l=>t(l)).join("/")}return Array.isArray(e)?e.map(o=>n(o)).join("+"):t(e)},Xn=(e=[])=>{function t(o){return o===" "?"Space":o.charAt(0).toUpperCase()+o.slice(1)}function n(o){if(typeof o=="string")return t(o);if(Array.isArray(o))return o.map(l=>t(l)).join(" / ")}return Array.isArray(e)?e.map(o=>n(o)):[t(e)]},qn=["onClick"],Jn={class:"w-full grid grid-cols-[1rem_1fr_1.5fr] gap-2 text-sm font-medium select-none"},Zn=["name"],Qn=O({__name:"ContextMenu",props:{visible:{type:Boolean},x:{},y:{},menuGroups:{default:()=>[]}},emits:["update:visible","close"],setup(e,{emit:t}){const n=e,o=w(null),l=b({get(){return n.visible},set(u){t("update:visible",u),u||t("close")}}),a=b(()=>{const u=Math.max(n.x-2,0),s=Math.max(n.y-2,0),f=12,v=224,d=n.menuGroups.flat().length*40,m=u+v-window.innerWidth+f,p=s+d-window.innerHeight+f;return{left:m>0?`${u-m}px`:`${u}px`,top:p>0?`${s-p}px`:`${s}px`}}),r=b(()=>n.menuGroups.filter(u=>u.length));Dn("mousedown",o,()=>{l.value=!1});const i=u=>{u.preventDefault()},c=u=>{var s;u.disable||((s=u.action)==null||s.call(u),l.value=!1)};return V(()=>{o.value&&o.value.addEventListener("contextmenu",i,!1)}),le(()=>{o.value&&o.value.removeEventListener("contextmenu",i,!1)}),(u,s)=>(S(),X(it,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"translate-y-1 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-1 opacity-0"},{default:D(()=>[l.value?(S(),B("div",{key:0,style:Et(a.value),class:"absolute w-screen max-w-sm transform"},[h("div",{ref_key:"popoverRef",ref:o,class:"absolute w-fit py-1 divide-y rounded-sm bg-gray-50 dark:bg-navyBlue-200 shadow-md ring-1 ring-gray-600 dark:ring-navyBlue-100 ring-opacity-5 focus:outline-none"},[(S(!0),B(H,null,Q(r.value,(f,v)=>(S(),B("div",{key:v,class:"py-1"},[(S(!0),B(H,null,Q(f,(d,m)=>(S(),B("div",{key:m,class:ae(["flex items-center py-2 px-4 transition duration-150 ease-in-out",[d.disable?"text-gray-300 dark:text-slate-500 cursor-default":"text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-navyBlue-100 cursor-pointer"]]),onClick:p=>c(d)},[h("div",Jn,[d.icon?(S(),B("iconpark-icon",{key:0,name:d.icon},null,8,Zn)):Ee("",!0),h("p",null,F(u.$t(d.label)),1),h("p",{class:ae([d.disable?"":"text-gray-400 dark:text-slate-400","text-end text-xs"])},F(d.hotKey),3)])],10,qn))),128))]))),128))],512)],4)):Ee("",!0)]),_:1}))}});const eo=(e,t)=>{const n=Ue(Qn),{moveDown:o,moveUp:l,moveBottom:a,moveTop:r,deleteNode:i,selectAll:c,resetStage:u,undo:s,redo:f,makeGroup:v,decomposeGroup:d}=Bn(Re),m=({event:p})=>{p.evt.preventDefault();let g=!1;const y=e.findTopGroup(p.target);if(p.target instanceof ce.Stage)g=!0;else if(!t.value.find(J=>J.id()===p.target.id()||J.id()===(y==null?void 0:y.id()))){const J=y??p.target;e.select(J)}const k=t.value.length&&!g?[{icon:"sent-to-back",label:o.directions,hotKey:ne(o.hotKey),action:o},{icon:"bring-to-front",label:l.directions,hotKey:ne(l.hotKey),action:l},{icon:"bring-to-front-one",label:a.directions,hotKey:ne(a.hotKey),action:a},{icon:"send-to-back",label:r.directions,hotKey:ne(r.hotKey),action:r}]:[],x=t.value.length>1&&!g?[{icon:"group",label:v.directions,hotKey:ne(v.hotKey),action:v}]:[],P=t.value.length===1&&t.value[0]instanceof ce.Group?[{icon:"ungroup",label:d.directions,hotKey:ne(d.hotKey),action:d}]:[],_=t.value.length&&!g?[{icon:"delete-one",label:i.directions,hotKey:ne(i.hotKey),action:i}]:[],T=g||t.value.length===0?[{icon:"full-selection",label:c.directions,hotKey:ne(c.hotKey),action:c},{icon:"clear",label:u.directions,hotKey:ne(u.hotKey),action:u}]:[],L=[{icon:"undo",label:s.directions,hotKey:ne(s.hotKey),disable:!e.canUndo(),action:s},{icon:"redo",label:f.directions,hotKey:ne(f.hotKey),disable:!e.canRedo(),action:f}],U=[T,k,x,P,L,_];n({x:p.evt.clientX,y:p.evt.clientY,menuGroups:U})};V(()=>e.on("mouse:contextmenu",m)),le(()=>e.off("mouse:contextmenu",m))},to=eo,lo=h("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),no={class:"fixed inset-0 overflow-y-auto"},oo={class:"flex min-h-full items-center justify-center p-4 text-center"},ft=O({__name:"Dialog",props:{visible:{type:Boolean}},emits:["update:visible","close"],setup(e,{emit:t}){const n=e,o=b({get(){return n.visible},set(a){t("update:visible",a),a||t("close")}});function l(){o.value=!1}return(a,r)=>(S(),X(R(Ht),{appear:"",show:o.value,as:"template"},{default:D(()=>[E(R(en),{as:"div",class:"relative z-10",onClose:l},{default:D(()=>[E(R(tt),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:D(()=>[lo]),_:1}),h("div",no,[h("div",oo,[E(R(tt),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:D(()=>[E(R(tn),{class:"rounded-lg bg-white dark:bg-navyBlue-200 p-4 text-left dark:text-gray-300 align-middle shadow-xl transition-all w-auto"},{default:D(()=>[E(R(ln),{class:"grid grid-cols-[1fr_2rem] py-2"},{default:D(()=>[h("div",null,[Te(a.$slots,"title")]),E(Z,{class:"hover:bg-none",icon:"close",onClick:l})]),_:3}),Te(a.$slots,"default")]),_:3})]),_:3})])])]),_:3})]),_:3},8,["show"]))}}),ao={as:"h3",class:"text-lg font-medium leading-6"},io={class:"flex flex-col"},ro={class:"mt-3"},so={class:"text-sm text-gray-500"},uo={class:"mt-4 flex flex-row justify-between"},co=O({__name:"MessageBox",props:{visible:{type:Boolean},title:{},message:{}},emits:["update:visible","close","submit"],setup(e,{emit:t}){const n=e,o=b({get(){return n.visible},set(r){t("update:visible",r),r||t("close")}}),l=()=>{o.value=!1},a=()=>{t("submit"),l()};return(r,i)=>(S(),X(ft,{visible:o.value,onClose:l},{title:D(()=>[h("div",ao,F(r.$t(r.title)),1)]),default:D(()=>[h("div",io,[h("div",ro,[h("p",so,F(r.$t(r.message)),1)]),h("div",uo,[E(Z,{class:"inline-flex justify-center rounded-md border border-transparent bg-red-400 px-4 py-2 text-sm font-medium text-red-50 hover:bg-red-500 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2",title:r.$t(""),text:r.$t(""),onClick:l},null,8,["title","text"]),E(Z,{class:"inline-flex justify-center rounded-md border border-transparent bg-blue-400 px-4 py-2 text-sm font-medium text-blue-50 hover:bg-blue-500 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",title:r.$t(""),text:r.$t(""),onClick:a},null,8,["title","text"])])])]),_:1},8,["visible"]))}}),fo=()=>{const e=w(!1),t=w();return{loading:e,error:t,execute:async(o=["*"],l=!1)=>{try{return e.value=!0,await Dt(o,l)}catch(a){throw(a instanceof _l||a instanceof Cl)&&(t.value=a),a}finally{e.value=!1}}}},vo=()=>{const e=w(!1),t=w(),{error:n,execute:o}=fo();return ye(()=>n.value,a=>{t.value=a}),{loading:e,error:t,execute:async(a=["*"])=>{try{e.value=!0;const r=await o(a)??[],i=new FileReader;return new Promise((c,u)=>{i.onload=({target:s})=>{c(s==null?void 0:s.result)},i.onerror=s=>{t.value=s,u(t.value)},i.readAsText(r[0])})}catch(r){t.value=r}finally{e.value=!1}}}},po=h("span",{class:"sr-only"},"Enable notifications",-1),mo=O({__name:"Switch",props:{modelValue:{type:Boolean}},emits:["change","update:modelValue"],setup(e,{emit:t}){const n=e,o=b({get(){return n.modelValue},set(l){l!==n.modelValue&&(t("update:modelValue",l),t("change",l))}});return(l,a)=>(S(),X(R(kn),{modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=r=>o.value=r),class:ae([o.value?"bg-blue-400":"bg-gray-200","relative inline-flex h-6 w-11 items-center rounded-full"])},{default:D(()=>[po,h("span",{class:ae([o.value?"translate-x-6":"translate-x-1","inline-block h-4 w-4 transform rounded-full bg-white transition"])},null,2)]),_:1},8,["modelValue","class"]))}});var Be=(e=>(e.HTML="text/html",e.CSS="text/css",e.JPEG="image/jpeg",e.PNG="image/png",e.GIF="image/gif",e.MPEG="audio/mpeg",e.OGG="audio/ogg",e.MP4="video/mp4",e.JSON="application/json",e.JAVASCRIPT="application/javascript",e.ECMASCRIPT="application/ecmascript",e.EXCEL="application/vnb.ms-excel",e.CSV="application/x-csv",e.ZIP="application/zip",e.TGZ="application/x-gtar",e.TAR_GZ="application/x-gzip",e.XML="text/xml",e.TEXT="text/plain",e.SVG="image/svg+xml",e))(Be||{});class go extends Tl{constructor(t,n){super(`${t} `,{cause:n.cause})}}const Zt=(e,t="file",n=Be.TEXT,o="utf-8",l=!1)=>{const a=w(!1),r=w();return{execute:async c=>{a.value=!0,typeof t=="function"&&(t=t(c));try{const u=await Promise.resolve(e(c)),s=document.createElement("a");if(l)s.href=u;else{const f=new Blob([u],{type:`${n};charset=${o}`});s.href=window.URL.createObjectURL(f)}s.download=t,s.click(),window.URL.revokeObjectURL(s.href)}catch(u){throw r.value=new go(t,u),r.value}finally{a.value=!1}},loading:a,error:r}},ho={class:"text-lg"},yo={class:"max-w-5xl min-w-fit flex flex-row justify-between transform overflow-hidden"},bo={class:"flex items-center h-96 w-96"},wo={class:"w-full h-full flex flex-grow justify-center bg-fixed rounded-md p-1",style:{"background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMUlEQVQ4T2NkYGAQYcAP3uCTZhw1gGGYhAGBZIA/nYDCgBDAm9BGDWAAJyRCgLaBCAAgXwixzAS0pgAAAABJRU5ErkJggg==)"}},xo=["src"],ko={class:"flex flex-col flex-wrap w-96 min-w-max gap-6 grow ml-6 antialiased p-2"},So={class:"flex flex-row justify-between items-center"},Po={class:"flex flex-row justify-between items-center"},$o={class:"flex flex-grow justify-around flex-wrap"},_o={class:"flex flex-row justify-between items-center"},Co={class:"relative w-full cursor-pointer rounded-lg ring-1 ring-slate-950 dark:ring-navyBlue-100 py-2 pl-2 pr-6 text-left focus:outline-none focus-visible:border-indigo-500 focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75 focus-visible:ring-offset-2 sm:text-sm"},To={class:"block truncate"},Eo={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},Ro={class:"absolute mt-3 max-h-60 w-fit rounded-lg bg-white dark:bg-navyBlue-200 py-1 text-base shadow-lg ring-1 ring-slate-950 dark:ring-navyBlue-100 focus:outline-none sm:text-sm"},Ao={class:"grow flex flex-col justify-end"},Lo=O({__name:"ExportImageDialog",props:{visible:{type:Boolean}},emits:["update:visible","close"],setup(e,{emit:t}){const n=e,o=ue(Ie),l=ue(dt),a=b({get(){return n.visible},set(p){t("update:visible",p),p||t("close")}}),r=[{label:"PNG",value:Be.PNG,format:"png"},{label:"JPEG",value:Be.JPEG,format:"jpeg"}],i=[1,2,3],c=w(!0),u=w(2),s=w(r[0].value),f=w(""),v=()=>{a.value=!1},d=async()=>{const{dataURL:p}=await o.toDataURL(l.value,{pixelRatio:u.value,mimeType:s.value,haveBackground:c.value});f.value=p},m=async()=>{const{execute:p}=Zt(()=>f.value,()=>{var g;return`Pictode-${new Date}.${(g=r.find(y=>y.value===s.value))==null?void 0:g.format}`},s.value,"utf-8",!0);await p(),a.value=!1};return V(()=>{j(()=>{d()})}),(p,g)=>(S(),X(ft,{visible:a.value,onClose:v},{title:D(()=>[h("div",ho,F(p.$t("")),1)]),default:D(()=>[h("div",yo,[h("div",bo,[h("div",wo,[h("img",{src:f.value,class:"object-contain max-w-full max-h-full"},null,8,xo)])]),h("div",ko,[h("div",So,[h("label",null,F(p.$t("")),1),E(mo,{modelValue:c.value,"onUpdate:modelValue":g[0]||(g[0]=y=>c.value=y),onChange:d},null,8,["modelValue"])]),h("div",Po,[h("label",null,F(p.$t("")),1),E(R(Rt),{modelValue:u.value,"onUpdate:modelValue":g[1]||(g[1]=y=>u.value=y),class:"rounded-lg ring-1 w-24 ring-slate-950 dark:ring-navyBlue-100 p-0.5",onChange:d},{default:D(()=>[h("div",$o,[(S(),B(H,null,Q(i,(y,k)=>E(R(At),{key:k,value:y,class:"font-mono text-xs"},{default:D(({checked:x})=>[h("div",{class:ae(["rounded-lg inline-flex items-center relative cursor-pointer select-none p-2",x?"bg-blue-500":"hover:bg-gray-200 dark:hover:bg-navyBlue-100"])},F(`${y}x`),3)]),_:2},1032,["value"])),64))])]),_:1},8,["modelValue"])]),h("div",_o,[h("label",null,F(p.$t("")),1),E(qt,{modelValue:s.value,"onUpdate:modelValue":g[2]||(g[2]=y=>s.value=y),class:"w-24",onChange:d},{listbox:D(()=>{var y;return[h("div",Co,[h("span",To,F((y=r.find(k=>k.value===s.value))==null?void 0:y.label),1),h("span",Eo,[E(R(Xt),{class:"h-3 w-3 text-gray-400","aria-hidden":"true"})])])]}),default:D(()=>[h("div",Ro,[(S(),B(H,null,Q(r,({label:y,value:k},x)=>E(Jt,{key:x,value:k,label:y,class:"p-1 w-24"},null,8,["value","label"])),64))])]),_:1},8,["modelValue"])]),h("div",Ao,[E(Z,{class:"inline-flex justify-center rounded-md border border-transparent px-4 py-2 text-sm font-medium bg-blue-400 text-blue-50",title:p.$t(""),text:p.$t(""),onClick:m},null,8,["title","text"])])])])]),_:1},8,["visible"]))}}),Do=(e,t,n)=>{const o=Wt(Re,null);if(o)return o;const l=Ue(co),a=Ue(Lo),{execute:r}=vo(),i={open:K(async()=>{const c=await r([".pictode"]);c&&t.fromJSON(c)},{key:"o",directions:"",exact:!0,ctrlKey:!0,target:e}),exportImg:K(()=>{a({})},{key:"e",directions:"",exact:!0,ctrlKey:!0,shiftKey:!0,target:e}),moveDown:K(()=>{t.moveDown(...n.value)},{key:"[",directions:"",exact:!0,ctrlKey:!0,target:e}),moveUp:K(()=>{t.moveUp(...n.value)},{key:"]",directions:"",exact:!0,ctrlKey:!0,target:e}),moveBottom:K(()=>{t.moveBottom(...n.value)},{key:"[",directions:"",exact:!0,ctrlKey:!0,shiftKey:!0,target:e}),moveTop:K(()=>{t.moveTop(...n.value)},{key:"]",directions:"",exact:!0,ctrlKey:!0,shiftKey:!0,target:e}),deleteNode:K(()=>{t.remove(...n.value)},{key:["delete","backspace"],directions:"",target:e}),selectAll:K(()=>{const c=t.isPluginEnable("selectorPlugin");t.triggerSelector(!0),t.selectAll(),t.triggerSelector(c)},{key:"a",directions:"",exact:!0,ctrlKey:!0,target:e}),resetStage:K(()=>{l({title:"",message:"",onSubmit:()=>{t.clear(),l.close()}})},{key:"r",directions:"",exact:!0,ctrlKey:!0,target:e}),undo:K(()=>{t.undo()},{key:"z",directions:"",exact:!0,ctrlKey:!0,target:e}),redo:K(()=>{t.redo()},{key:"y",directions:"",exact:!0,ctrlKey:!0,target:e}),stageDrag:K(()=>(t.triggerPanning(!0),()=>{t.triggerPanning(!1)}),{key:" ",directions:"",target:e}),mouseWheel:K(()=>(t.triggerMouseWheel(!0),()=>{t.triggerMouseWheel(!1)}),{key:["Control","Meta"],directions:"",target:e}),makeGroup:K(()=>{const c=t.makeGroup(n.value);Array.isArray(c)||t.select(c)},{key:"g",directions:"",ctrlKey:!0,shiftKey:!0,exact:!0,target:e}),decomposeGroup:K(()=>{const c=n.value[0];c instanceof ce.Group&&t.decomposeGroup(c)},{key:"j",directions:"",ctrlKey:!0,shiftKey:!0,exact:!0,target:e}),alignLeft:K(()=>{n.value.length<1||t.alignLeft(n.value)},{key:"a",directions:"",shiftKey:!0,target:e}),alignCenterX:K(()=>{n.value.length<1||t.alignCenterX(n.value)},{key:"h",directions:"",shiftKey:!0,target:e}),alignRight:K(()=>{n.value.length<1||t.alignRight(n.value)},{key:"d",directions:"",shiftKey:!0,target:e}),alignTop:K(()=>{n.value.length<1||t.alignTop(n.value)},{key:"w",directions:"",shiftKey:!0,target:e}),alignCenterY:K(()=>{n.value.length<1||t.alignCenterY(n.value)},{key:"v",directions:"",shiftKey:!0,target:e}),alignBottom:K(()=>{n.value.length<1||t.alignBottom(n.value)},{key:"s",directions:"",shiftKey:!0,target:e}),distributeX:K(()=>{n.value.length<2||t.dispersionX(n.value)},{key:"h",directions:"",ctrlKey:!0,shiftKey:!0,target:e}),distributeY:K(()=>{n.value.length<2||t.dispersionY(n.value)},{key:"v",directions:"",ctrlKey:!0,shiftKey:!0,target:e})};return te(Re,i),i},Bo=Do,Oo={bindTool:["ellipseTool"],bindShape:["Ellipse"],formConfig:[{name:"stroke",label:"",type:"Color"},{name:"fill",label:"",type:"Color"},{name:"strokeWidth",label:"",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:2,title:""},{label:"line-2",value:4,title:""},{label:"line-3",value:8,title:""}]},{name:"dash",label:"",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:[],title:""},{label:"dotted-line-2",value:[12,8],title:""},{label:"dotted-line-1",value:[6,4],title:""}]},{name:"opacity",label:"",type:"Slider"}],model:{stroke:"#000",fill:"#ffffff",strokeWidth:2,dash:[],opacity:1}},Io={bindTool:["iframeTool"],bindShape:["Iframe"],formConfig:[{name:"src",label:"",type:"Texts"},{name:"stroke",label:"",type:"Color"},{name:"strokeWidth",label:"",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:2,title:""},{label:"line-2",value:4,title:""},{label:"line-3",value:8,title:""}]},{name:"dash",label:"",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:[],title:""},{label:"dotted-line-2",value:[12,8],title:""},{label:"dotted-line-1",value:[6,4],title:""}]},{name:"opacity",label:"",type:"Slider"}],model:{src:"https://cn.vuejs.org/",stroke:"#000000",strokeWidth:2,dash:[],opacity:1}},Mo={bindTool:["imageTool"],bindShape:["Image"],formConfig:[{name:"stroke",label:"",type:"Color"},{name:"strokeWidth",label:"",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:2,title:""},{label:"line-2",value:4,title:""},{label:"line-3",value:8,title:""}]},{name:"dash",label:"",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:[],title:""},{label:"dotted-line-2",value:[12,8],title:""},{label:"dotted-line-1",value:[6,4],title:""}]},{name:"opacity",label:"",type:"Slider"}],model:{stroke:"#ffffff00",strokeWidth:2,dash:[],opacity:1}},Fo={bindTool:["lineTool","drawingTool"],bindShape:["Line"],formConfig:[{name:"stroke",label:"",type:"Color"},{name:"strokeWidth",label:"",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:2,title:""},{label:"line-2",value:4,title:""},{label:"line-3",value:8,title:""}]},{name:"tension",label:"",type:"RadioGroup",optionType:"icon",options:[{label:"node-flat",value:0,title:""},{label:"node-round",value:.4,title:""}]},{name:"dash",label:"",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:[],title:""},{label:"dotted-line-2",value:[12,8],title:""},{label:"dotted-line-1",value:[6,4],title:""}]},{name:"opacity",label:"",type:"Slider"}],model:{stroke:"#000000",strokeWidth:2,opacity:1,tension:.4,dash:[]}},Ko={bindTool:["rectTool"],bindShape:["Rect"],formConfig:[{name:"stroke",label:"",type:"Color"},{name:"fill",label:"",type:"Color"},{name:"strokeWidth",label:"",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:2,title:""},{label:"line-2",value:4,title:""},{label:"line-3",value:8,title:""}]},{name:"cornerRadius",label:"",type:"RadioGroup",optionType:"icon",options:[{label:"node-flat",value:0,title:""},{label:"node-round",value:20,title:""}]},{name:"dash",label:"",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:[],title:""},{label:"dotted-line-2",value:[12,8],title:""},{label:"dotted-line-1",value:[6,4],title:""}]},{name:"opacity",label:"",type:"Slider"}],model:{stroke:"#000000",fill:"#ffffff",strokeWidth:2,cornerRadius:20,dash:[],opacity:1}},jo={bindTool:["regularPolygonTool"],bindShape:["RegularPolygon"],formConfig:[{name:"stroke",label:"",type:"Color"},{name:"fill",label:"",type:"Color"},{name:"strokeWidth",label:"",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:2,title:""},{label:"line-2",value:4,title:""},{label:"line-3",value:8,title:""}]},{name:"dash",label:"",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:[],title:""},{label:"dotted-line-2",value:[12,8],title:""},{label:"dotted-line-1",value:[6,4],title:""}]},{name:"opacity",label:"",type:"Slider"}],model:{stroke:"#000000",fill:"#ffffff",strokeWidth:2,dash:[],opacity:1}},Vo={bindTool:["textTool"],bindShape:["Text"],formConfig:[{name:"fill",label:"",type:"Color"},{name:"fontSize",label:"",type:"RadioGroup",optionType:"text",options:[{label:"S",value:12,class:"w-[1rem] h-[1rem] flex items-center justify-center",title:"S"},{label:"M",value:16,class:"w-[1rem] h-[1rem] flex items-center justify-center",title:"M"},{label:"L",value:20,class:"w-[1rem] h-[1rem] flex items-center justify-center",title:"L"},{label:"XL",value:24,class:"w-[1rem] h-[1rem] flex items-center justify-center",title:"XL"}]},{name:"stroke",label:"",type:"Color"},{name:"strokeWidth",label:"",type:"Slider",min:0,max:2},{name:"opacity",label:"",type:"Slider"}],model:{stroke:"#000000",strokeWidth:0,fill:"#000000",fontSize:16,opacity:1}},Qt=[jo,Oo,Mo,Fo,Ko,Vo,Io],No=e=>Qt.find(({bindShape:t})=>t.includes(e)),Go=e=>Qt.find(({bindTool:t})=>t.includes(e)),Uo=()=>{const e=new El,t=new Rl({enabled:!0,stackSize:50}),n=new Al({enabled:!0,multipleSelect:!0}),o=new Ll({enabled:!0});e.use(t),e.use(n),e.use(o),e.on("mouse:down",({event:d})=>{d.evt.button===1&&e.triggerPanning(!0)}),e.on("mouse:up",({event:d})=>{d.evt.button===1&&e.triggerPanning(!1)});const l=w([]),a=w([]),r=w({}),i=w(e.scale()),c=({selected:d})=>{var p,g;if(l.value=d,((p=e.curTool)==null?void 0:p.name)!=="selectTool")return;const m=No(((g=d[0])==null?void 0:g.className)??"");a.value=(m==null?void 0:m.formConfig)??[],m!=null&&m.model&&(m.model=Object.keys(m.model).reduce((y,k)=>{var x;return{...y,[k]:(x=l.value)==null?void 0:x[0].attrs[k]}},{})),r.value=(m==null?void 0:m.model)??{}},u=({curTool:d})=>{if(!d)return;const m=Go(d.name);m&&(a.value=m.formConfig,r.value=m.model,d.config={...d.config,...r.value})},s=({scale:d})=>{i.value=d},f=({event:d})=>{d.evt.button===1&&e.triggerPanning(!0)},v=({event:d})=>{d.evt.button===1&&e.triggerPanning(!1)};return V(()=>{e.on("selected:changed",c),e.on("tool:changed",u),e.on("canvas:zoom:end",s),e.on("mouse:down",f),e.on("mouse:up",v)}),le(()=>{e.off("selected:changed",c),e.off("tool:changed",u),e.off("canvas:zoom:end",s),e.off("mouse:down",f),e.off("mouse:up",v)}),te(Ie,e),te(dt,l),te(On,{selectorPlugin:n,historyPlugin:t}),te(Yt,{panelFormConfig:a,panelFormModel:r}),{app:e,scale:i,selected:l,panelFormConfig:a,panelFormModel:r}},Ho=Uo,Wo={class:"w-full min-w-fit md:min-w-[60rem] h-[40rem] p-2 overflow-auto scrollbar scrollbar-w-2 scrollbar-thumb-gray-200 scrollbar-track-gray-100 scrollbar-thumb-rounded-lg scrollbar-track-rounded-lg"},zo={class:"my-4 text-xl font-bold"},Yo={class:"columns-2 gap-8"},Xo={class:"font-bold text-base"},qo={class:"rounded-lg ring-1 ring-slate-950 dark:ring-navyBlue-100 divide-y divide-slate-950 dark:divide-navyBlue-100 mt-2 text-xs"},Jo={class:"justify-self-end flex flex-row gap-1"},Zo=O({__name:"HotKeyList",props:{visible:{type:Boolean}},emits:["update:visible","close"],setup(e,{emit:t}){const n=e,{undo:o,redo:l,deleteNode:a,selectAll:r,resetStage:i,stageDrag:c,mouseWheel:u,moveUp:s,moveBottom:f,moveTop:v,moveDown:d,makeGroup:m,decomposeGroup:p,alignBottom:g,alignLeft:y,alignCenterX:k,alignCenterY:x,alignRight:P,alignTop:_,distributeX:T,distributeY:L}=ue(Re),U=[{title:"",hotKeyList:[o,l,r,a,i]},{title:"",hotKeyList:[c,u]},{title:"",hotKeyList:[v,s,d,f,m,p,y,k,P,_,x,g,T,L]}],J=b({get(){return n.visible},set(ie){t("update:visible",ie),ie||t("close")}}),be=()=>{J.value=!1};return(ie,we)=>(S(),X(ft,{visible:J.value,onClose:be},{title:D(()=>[Sl(F(ie.$t("")),1)]),default:D(()=>[h("div",Wo,[h("h3",zo,F(ie.$t("")),1),h("div",Yo,[(S(),B(H,null,Q(U,({title:W,hotKeyList:xe},re)=>h("div",{key:re,class:"w-full break-inside-avoid-column pb-4"},[h("h3",Xo,F(ie.$t(W)),1),h("div",qo,[(S(!0),B(H,null,Q(xe,(me,I)=>(S(),B("div",{key:I,class:"w-full p-4 flex flex-row justify-between items-center"},[h("div",null,F(ie.$t(me.directions??"")),1),h("div",Jo,[(S(!0),B(H,null,Q(R(Xn)(me.hotKey),(N,ee)=>(S(),B("i",{key:ee,class:"p-2 min-w-fit bg-blue-100 rounded-lg dark:text-gray-600"},F(N),1))),128))])]))),128))])])),64))])])]),_:1},8,["visible"]))}}),Qo=h("iconpark-icon",{name:"hamburger",class:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-navyBlue-100 text-lg dark:text-gray-300"},null,-1),ea={class:"relative"},ta={class:"w-full flex flex-row justify-between items-center gap-2"},la=["name"],na={class:"flex-1 text-start"},oa={class:"text-xs text-gray-700 dark:text-slate-400"},aa=O({__name:"Menu",setup(e){const t=ue(Ie),{open:n,resetStage:o,exportImg:l}=ue(Re),{execute:a}=Zt(()=>t.toJSON(),()=>`Pictode-${new Date}.pictode`,Be.JSON,"utf-8"),r=[[{icon:"folder-close",label:n.directions??"",hotkey:n.hotKey,handler:n},{icon:"hard-disk-one",label:"",handler:()=>{a()}},{icon:"down-picture",label:l.directions??"",hotkey:l.hotKey,handler:l},{icon:"clear",label:o.directions??"",hotkey:o.hotKey,handler:o}]];return(i,c)=>(S(),X(R(hn),{as:"div"},{default:D(()=>[E(R(yn),{class:"outline-none flex justify-start bg-white dark:bg-navyBlue-200 rounded-lg"},{default:D(()=>[Qo]),_:1}),E(it,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:D(()=>[h("div",ea,[E(R(bn),{class:"absolute mt-2 w-60 p-1 divide-y rounded-lg bg-white dark:bg-navyBlue-200 shadow-md ring-1 ring-slate-950 dark:ring-navyBlue-100 focus:outline-none"},{default:D(()=>[(S(),B(H,null,Q(r,(u,s)=>h("div",{key:s,class:"px-1 py-1"},[(S(!0),B(H,null,Q(u,(f,v)=>(S(),X(R(wn),{key:v,class:"hover:bg-gray-200 dark:hover:bg-navyBlue-100"},{default:D(({active:d})=>[E(Z,{class:ae([d?"bg-blue-100":"text-gray-900 ","group flex w-full items-center rounded-md px-2 py-2 text-sm dark:text-gray-300"]),title:i.$t(f.label),onClick:f.handler},{default:D(()=>[h("div",ta,[h("iconpark-icon",{name:f.icon},null,8,la),h("span",na,F(i.$t(f.label)),1),h("span",oa,F(R(ne)(f.hotkey)),1)])]),_:2},1032,["class","title","onClick"])]),_:2},1024))),128))])),64))]),_:1})])]),_:1})]),_:1}))}}),ia={key:0},ra={key:0,class:"flex flex-col content-start gap-1 px-1 py-2 select-none"},sa={class:"text-start text-sm text-gray-600 dark:text-gray-300"},ua={class:"flex flex-row justify-start flex-wrap gap-2"},ca={key:1,class:"select-none p-2"},da=h("iconpark-icon",null,null,-1),fa=[da],va={class:"flex flex-col content-start gap-1 px-1 py-2 select-none"},pa={class:"text-start text-sm text-gray-600 dark:text-gray-300"},ma={class:"flex flex-row justify-start flex-wrap gap-2"},ga=O({__name:"PropertyPanel",setup(e){const t=ue(Ie),n=ue(dt),{panelFormConfig:o,panelFormModel:l}=ue(Yt),{moveBottom:a,moveDown:r,moveUp:i,moveTop:c,alignLeft:u,alignRight:s,alignTop:f,alignBottom:v,alignCenterX:d,alignCenterY:m,distributeX:p,distributeY:g}=ue(Re),y=b(()=>[{icon:"bring-to-front-one",action:a},{icon:"sent-to-back",action:r},{icon:"bring-to-front",action:i},{icon:"send-to-back",action:c}]),k=b(()=>[{icon:"align-left",visible:n.value.length>1,action:u},{icon:"align-horizontally",visible:n.value.length>1,action:d},{icon:"align-right",visible:n.value.length>1,action:s},{icon:"distribute-horizontal-spacing",visible:n.value.length>2,action:p},{icon:"align-top",visible:n.value.length>1,action:f},{icon:"align-vertically",visible:n.value.length>1,action:m},{icon:"align-bottom",visible:n.value.length>1,action:v},{icon:"distribute-vertical-spacing",visible:n.value.length>2,action:g}]),x=b(()=>n.value.length>1),P=_=>{t.update(...n.value.map(T=>{const L=T.toObject();return L.attrs={...L.attrs,..._},L}))};return(_,T)=>R(o).length?(S(),B("div",ia,[E(R(Fn),{model:R(l),config:R(o),onChange:P},null,8,["model","config"]),x.value?(S(),B("div",ra,[h("label",sa,F(_.$t("")),1),h("div",ua,[(S(!0),B(H,null,Q(k.value,(L,U)=>(S(),B("div",{key:U},[L.visible?(S(),X(Z,{key:0,class:"rounded-lg inline-flex items-center relative cursor-pointer select-none p-2 hover:bg-gray-200 dark:hover:bg-navyBlue-100 dark:text-gray-300",title:_.$t(L.action.directions??""),icon:L.icon,onClick:L.action},null,8,["title","icon","onClick"])):(S(),B("div",ca,fa))]))),128))])])):Ee("",!0),h("div",va,[h("label",pa,F(_.$t("")),1),h("div",ma,[(S(!0),B(H,null,Q(y.value,(L,U)=>(S(),X(Z,{key:U,class:"rounded-lg inline-flex items-center relative cursor-pointer select-none p-2 hover:bg-gray-200 dark:hover:bg-navyBlue-100 dark:text-gray-300",title:_.$t(L.action.directions??""),icon:L.icon,onClick:L.action},null,8,["title","icon","onClick"]))),128))])])])):Ee("",!0)}});class ha{constructor({config:t,hooks:n}){C(this,"name","regularPolygonTool");C(this,"hooks");C(this,"config");C(this,"regularPolygon",null);C(this,"startPointer",new ve(0,0));this.config=t,this.hooks=n}mousedown({app:t}){var n,o;this.regularPolygon||(this.startPointer.clone(t.pointer),this.regularPolygon=new ce.RegularPolygon({sides:4,radius:0,strokeScaleEnabled:!1,...this.config}),this.regularPolygon.setPosition(this.startPointer),t.add(this.regularPolygon),(o=(n=this.hooks)==null?void 0:n.onStartDrawing)==null||o.call(n,t,this.regularPolygon))}mousemove({app:t}){if(!this.regularPolygon)return;const n=t.pointer.x-this.startPointer.x,o=t.pointer.y-this.startPointer.y,l=new ve(this.startPointer.x+n/2,this.startPointer.y+o/2);this.regularPolygon.setPosition(l),this.regularPolygon.radius(l.distanceTo(t.pointer)),t.render()}mouseup({app:t,pointer:n}){var o,l,a;if(this.regularPolygon){if(this.startPointer.eq(n)){(o=this.regularPolygon)==null||o.destroy(),this.regularPolygon=null;return}(a=(l=this.hooks)==null?void 0:l.onCompleteDrawing)==null||a.call(l,t,this.regularPolygon),this.regularPolygon=null,this.startPointer.setXY(0,0)}}enableChanged(){this.regularPolygon=null,this.startPointer.setXY(0,0)}}class ya{constructor({config:t,hooks:n}){C(this,"name","drawingTool");C(this,"config");C(this,"hooks");C(this,"line",null);C(this,"points",[]);this.config=t,this.hooks=n}mousedown({app:t}){var o,l;const n=this.points.at(-1);n!=null&&n.eq(t.pointer)||this.points.push(t.pointer),!this.line&&(this.line=new ce.Line({points:De(this.points),globalCompositeOperation:"source-over",lineCap:"round",lineJoin:"round",strokeScaleEnabled:!1,hitStrokeWidth:20,...this.config}),t.add(this.line),(l=(o=this.hooks)==null?void 0:o.onStartDrawing)==null||l.call(o,t,this.line))}mousemove({app:t,event:n}){this.line&&(n.evt.stopPropagation(),this.points.push(t.pointer),this.line.points(De(this.points)))}mouseup({app:t,pointer:n}){var l,a;if(!this.line)return;const o=this.points.at(-1);this.points.length<=6&&o&&n.distanceTo(o)<10&&this.line&&this.line.destroy(),(a=(l=this.hooks)==null?void 0:l.onCompleteDrawing)==null||a.call(l,t,this.line),this.line=null,this.points=[]}enableChanged(){this.line=null,this.points=[]}}class ba{constructor({config:t,hooks:n}){C(this,"name","ellipseTool");C(this,"config");C(this,"hooks");C(this,"ellipse",null);C(this,"startPointer",new ve(0,0));this.config=t,this.hooks=n}mousedown({app:t}){this.ellipse||(this.startPointer.clone(t.pointer),this.ellipse=new ce.Ellipse({radiusX:0,radiusY:0,strokeScaleEnabled:!1,...this.config}),this.ellipse.setPosition(this.startPointer),this.ellipse.radius(new ve(0,0)),t.add(this.ellipse))}mousemove({app:t}){if(!this.ellipse)return;const n=t.pointer.x-this.startPointer.x,o=t.pointer.y-this.startPointer.y,l=new ve(Math.abs(n)/2,Math.abs(o)/2);this.ellipse.setPosition(new ve(this.startPointer.x+n/2,this.startPointer.y+o/2)),this.ellipse.radius(l),t.render()}mouseup({app:t,pointer:n}){var o,l,a;if(this.ellipse){if(this.startPointer.eq(n)){(o=this.ellipse)==null||o.destroy(),this.ellipse=null;return}(a=(l=this.hooks)==null?void 0:l.onCompleteDrawing)==null||a.call(l,t,this.ellipse),this.ellipse=null,this.startPointer.setXY(0,0)}}enableChanged(){this.ellipse=null,this.startPointer.setXY(0,0)}}class wa{constructor({config:t,hooks:n}){C(this,"name","lineTool");C(this,"config");C(this,"hooks");C(this,"points",[]);C(this,"line",null);this.config=t,this.hooks=n}mousedown({app:t}){var o,l;this.line||(this.line=new ce.Line({points:De(this.points),fill:"transparent",strokeScaleEnabled:!1,hitStrokeWidth:20,...this.config}),t.add(this.line),(l=(o=this.hooks)==null?void 0:o.onStartDrawing)==null||l.call(o,t,this.line));const n=this.points.at(-1);n!=null&&n.eq(t.pointer)||this.points.push(t.pointer),this.line.points(De(this.points))}mousemove({app:t,pointer:n}){this.line&&(this.line.points(De(this.points).concat(n.x,n.y)),t.render())}doubleClick({app:t}){var n,o;this.line&&((o=(n=this.hooks)==null?void 0:n.onCompleteDrawing)==null||o.call(n,t,this.line),this.line=null,this.points=[])}enableChanged(){this.line=null,this.points=[]}}class xa{constructor({config:t,hooks:n}){C(this,"name","rectTool");C(this,"config");C(this,"hooks");C(this,"startPointer",new ve(0,0));C(this,"rectangle",null);this.config=t,this.hooks=n}mousedown({app:t}){var n,o;this.rectangle||(this.startPointer.clone(t.pointer),this.rectangle=new ce.Rect({strokeScaleEnabled:!1,...this.config}),this.rectangle.setPosition(this.startPointer),this.rectangle.width(0),this.rectangle.height(0),t.add(this.rectangle),(o=(n=this.hooks)==null?void 0:n.onStartDrawing)==null||o.call(n,t,this.rectangle))}mousemove({app:t}){this.rectangle&&(this.rectangle.setPosition(new ve(Math.min(this.startPointer.x,t.pointer.x),Math.min(this.startPointer.y,t.pointer.y))),this.rectangle.width(Math.abs(t.pointer.x-this.startPointer.x)),this.rectangle.height(Math.abs(t.pointer.y-this.startPointer.y)),t.render())}mouseup({app:t,pointer:n}){var o,l,a;if(this.rectangle){if(this.startPointer.eq(n)){(o=this.rectangle)==null||o.destroy(),this.rectangle=null;return}(a=(l=this.hooks)==null?void 0:l.onCompleteDrawing)==null||a.call(l,t,this.rectangle),this.rectangle=null,this.startPointer.setXY(0,0)}}enableChanged(){this.rectangle=null,this.startPointer.setXY(0,0)}}class ka{constructor(t){C(this,"name","eraserTool");C(this,"hooks");C(this,"targetMap",new Map);C(this,"isEraser",!1);this.hooks=t.hooks}mousedown({event:t}){this.isEraser=!0,!(t.target instanceof ce.Stage)&&(this.targetMap.set(t.target.id(),{node:t.target,opacity:t.target.attrs.opacity}),t.target.opacity(.3))}mouseup({app:t}){this.targetMap.size&&(t.remove(...[...this.targetMap.values()].map(({node:n,opacity:o})=>(n.opacity(o),n))),this.targetMap.clear(),this.isEraser=!1)}mousemove({event:t}){!this.isEraser||t.target instanceof ce.Stage||this.targetMap.get(t.target.id())||(this.targetMap.set(t.target.id(),{node:t.target,opacity:t.target.attrs.opacity}),t.target.opacity(.3))}enableChanged(){this.targetMap.clear(),this.isEraser=!1}}class Sa{constructor({config:t,hooks:n}){C(this,"name","ArrowTool");C(this,"config");C(this,"hooks");C(this,"startPoint");C(this,"endPoint");C(this,"arrow");this.config=t,this.hooks=n}drawArrow(t){var n,o;!this.startPoint||!this.endPoint||(this.arrow=new ce.Arrow({points:[this.startPoint.x,this.startPoint.y,this.endPoint.x,this.endPoint.y],pointerLength:10,pointerWidth:10,fill:"black",stroke:"black",strokeWidth:2,...this.config}),t.add(this.arrow),(o=(n=this.hooks)==null?void 0:n.onStartDrawing)==null||o.call(n,t,this.arrow))}stop(){this.startPoint=void 0,this.endPoint=void 0,this.arrow=void 0}mousedown({app:t}){var n,o;this.arrow?((o=(n=this.hooks)==null?void 0:n.onCompleteDrawing)==null||o.call(n,t,this.arrow),this.stop()):(this.startPoint=t.pointer,this.endPoint=t.pointer,this.drawArrow(t))}mousemove({app:t,pointer:n}){this.arrow&&this.startPoint&&this.endPoint&&(this.arrow.points([this.startPoint.x,this.startPoint.y,n.x,n.y]),t.render())}}class Pa{constructor({config:t,hooks:n}){C(this,"name","iframeTool");C(this,"config");C(this,"hooks");C(this,"iframe",null);C(this,"startPointer",new ve(0,0));this.config=t,this.hooks=n}mousedown({app:t}){var n,o;this.iframe||(this.startPointer.clone(t.pointer),this.iframe=new Yn({strokeScaleEnabled:!1,...this.config}),this.iframe.setPosition(this.startPointer),this.iframe.width(0),this.iframe.height(0),t.add(this.iframe),(o=(n=this.hooks)==null?void 0:n.onStartDrawing)==null||o.call(n,t,this.iframe))}mousemove({app:t}){this.iframe&&(this.iframe.setPosition(new ve(Math.min(this.startPointer.x,t.pointer.x),Math.min(this.startPointer.y,t.pointer.y))),this.iframe.width(Math.abs(t.pointer.x-this.startPointer.x)),this.iframe.height(Math.abs(t.pointer.y-this.startPointer.y)),t.render())}mouseup({app:t,pointer:n}){var o,l,a;if(this.iframe){if(this.startPointer.eq(n)){(o=this.iframe)==null||o.destroy(),this.iframe=null;return}(a=(l=this.hooks)==null?void 0:l.onCompleteDrawing)==null||a.call(l,t,this.iframe),this.iframe=null,this.startPointer.setXY(0,0)}}}const $a=""+new URL("round-8b362c12.svg",import.meta.url).href,_a={class:"flex flex-grow justify-around flex-wrap"},Ca=["name","stroke"],Ta=O({__name:"Tools",setup(e){const t=ue(Ie),n=new Dl({hooks:{onActive(i){var c,u;(u=(c=i.getPlugin("selectorPlugin"))==null?void 0:c.enable)==null||u.call(c)},onInactive(i){var c,u;(u=(c=i.getPlugin("selectorPlugin"))==null?void 0:c.disable)==null||u.call(c)}}}),o=[{icon:"move",name:"selectTool",title:"",tool:n},{icon:"rectangle",name:"rectTool",title:"",tool:()=>new xa({hooks:{onActive(i){i.containerElement.style.cursor="crosshair",i.cancelSelect()},onInactive(i){i.containerElement.style.cursor="default"},onCompleteDrawing(i,c){l.value=n.name,j(()=>i.select(c))}}})},{icon:"oval",name:"ellipseTool",title:"",tool:()=>new ba({hooks:{onActive(i){i.containerElement.style.cursor="crosshair",i.cancelSelect()},onInactive(i){i.containerElement.style.cursor="default"},onCompleteDrawing(i,c){l.value=n.name,j(()=>i.select(c))}}})},{icon:"diamond",name:"diamondTool",title:"",tool:()=>new ha({hooks:{onActive(i){i.containerElement.style.cursor="crosshair",i.cancelSelect()},onInactive(i){i.containerElement.style.cursor="default"},onCompleteDrawing(i,c){l.value=n.name,j(()=>i.select(c))}}})},{icon:"line-1",name:"lineTool",title:"",tool:()=>new wa({hooks:{onActive(i){i.containerElement.style.cursor="crosshair",i.cancelSelect()},onInactive(i){i.containerElement.style.cursor="default"},onCompleteDrawing(i,c){l.value=n.name,j(()=>i.select(c))}}})},{icon:"pencil",name:"drawingTool",title:"",tool:()=>new ya({hooks:{onActive(i){i.containerElement.style.cursor="crosshair",i.cancelSelect()},onInactive(i){i.containerElement.style.cursor="default"}}})},{icon:"arrow",name:"arrowTool",title:"",tool:()=>new Sa({hooks:{onActive(i){i.containerElement.style.cursor="crosshair",i.cancelSelect()},onInactive(i){i.containerElement.style.cursor="default"}}})},{icon:"picture",name:"imageTool",title:"",tool:async()=>{const i=await Dt([".jpg",".png",".jpge",".PNG",".JPG",".JPGE",".svg"],!1),c=await Bl(s=>s.readAsDataURL(i[0])),u=new Image;return u.src=c,new Ol({config:{image:u},hooks:{onActive(s){s.cancelSelect()},onInactive(s){s.containerElement.style.cursor="default"},onCompleteDrawing(s,f){l.value=n.name,j(()=>s.select(f))}}})}},{icon:"text",name:"textTool",title:"",tool:()=>new Il({hooks:{onActive(i){i.containerElement.style.cursor="crosshair"},onInactive(i){i.containerElement.style.cursor="default"},onCompleteDrawing(i,c){l.value=n.name,j(()=>i.select(c))}}})},{icon:"eraser",name:"eraserTool",title:"",tool:()=>new ka({hooks:{onActive(i){i.containerElement.style.cursor=`url(${$a}), auto`},onInactive(i){i.containerElement.style.cursor="default"}}})},{icon:"web",name:"iframeTool",title:"",tool:()=>new Pa({hooks:{onActive(i){i.containerElement.style.cursor="crosshair",i.cancelSelect()},onInactive(i){i.containerElement.style.cursor="default"},onCompleteDrawing(i,c){l.value=n.name,j(()=>i.select(c))}}})}],l=w(o[0].name),{theme:a}=Lt(),r=b(()=>a.value==="dark"?"#d1d5db":"#333333");return pe(async()=>{var c;let i=(c=o.find(({name:u})=>u===l.value))==null?void 0:c.tool;typeof i=="function"&&(i=await i()),i&&t.setTool(i)}),(i,c)=>(S(),X(R(Rt),{modelValue:l.value,"onUpdate:modelValue":c[0]||(c[0]=u=>l.value=u)},{default:D(()=>[h("div",_a,[(S(),B(H,null,Q(o,(u,s)=>E(R(At),{key:s,value:u.name,title:i.$t(u.title)},{default:D(({checked:f})=>[h("div",{class:ae(["rounded-lg inline-flex items-center relative cursor-pointer select-none p-2",f?"bg-blue-500":"hover:bg-gray-200 dark:hover:bg-navyBlue-100"])},[h("iconpark-icon",{name:u.icon,stroke:r.value},null,8,Ca)],2)]),_:2},1032,["value","title"])),64))])]),_:1},8,["modelValue"]))}}),Ea={class:"w-full h-full"},Ra={class:"absolute left-0 top-0 right-0 bottom-0 p-8 z-50 pointer-events-none grid grid-cols-3 grid-rows-[auto_1fr_50px] gap-12"},Aa={class:"row-start-1 col-start-1 justify-self-start"},La={class:"row-start-1 col-start-2 justify-self-stretch"},Da={class:"row-start-1 col-start-3 justify-self-end"},Ba={class:"grid grid-flow-col gap-1 items-center w-full pointer-events-auto rounded-lg p-1 ring-1 ring-slate-950 dark:ring-navyBlue-100 bg-white dark:bg-navyBlue-200"},Oa={class:"absolute z-50 mt-3 mr-10 max-h-60 left-[-30px] w-fit rounded-lg bg-white dark:bg-navyBlue-200 py-1 text-base shadow-lg ring-1 ring-slate-950 dark:ring-navyBlue-100 focus:outline-none sm:text-sm"},Ia={class:"row-start-2 col-start-3 justify-self-end"},Ma={class:"row-start-3 col-start-1 justify-self-start flex flex-row gap-2"},Fa={class:"grid grid-flow-col gap-1 items-center w-full pointer-events-auto rounded-lg p-1 ring-1 ring-slate-950 dark:ring-navyBlue-100 bg-white dark:bg-navyBlue-200"},Ka={class:"flex text-center text-sm text-slate-900 dark:text-gray-300 h-full w-8 justify-center items-center select-none"},ja={class:"grid grid-flow-col gap-1 items-center w-full pointer-events-auto rounded-lg p-1 ring-1 ring-slate-950 dark:ring-navyBlue-100 bg-white dark:bg-navyBlue-200"},Ua=O({__name:"index",setup(e){const t=w(null),{triggerTheme:n,theme:o}=Lt(),{app:l,selected:a,scale:r}=Ho(),{undo:i,redo:c}=Bo(t,l,a);to(l,a);const u=b(()=>`${Math.ceil(r.value*100)}%`),s=Ue(Zo),f=()=>{l.scaleTo(r.value+l.config.mousewheel.factor)},v=()=>{l.scaleTo(r.value-l.config.mousewheel.factor)},d=()=>i(),m=()=>c(),p=()=>n();return V(()=>{t.value&&(l.mount(t.value),t.value.tabIndex=0)}),(g,y)=>(S(),B("div",Ea,[h("div",Ra,[h("section",Aa,[E(aa,{class:"pointer-events-auto rounded-lg ring-1 ring-slate-950 dark:ring-navyBlue-100"})]),h("section",La,[E(Ta,{class:"pointer-events-auto w-full rounded-lg p-2 ring-1 ring-slate-950 dark:ring-navyBlue-100 bg-white dark:bg-navyBlue-200"})]),h("section",Da,[h("div",Ba,[E(Z,{class:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-navyBlue-100 text-lg dark:text-gray-300",icon:R(o)==="dark"?"sun":"moon",onClick:p},null,8,["icon"]),E(qt,{modelValue:g.$i18n.locale,"onUpdate:modelValue":y[0]||(y[0]=k=>g.$i18n.locale=k)},{listbox:D(()=>[E(Z,{class:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-navyBlue-100 text-lg dark:text-gray-300",title:g.$t(""),icon:"translate"},null,8,["title"])]),default:D(()=>[h("div",Oa,[(S(!0),B(H,null,Q(R(Pl),({label:k,value:x},P)=>(S(),X(Jt,{key:P,value:x,label:k,class:"p-1"},null,8,["value","label"]))),128))])]),_:1},8,["modelValue"]),E(Z,{class:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-navyBlue-100 text-lg dark:text-gray-300",title:g.$t(""),icon:"helpcenter",onClick:y[1]||(y[1]=k=>R(s)({}))},null,8,["title"])])]),h("section",Ia,[E(ga,{class:"p-4 w-56 shadow-md rounded-lg ring-1 ring-slate-950 dark:ring-navyBlue-100 bg-white dark:bg-navyBlue-200 pointer-events-auto"})]),h("section",Ma,[h("div",Fa,[E(Z,{class:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-navyBlue-100 dark:text-gray-300",icon:"minus",title:g.$t(""),onClick:v},null,8,["title"]),h("span",Ka,F(u.value),1),E(Z,{class:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-navyBlue-100 dark:text-gray-300",icon:"plus",title:g.$t(""),onClick:f},null,8,["title"])]),h("div",ja,[E(Z,{class:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-navyBlue-100 dark:text-gray-300",icon:"undo",title:g.$t(""),onClick:d},null,8,["title"]),E(Z,{class:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-navyBlue-100 dark:text-gray-300",icon:"redo",title:g.$t(""),onClick:m},null,8,["title"])])])]),h("div",{ref_key:"canvasRef",ref:t,class:"w-full h-full absolute overflow-clip dark:bg-navyBlue-300 focus:border-none"},null,512)]))}});export{Ua as default};
