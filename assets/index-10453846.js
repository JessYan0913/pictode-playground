var ll=Object.defineProperty;var nl=(e,t,n)=>t in e?ll(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var R=(e,t,n)=>(nl(e,typeof t!="symbol"?t+"":t,n),n);import{r as x,d as O,c as b,m as bt,o as V,a as le,n as ol,h as z,f as Ne,b as Ge,H as q,F as H,w as ve,S as Ce,e as ye,g as _,E as xt,u as Y,i as Fe,P as Ve,N as he,T as al,p as te,j as ce,s as il,t as de,k as He,l as G,V as rl,q as sl,M as ul,y as lt,v as j,x as L,U as cl,_ as dl,z as vt,A as Pe,B as wt,C as kt,D as St,G as nt,I as fl,K as $t,J as ot,L as at,O as _t,Q as oe,R as vl,W as pl,X as Ct,Y as ml,Z as gl,$ as $e,a0 as hl,a1 as ae,a2 as Je,a3 as Pt,a4 as T,a5 as yl,a6 as E,a7 as bl,a8 as Tt,a9 as S,aa as B,ab as g,ac as F,ad as Et,ae as X,af as xl,ag as wl,ah as Q,ai as Te,aj as kl,ak as Ee,al as D,am as it,an as Rt,ao as Lt,ap as Sl,aq as At,ar as $l}from"./index-4f242fe8.js";import{H as _l,K as pe,s as Dt,F as Cl,I as Pl,B as Tl,A as El,a as Rl,S as Ll,b as Al,P as fe,f as De,c as Dl,r as Bl,d as Ol,T as Il}from"./index-d08a16b5.js";function Ml(e){throw new Error("Unexpected object: "+e)}var M=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(M||{});function Bt(e,t){let n=t.resolveItems();if(n.length<=0)return null;let o=t.resolveActiveIndex(),l=o??-1,a=(()=>{switch(e.focus){case 0:return n.findIndex(r=>!t.resolveDisabled(r));case 1:{let r=n.slice().reverse().findIndex((i,c,u)=>l!==-1&&u.length-c-1>=l?!1:!t.resolveDisabled(i));return r===-1?r:n.length-1-r}case 2:return n.findIndex((r,i)=>i<=l?!1:!t.resolveDisabled(r));case 3:{let r=n.slice().reverse().findIndex(i=>!t.resolveDisabled(i));return r===-1?r:n.length-1-r}case 4:return n.findIndex(r=>t.resolveId(r)===e.id);case 5:return null;default:Ml(e)}})();return a===-1?o:a}function pt(e){return[e.screenX,e.screenY]}function Ot(){let e=x([-1,-1]);return{wasMoved(t){let n=pt(t);return e.value[0]===n[0]&&e.value[1]===n[1]?!1:(e.value=n,!0)},update(t){e.value=pt(t)}}}function Fl(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function rt(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Oe(){let e=[],t={addEventListener(n,o,l,a){return n.addEventListener(o,l,a),t.add(()=>n.removeEventListener(o,l,a))},requestAnimationFrame(...n){let o=requestAnimationFrame(...n);t.add(()=>cancelAnimationFrame(o))},nextFrame(...n){t.requestAnimationFrame(()=>{t.requestAnimationFrame(...n)})},setTimeout(...n){let o=setTimeout(...n);t.add(()=>clearTimeout(o))},microTask(...n){let o={current:!0};return rt(()=>{o.current&&n[0]()}),t.add(()=>{o.current=!1})},style(n,o,l){let a=n.style.getPropertyValue(o);return Object.assign(n.style,{[o]:l}),this.add(()=>{Object.assign(n.style,{[o]:a})})},group(n){let o=Oe();return n(o),this.add(()=>o.dispose())},add(n){return e.push(n),()=>{let o=e.indexOf(n);if(o>=0)for(let l of e.splice(o,1))l()}},dispose(){for(let n of e.splice(0))n()}};return t}function Kl(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}function It(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.value){let o=_(n);o instanceof HTMLElement&&t.add(o)}return t}var Mt=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(Mt||{});let Le=Object.assign(O({name:"FocusTrap",props:{as:{type:[Object,String],default:"div"},initialFocus:{type:Object,default:null},features:{type:Number,default:30},containers:{type:[Object,Function],default:x(new Set)}},inheritAttrs:!1,setup(e,{attrs:t,slots:n,expose:o}){let l=x(null);o({el:l,$el:l});let a=b(()=>bt(l)),r=x(!1);V(()=>r.value=!0),le(()=>r.value=!1),Vl({ownerDocument:a},b(()=>r.value&&!!(e.features&16)));let i=Nl({ownerDocument:a,container:l,initialFocus:b(()=>e.initialFocus)},b(()=>r.value&&!!(e.features&2)));Gl({ownerDocument:a,container:l,containers:e.containers,previousActiveElement:i},b(()=>r.value&&!!(e.features&8)));let c=ol();function u(p){let y=_(l);y&&(v=>v())(()=>{Y(c.value,{[Fe.Forwards]:()=>{Ve(y,he.First,{skipElements:[p.relatedTarget]})},[Fe.Backwards]:()=>{Ve(y,he.Last,{skipElements:[p.relatedTarget]})}})})}let s=x(!1);function d(p){p.key==="Tab"&&(s.value=!0,requestAnimationFrame(()=>{s.value=!1}))}function f(p){if(!r.value)return;let y=It(e.containers);_(l)instanceof HTMLElement&&y.add(_(l));let v=p.relatedTarget;v instanceof HTMLElement&&v.dataset.headlessuiFocusGuard!=="true"&&(Ft(y,v)||(s.value?Ve(_(l),Y(c.value,{[Fe.Forwards]:()=>he.Next,[Fe.Backwards]:()=>he.Previous})|he.WrapAround,{relativeTo:p.target}):p.target instanceof HTMLElement&&Ce(p.target)))}return()=>{let p={},y={ref:l,onKeydown:d,onFocusout:f},{features:v,initialFocus:m,containers:h,...k}=e;return z(H,[!!(v&4)&&z(Ne,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:u,features:Ge.Focusable}),q({ourProps:y,theirProps:{...t,...k},slot:p,attrs:t,slots:n,name:"FocusTrap"}),!!(v&4)&&z(Ne,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:u,features:Ge.Focusable})])}}}),{features:Mt}),Se=[];Kl(()=>{function e(t){t.target instanceof HTMLElement&&t.target!==document.body&&Se[0]!==t.target&&(Se.unshift(t.target),Se=Se.filter(n=>n!=null&&n.isConnected),Se.splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function jl(e){let t=x(Se.slice());return ye([e],([n],[o])=>{o===!0&&n===!1?rt(()=>{t.value.splice(0)}):o===!1&&n===!0&&(t.value=Se.slice())},{flush:"post"}),()=>{var n;return(n=t.value.find(o=>o!=null&&o.isConnected))!=null?n:null}}function Vl({ownerDocument:e},t){let n=jl(t);V(()=>{ve(()=>{var o,l;t.value||((o=e.value)==null?void 0:o.activeElement)===((l=e.value)==null?void 0:l.body)&&Ce(n())},{flush:"post"})}),le(()=>{t.value&&Ce(n())})}function Nl({ownerDocument:e,container:t,initialFocus:n},o){let l=x(null),a=x(!1);return V(()=>a.value=!0),le(()=>a.value=!1),V(()=>{ye([t,n,o],(r,i)=>{if(r.every((u,s)=>(i==null?void 0:i[s])===u)||!o.value)return;let c=_(t);c&&rt(()=>{var u,s;if(!a.value)return;let d=_(n),f=(u=e.value)==null?void 0:u.activeElement;if(d){if(d===f){l.value=f;return}}else if(c.contains(f)){l.value=f;return}d?Ce(d):Ve(c,he.First|he.NoScroll)===al.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),l.value=(s=e.value)==null?void 0:s.activeElement})},{immediate:!0,flush:"post"})}),l}function Gl({ownerDocument:e,container:t,containers:n,previousActiveElement:o},l){var a;xt((a=e.value)==null?void 0:a.defaultView,"focus",r=>{if(!l.value)return;let i=It(n);_(t)instanceof HTMLElement&&i.add(_(t));let c=o.value;if(!c)return;let u=r.target;u&&u instanceof HTMLElement?Ft(i,u)?(o.value=u,Ce(u)):(r.preventDefault(),r.stopPropagation(),Ce(c)):Ce(o.value)},!0)}function Ft(e,t){for(let n of e)if(n.contains(t))return!0;return!1}let Xe=new Map,Ae=new Map;function mt(e,t=x(!0)){ve(n=>{var o;if(!t.value)return;let l=_(e);if(!l)return;n(function(){var r;if(!l)return;let i=(r=Ae.get(l))!=null?r:1;if(i===1?Ae.delete(l):Ae.set(l,i-1),i!==1)return;let c=Xe.get(l);c&&(c["aria-hidden"]===null?l.removeAttribute("aria-hidden"):l.setAttribute("aria-hidden",c["aria-hidden"]),l.inert=c.inert,Xe.delete(l))});let a=(o=Ae.get(l))!=null?o:0;Ae.set(l,a+1),a===0&&(Xe.set(l,{"aria-hidden":l.getAttribute("aria-hidden"),inert:l.inert}),l.setAttribute("aria-hidden","true"),l.inert=!0)})}let Kt=Symbol("StackContext");var Ze=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(Ze||{});function Ul(){return ce(Kt,()=>{})}function Hl({type:e,enabled:t,element:n,onUpdate:o}){let l=Ul();function a(...r){o==null||o(...r),l(...r)}V(()=>{ye(t,(r,i)=>{r?a(0,e,n):i===!0&&a(1,e,n)},{immediate:!0,flush:"sync"})}),le(()=>{t.value&&a(1,e,n)}),te(Kt,a)}function Wl(e){let t=il(e.getSnapshot());return le(e.subscribe(()=>{t.value=e.getSnapshot()})),t}function zl(e,t){let n=e(),o=new Set;return{getSnapshot(){return n},subscribe(l){return o.add(l),()=>o.delete(l)},dispatch(l,...a){let r=t[l].call(n,...a);r&&(n=r,o.forEach(i=>i()))}}}function Yl(){let e;return{before({doc:t}){var n;let o=t.documentElement;e=((n=t.defaultView)!=null?n:window).innerWidth-o.clientWidth},after({doc:t,d:n}){let o=t.documentElement,l=o.clientWidth-o.offsetWidth,a=e-l;n.style(o,"paddingRight",`${a}px`)}}}function Xl(){if(!Fl())return{};let e;return{before(){e=window.pageYOffset},after({doc:t,d:n,meta:o}){function l(r){return o.containers.flatMap(i=>i()).some(i=>i.contains(r))}if(window.getComputedStyle(t.documentElement).scrollBehavior!=="auto"){let r=Oe();r.style(t.documentElement,"scroll-behavior","auto"),n.add(()=>n.microTask(()=>r.dispose()))}n.style(t.body,"marginTop",`-${e}px`),window.scrollTo(0,0);let a=null;n.addEventListener(t,"click",r=>{if(r.target instanceof HTMLElement)try{let i=r.target.closest("a");if(!i)return;let{hash:c}=new URL(i.href),u=t.querySelector(c);u&&!l(u)&&(a=u)}catch{}},!0),n.addEventListener(t,"touchmove",r=>{r.target instanceof HTMLElement&&!l(r.target)&&r.preventDefault()},{passive:!1}),n.add(()=>{window.scrollTo(0,window.pageYOffset+e),a&&a.isConnected&&(a.scrollIntoView({block:"nearest"}),a=null)})}}}function ql(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function Jl(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let _e=zl(()=>new Map,{PUSH(e,t){var n;let o=(n=this.get(e))!=null?n:{doc:e,count:0,d:Oe(),meta:new Set};return o.count++,o.meta.add(t),this.set(e,o),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let o={doc:e,d:t,meta:Jl(n)},l=[Xl(),Yl(),ql()];l.forEach(({before:a})=>a==null?void 0:a(o)),l.forEach(({after:a})=>a==null?void 0:a(o))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});_e.subscribe(()=>{let e=_e.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let o=t.get(n.doc)==="hidden",l=n.count!==0;(l&&!o||!l&&o)&&_e.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&_e.dispatch("TEARDOWN",n)}});function Zl(e,t,n){let o=Wl(_e),l=b(()=>{let a=e.value?o.value.get(e.value):void 0;return a?a.count>0:!1});return ye([e,t],([a,r],[i],c)=>{if(!a||!r)return;_e.dispatch("PUSH",a,n);let u=!1;c(()=>{u||(_e.dispatch("POP",i??a,n),u=!0)})},{immediate:!0}),l}var Ql=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Ql||{});let Qe=Symbol("DialogContext");function st(e){let t=ce(Qe,null);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,st),n}return t}let Ke="DC8F892D-2EBD-447C-A4C8-A03058436FF4",en=O({name:"Dialog",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},open:{type:[Boolean,String],default:Ke},initialFocus:{type:Object,default:null},id:{type:String,default:()=>`headlessui-dialog-${de()}`}},emits:{close:e=>!0},setup(e,{emit:t,attrs:n,slots:o,expose:l}){var a;let r=x(!1);V(()=>{r.value=!0});let i=x(0),c=He(),u=b(()=>e.open===Ke&&c!==null?(c.value&G.Open)===G.Open:e.open),s=x(null),d=b(()=>bt(s));if(l({el:s,$el:s}),!(e.open!==Ke||c!==null))throw new Error("You forgot to provide an `open` prop to the `Dialog`.");if(typeof u.value!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${u.value===Ke?void 0:e.open}`);let f=b(()=>r.value&&u.value?0:1),p=b(()=>f.value===0),y=b(()=>i.value>1),v=ce(Qe,null)!==null,[m,h]=rl(),{resolveContainers:k,mainTreeNodeRef:w,MainTreeNode:$}=sl({portals:m,defaultContainers:[b(()=>{var I;return(I=W.panelRef.value)!=null?I:s.value})]}),C=b(()=>y.value?"parent":"leaf"),P=b(()=>c!==null?(c.value&G.Closing)===G.Closing:!1),A=b(()=>v||P.value?!1:p.value),U=b(()=>{var I,N,ee;return(ee=Array.from((N=(I=d.value)==null?void 0:I.querySelectorAll("body > *"))!=null?N:[]).find(se=>se.id==="headlessui-portal-root"?!1:se.contains(_(w))&&se instanceof HTMLElement))!=null?ee:null});mt(U,A);let J=b(()=>y.value?!0:p.value),be=b(()=>{var I,N,ee;return(ee=Array.from((N=(I=d.value)==null?void 0:I.querySelectorAll("[data-headlessui-portal]"))!=null?N:[]).find(se=>se.contains(_(w))&&se instanceof HTMLElement))!=null?ee:null});mt(be,J),Hl({type:"Dialog",enabled:b(()=>f.value===0),element:s,onUpdate:(I,N)=>{if(N==="Dialog")return Y(I,{[Ze.Add]:()=>i.value+=1,[Ze.Remove]:()=>i.value-=1})}});let ie=ul({name:"DialogDescription",slot:b(()=>({open:u.value}))}),xe=x(null),W={titleId:xe,panelRef:x(null),dialogState:f,setTitleId(I){xe.value!==I&&(xe.value=I)},close(){t("close",!1)}};te(Qe,W);let we=b(()=>!(!p.value||y.value));lt(k,(I,N)=>{W.close(),j(()=>N==null?void 0:N.focus())},we);let re=b(()=>!(y.value||f.value!==0));xt((a=d.value)==null?void 0:a.defaultView,"keydown",I=>{re.value&&(I.defaultPrevented||I.key===L.Escape&&(I.preventDefault(),I.stopPropagation(),W.close()))});let me=b(()=>!(P.value||f.value!==0||v));return Zl(d,me,I=>{var N;return{containers:[...(N=I.containers)!=null?N:[],k]}}),ve(I=>{if(f.value!==0)return;let N=_(s);if(!N)return;let ee=new ResizeObserver(se=>{for(let Me of se){let ge=Me.target.getBoundingClientRect();ge.x===0&&ge.y===0&&ge.width===0&&ge.height===0&&W.close()}});ee.observe(N),I(()=>ee.disconnect())}),()=>{let{id:I,open:N,initialFocus:ee,...se}=e,Me={...n,ref:s,id:I,role:"dialog","aria-modal":f.value===0?!0:void 0,"aria-labelledby":xe.value,"aria-describedby":ie.value},ge={open:f.value===0};return z(vt,{force:!0},()=>[z(cl,()=>z(dl,{target:s.value},()=>z(vt,{force:!1},()=>z(Le,{initialFocus:ee,containers:k,features:p.value?Y(C.value,{parent:Le.features.RestoreFocus,leaf:Le.features.All&~Le.features.FocusLock}):Le.features.None},()=>z(h,{},()=>q({ourProps:Me,theirProps:{...se,...n},slot:ge,attrs:n,slots:o,visible:f.value===0,features:Pe.RenderStrategy|Pe.Static,name:"Dialog"})))))),z($)])}}}),tn=O({name:"DialogPanel",props:{as:{type:[Object,String],default:"div"},id:{type:String,default:()=>`headlessui-dialog-panel-${de()}`}},setup(e,{attrs:t,slots:n,expose:o}){let l=st("DialogPanel");o({el:l.panelRef,$el:l.panelRef});function a(r){r.stopPropagation()}return()=>{let{id:r,...i}=e,c={id:r,ref:l.panelRef,onClick:a};return q({ourProps:c,theirProps:i,slot:{open:l.dialogState.value===0},attrs:t,slots:n,name:"DialogPanel"})}}}),ln=O({name:"DialogTitle",props:{as:{type:[Object,String],default:"h2"},id:{type:String,default:()=>`headlessui-dialog-title-${de()}`}},setup(e,{attrs:t,slots:n}){let o=st("DialogTitle");return V(()=>{o.setTitleId(e.id),le(()=>o.setTitleId(null))}),()=>{let{id:l,...a}=e;return q({ourProps:{id:l},theirProps:a,slot:{open:o.dialogState.value===0},attrs:t,slots:n,name:"DialogTitle"})}}}),gt=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function ht(e){var t,n;let o=(t=e.innerText)!=null?t:"",l=e.cloneNode(!0);if(!(l instanceof HTMLElement))return o;let a=!1;for(let i of l.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))i.remove(),a=!0;let r=a?(n=l.innerText)!=null?n:"":o;return gt.test(r)&&(r=r.replace(gt,"")),r}function nn(e){let t=e.getAttribute("aria-label");if(typeof t=="string")return t.trim();let n=e.getAttribute("aria-labelledby");if(n){let o=n.split(" ").map(l=>{let a=document.getElementById(l);if(a){let r=a.getAttribute("aria-label");return typeof r=="string"?r.trim():ht(a).trim()}return null}).filter(Boolean);if(o.length>0)return o.join(", ")}return ht(e).trim()}function jt(e){let t=x(""),n=x("");return()=>{let o=_(e);if(!o)return"";let l=o.innerText;if(t.value===l)return n.value;let a=nn(o).trim().toLowerCase();return t.value=l,n.value=a,a}}function on(e,t){return e===t}var an=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(an||{}),rn=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(rn||{}),sn=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(sn||{});function un(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let Vt=Symbol("ListboxContext");function We(e){let t=ce(Vt,null);if(t===null){let n=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,We),n}return t}let cn=O({name:"Listbox",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>on},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:t,attrs:n,emit:o}){let l=x(1),a=x(null),r=x(null),i=x(null),c=x([]),u=x(""),s=x(null),d=x(1);function f(w=$=>$){let $=s.value!==null?c.value[s.value]:null,C=_t(w(c.value.slice()),A=>_(A.dataRef.domRef)),P=$?C.indexOf($):null;return P===-1&&(P=null),{options:C,activeOptionIndex:P}}let p=b(()=>e.multiple?1:0),[y,v]=wt(b(()=>e.modelValue),w=>o("update:modelValue",w),b(()=>e.defaultValue)),m=b(()=>y.value===void 0?Y(p.value,{1:[],0:void 0}):y.value),h={listboxState:l,value:m,mode:p,compare(w,$){if(typeof e.by=="string"){let C=e.by;return(w==null?void 0:w[C])===($==null?void 0:$[C])}return e.by(w,$)},orientation:b(()=>e.horizontal?"horizontal":"vertical"),labelRef:a,buttonRef:r,optionsRef:i,disabled:b(()=>e.disabled),options:c,searchQuery:u,activeOptionIndex:s,activationTrigger:d,closeListbox(){e.disabled||l.value!==1&&(l.value=1,s.value=null)},openListbox(){e.disabled||l.value!==0&&(l.value=0)},goToOption(w,$,C){if(e.disabled||l.value===1)return;let P=f(),A=Bt(w===M.Specific?{focus:M.Specific,id:$}:{focus:w},{resolveItems:()=>P.options,resolveActiveIndex:()=>P.activeOptionIndex,resolveId:U=>U.id,resolveDisabled:U=>U.dataRef.disabled});u.value="",s.value=A,d.value=C??1,c.value=P.options},search(w){if(e.disabled||l.value===1)return;let $=u.value!==""?0:1;u.value+=w.toLowerCase();let C=(s.value!==null?c.value.slice(s.value+$).concat(c.value.slice(0,s.value+$)):c.value).find(A=>A.dataRef.textValue.startsWith(u.value)&&!A.dataRef.disabled),P=C?c.value.indexOf(C):-1;P===-1||P===s.value||(s.value=P,d.value=1)},clearSearch(){e.disabled||l.value!==1&&u.value!==""&&(u.value="")},registerOption(w,$){let C=f(P=>[...P,{id:w,dataRef:$}]);c.value=C.options,s.value=C.activeOptionIndex},unregisterOption(w){let $=f(C=>{let P=C.findIndex(A=>A.id===w);return P!==-1&&C.splice(P,1),C});c.value=$.options,s.value=$.activeOptionIndex,d.value=1},theirOnChange(w){e.disabled||v(w)},select(w){e.disabled||v(Y(p.value,{0:()=>w,1:()=>{let $=oe(h.value.value).slice(),C=oe(w),P=$.findIndex(A=>h.compare(C,oe(A)));return P===-1?$.push(C):$.splice(P,1),$}}))}};lt([r,i],(w,$)=>{var C;h.closeListbox(),kt($,St.Loose)||(w.preventDefault(),(C=_(r))==null||C.focus())},b(()=>l.value===0)),te(Vt,h),nt(b(()=>Y(l.value,{0:G.Open,1:G.Closed})));let k=b(()=>{var w;return(w=_(r))==null?void 0:w.closest("form")});return V(()=>{ye([k],()=>{if(!k.value||e.defaultValue===void 0)return;function w(){h.theirOnChange(e.defaultValue)}return k.value.addEventListener("reset",w),()=>{var $;($=k.value)==null||$.removeEventListener("reset",w)}},{immediate:!0})}),()=>{let{name:w,modelValue:$,disabled:C,form:P,...A}=e,U={open:l.value===0,disabled:C,value:m.value};return z(H,[...w!=null&&m.value!=null?fl({[w]:m.value}).map(([J,be])=>z(Ne,$t({features:Ge.Hidden,key:J,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:P,name:J,value:be}))):[],q({ourProps:{},theirProps:{...n,...ot(A,["defaultValue","onUpdate:modelValue","horizontal","multiple","by"])},slot:U,slots:t,attrs:n,name:"Listbox"})])}}}),dn=O({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-listbox-button-${de()}`}},setup(e,{attrs:t,slots:n,expose:o}){let l=We("ListboxButton");o({el:l.buttonRef,$el:l.buttonRef});function a(u){switch(u.key){case L.Space:case L.Enter:case L.ArrowDown:u.preventDefault(),l.openListbox(),j(()=>{var s;(s=_(l.optionsRef))==null||s.focus({preventScroll:!0}),l.value.value||l.goToOption(M.First)});break;case L.ArrowUp:u.preventDefault(),l.openListbox(),j(()=>{var s;(s=_(l.optionsRef))==null||s.focus({preventScroll:!0}),l.value.value||l.goToOption(M.Last)});break}}function r(u){switch(u.key){case L.Space:u.preventDefault();break}}function i(u){l.disabled.value||(l.listboxState.value===0?(l.closeListbox(),j(()=>{var s;return(s=_(l.buttonRef))==null?void 0:s.focus({preventScroll:!0})})):(u.preventDefault(),l.openListbox(),un(()=>{var s;return(s=_(l.optionsRef))==null?void 0:s.focus({preventScroll:!0})})))}let c=at(b(()=>({as:e.as,type:t.type})),l.buttonRef);return()=>{var u,s;let d={open:l.listboxState.value===0,disabled:l.disabled.value,value:l.value.value},{id:f,...p}=e,y={ref:l.buttonRef,id:f,type:c.value,"aria-haspopup":"listbox","aria-controls":(u=_(l.optionsRef))==null?void 0:u.id,"aria-expanded":l.listboxState.value===0,"aria-labelledby":l.labelRef.value?[(s=_(l.labelRef))==null?void 0:s.id,f].join(" "):void 0,disabled:l.disabled.value===!0?!0:void 0,onKeydown:a,onKeyup:r,onClick:i};return q({ourProps:y,theirProps:p,slot:d,attrs:t,slots:n,name:"ListboxButton"})}}}),fn=O({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-listbox-options-${de()}`}},setup(e,{attrs:t,slots:n,expose:o}){let l=We("ListboxOptions"),a=x(null);o({el:l.optionsRef,$el:l.optionsRef});function r(u){switch(a.value&&clearTimeout(a.value),u.key){case L.Space:if(l.searchQuery.value!=="")return u.preventDefault(),u.stopPropagation(),l.search(u.key);case L.Enter:if(u.preventDefault(),u.stopPropagation(),l.activeOptionIndex.value!==null){let s=l.options.value[l.activeOptionIndex.value];l.select(s.dataRef.value)}l.mode.value===0&&(l.closeListbox(),j(()=>{var s;return(s=_(l.buttonRef))==null?void 0:s.focus({preventScroll:!0})}));break;case Y(l.orientation.value,{vertical:L.ArrowDown,horizontal:L.ArrowRight}):return u.preventDefault(),u.stopPropagation(),l.goToOption(M.Next);case Y(l.orientation.value,{vertical:L.ArrowUp,horizontal:L.ArrowLeft}):return u.preventDefault(),u.stopPropagation(),l.goToOption(M.Previous);case L.Home:case L.PageUp:return u.preventDefault(),u.stopPropagation(),l.goToOption(M.First);case L.End:case L.PageDown:return u.preventDefault(),u.stopPropagation(),l.goToOption(M.Last);case L.Escape:u.preventDefault(),u.stopPropagation(),l.closeListbox(),j(()=>{var s;return(s=_(l.buttonRef))==null?void 0:s.focus({preventScroll:!0})});break;case L.Tab:u.preventDefault(),u.stopPropagation();break;default:u.key.length===1&&(l.search(u.key),a.value=setTimeout(()=>l.clearSearch(),350));break}}let i=He(),c=b(()=>i!==null?(i.value&G.Open)===G.Open:l.listboxState.value===0);return()=>{var u,s,d,f;let p={open:l.listboxState.value===0},{id:y,...v}=e,m={"aria-activedescendant":l.activeOptionIndex.value===null||(u=l.options.value[l.activeOptionIndex.value])==null?void 0:u.id,"aria-multiselectable":l.mode.value===1?!0:void 0,"aria-labelledby":(f=(s=_(l.labelRef))==null?void 0:s.id)!=null?f:(d=_(l.buttonRef))==null?void 0:d.id,"aria-orientation":l.orientation.value,id:y,onKeydown:r,role:"listbox",tabIndex:0,ref:l.optionsRef};return q({ourProps:m,theirProps:v,slot:p,attrs:t,slots:n,features:Pe.RenderStrategy|Pe.Static,visible:c.value,name:"ListboxOptions"})}}}),vn=O({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-listbox.option-${de()}`}},setup(e,{slots:t,attrs:n,expose:o}){let l=We("ListboxOption"),a=x(null);o({el:a,$el:a});let r=b(()=>l.activeOptionIndex.value!==null?l.options.value[l.activeOptionIndex.value].id===e.id:!1),i=b(()=>Y(l.mode.value,{0:()=>l.compare(oe(l.value.value),oe(e.value)),1:()=>oe(l.value.value).some(h=>l.compare(oe(h),oe(e.value)))})),c=b(()=>Y(l.mode.value,{1:()=>{var h;let k=oe(l.value.value);return((h=l.options.value.find(w=>k.some($=>l.compare(oe($),oe(w.dataRef.value)))))==null?void 0:h.id)===e.id},0:()=>i.value})),u=jt(a),s=b(()=>({disabled:e.disabled,value:e.value,get textValue(){return u()},domRef:a}));V(()=>l.registerOption(e.id,s)),le(()=>l.unregisterOption(e.id)),V(()=>{ye([l.listboxState,i],()=>{l.listboxState.value===0&&i.value&&Y(l.mode.value,{1:()=>{c.value&&l.goToOption(M.Specific,e.id)},0:()=>{l.goToOption(M.Specific,e.id)}})},{immediate:!0})}),ve(()=>{l.listboxState.value===0&&r.value&&l.activationTrigger.value!==0&&j(()=>{var h,k;return(k=(h=_(a))==null?void 0:h.scrollIntoView)==null?void 0:k.call(h,{block:"nearest"})})});function d(h){if(e.disabled)return h.preventDefault();l.select(e.value),l.mode.value===0&&(l.closeListbox(),j(()=>{var k;return(k=_(l.buttonRef))==null?void 0:k.focus({preventScroll:!0})}))}function f(){if(e.disabled)return l.goToOption(M.Nothing);l.goToOption(M.Specific,e.id)}let p=Ot();function y(h){p.update(h)}function v(h){p.wasMoved(h)&&(e.disabled||r.value||l.goToOption(M.Specific,e.id,0))}function m(h){p.wasMoved(h)&&(e.disabled||r.value&&l.goToOption(M.Nothing))}return()=>{let{disabled:h}=e,k={active:r.value,selected:i.value,disabled:h},{id:w,value:$,disabled:C,...P}=e,A={id:w,ref:a,role:"option",tabIndex:h===!0?void 0:-1,"aria-disabled":h===!0?!0:void 0,"aria-selected":i.value,disabled:void 0,onClick:d,onFocus:f,onPointerenter:y,onMouseenter:y,onPointermove:v,onMousemove:v,onPointerleave:m,onMouseleave:m};return q({ourProps:A,theirProps:P,slot:k,attrs:n,slots:t,name:"ListboxOption"})}}});var pn=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(pn||{}),mn=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(mn||{});function gn(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let Nt=Symbol("MenuContext");function ze(e){let t=ce(Nt,null);if(t===null){let n=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,ze),n}return t}let hn=O({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(e,{slots:t,attrs:n}){let o=x(1),l=x(null),a=x(null),r=x([]),i=x(""),c=x(null),u=x(1);function s(f=p=>p){let p=c.value!==null?r.value[c.value]:null,y=_t(f(r.value.slice()),m=>_(m.dataRef.domRef)),v=p?y.indexOf(p):null;return v===-1&&(v=null),{items:y,activeItemIndex:v}}let d={menuState:o,buttonRef:l,itemsRef:a,items:r,searchQuery:i,activeItemIndex:c,activationTrigger:u,closeMenu:()=>{o.value=1,c.value=null},openMenu:()=>o.value=0,goToItem(f,p,y){let v=s(),m=Bt(f===M.Specific?{focus:M.Specific,id:p}:{focus:f},{resolveItems:()=>v.items,resolveActiveIndex:()=>v.activeItemIndex,resolveId:h=>h.id,resolveDisabled:h=>h.dataRef.disabled});i.value="",c.value=m,u.value=y??1,r.value=v.items},search(f){let p=i.value!==""?0:1;i.value+=f.toLowerCase();let y=(c.value!==null?r.value.slice(c.value+p).concat(r.value.slice(0,c.value+p)):r.value).find(m=>m.dataRef.textValue.startsWith(i.value)&&!m.dataRef.disabled),v=y?r.value.indexOf(y):-1;v===-1||v===c.value||(c.value=v,u.value=1)},clearSearch(){i.value=""},registerItem(f,p){let y=s(v=>[...v,{id:f,dataRef:p}]);r.value=y.items,c.value=y.activeItemIndex,u.value=1},unregisterItem(f){let p=s(y=>{let v=y.findIndex(m=>m.id===f);return v!==-1&&y.splice(v,1),y});r.value=p.items,c.value=p.activeItemIndex,u.value=1}};return lt([l,a],(f,p)=>{var y;d.closeMenu(),kt(p,St.Loose)||(f.preventDefault(),(y=_(l))==null||y.focus())},b(()=>o.value===0)),te(Nt,d),nt(b(()=>Y(o.value,{0:G.Open,1:G.Closed}))),()=>{let f={open:o.value===0,close:d.closeMenu};return q({ourProps:{},theirProps:e,slot:f,slots:t,attrs:n,name:"Menu"})}}}),yn=O({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-menu-button-${de()}`}},setup(e,{attrs:t,slots:n,expose:o}){let l=ze("MenuButton");o({el:l.buttonRef,$el:l.buttonRef});function a(u){switch(u.key){case L.Space:case L.Enter:case L.ArrowDown:u.preventDefault(),u.stopPropagation(),l.openMenu(),j(()=>{var s;(s=_(l.itemsRef))==null||s.focus({preventScroll:!0}),l.goToItem(M.First)});break;case L.ArrowUp:u.preventDefault(),u.stopPropagation(),l.openMenu(),j(()=>{var s;(s=_(l.itemsRef))==null||s.focus({preventScroll:!0}),l.goToItem(M.Last)});break}}function r(u){switch(u.key){case L.Space:u.preventDefault();break}}function i(u){e.disabled||(l.menuState.value===0?(l.closeMenu(),j(()=>{var s;return(s=_(l.buttonRef))==null?void 0:s.focus({preventScroll:!0})})):(u.preventDefault(),l.openMenu(),gn(()=>{var s;return(s=_(l.itemsRef))==null?void 0:s.focus({preventScroll:!0})})))}let c=at(b(()=>({as:e.as,type:t.type})),l.buttonRef);return()=>{var u;let s={open:l.menuState.value===0},{id:d,...f}=e,p={ref:l.buttonRef,id:d,type:c.value,"aria-haspopup":"menu","aria-controls":(u=_(l.itemsRef))==null?void 0:u.id,"aria-expanded":l.menuState.value===0,onKeydown:a,onKeyup:r,onClick:i};return q({ourProps:p,theirProps:f,slot:s,attrs:t,slots:n,name:"MenuButton"})}}}),bn=O({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-menu-items-${de()}`}},setup(e,{attrs:t,slots:n,expose:o}){let l=ze("MenuItems"),a=x(null);o({el:l.itemsRef,$el:l.itemsRef}),vl({container:b(()=>_(l.itemsRef)),enabled:b(()=>l.menuState.value===0),accept(s){return s.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:s.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(s){s.setAttribute("role","none")}});function r(s){var d;switch(a.value&&clearTimeout(a.value),s.key){case L.Space:if(l.searchQuery.value!=="")return s.preventDefault(),s.stopPropagation(),l.search(s.key);case L.Enter:if(s.preventDefault(),s.stopPropagation(),l.activeItemIndex.value!==null){let f=l.items.value[l.activeItemIndex.value];(d=_(f.dataRef.domRef))==null||d.click()}l.closeMenu(),Ct(_(l.buttonRef));break;case L.ArrowDown:return s.preventDefault(),s.stopPropagation(),l.goToItem(M.Next);case L.ArrowUp:return s.preventDefault(),s.stopPropagation(),l.goToItem(M.Previous);case L.Home:case L.PageUp:return s.preventDefault(),s.stopPropagation(),l.goToItem(M.First);case L.End:case L.PageDown:return s.preventDefault(),s.stopPropagation(),l.goToItem(M.Last);case L.Escape:s.preventDefault(),s.stopPropagation(),l.closeMenu(),j(()=>{var f;return(f=_(l.buttonRef))==null?void 0:f.focus({preventScroll:!0})});break;case L.Tab:s.preventDefault(),s.stopPropagation(),l.closeMenu(),j(()=>pl(_(l.buttonRef),s.shiftKey?he.Previous:he.Next));break;default:s.key.length===1&&(l.search(s.key),a.value=setTimeout(()=>l.clearSearch(),350));break}}function i(s){switch(s.key){case L.Space:s.preventDefault();break}}let c=He(),u=b(()=>c!==null?(c.value&G.Open)===G.Open:l.menuState.value===0);return()=>{var s,d;let f={open:l.menuState.value===0},{id:p,...y}=e,v={"aria-activedescendant":l.activeItemIndex.value===null||(s=l.items.value[l.activeItemIndex.value])==null?void 0:s.id,"aria-labelledby":(d=_(l.buttonRef))==null?void 0:d.id,id:p,onKeydown:r,onKeyup:i,role:"menu",tabIndex:0,ref:l.itemsRef};return q({ourProps:v,theirProps:y,slot:f,attrs:t,slots:n,features:Pe.RenderStrategy|Pe.Static,visible:u.value,name:"MenuItems"})}}}),xn=O({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-menu-item-${de()}`}},setup(e,{slots:t,attrs:n,expose:o}){let l=ze("MenuItem"),a=x(null);o({el:a,$el:a});let r=b(()=>l.activeItemIndex.value!==null?l.items.value[l.activeItemIndex.value].id===e.id:!1),i=jt(a),c=b(()=>({disabled:e.disabled,get textValue(){return i()},domRef:a}));V(()=>l.registerItem(e.id,c)),le(()=>l.unregisterItem(e.id)),ve(()=>{l.menuState.value===0&&r.value&&l.activationTrigger.value!==0&&j(()=>{var v,m;return(m=(v=_(a))==null?void 0:v.scrollIntoView)==null?void 0:m.call(v,{block:"nearest"})})});function u(v){if(e.disabled)return v.preventDefault();l.closeMenu(),Ct(_(l.buttonRef))}function s(){if(e.disabled)return l.goToItem(M.Nothing);l.goToItem(M.Specific,e.id)}let d=Ot();function f(v){d.update(v)}function p(v){d.wasMoved(v)&&(e.disabled||r.value||l.goToItem(M.Specific,e.id,0))}function y(v){d.wasMoved(v)&&(e.disabled||r.value&&l.goToItem(M.Nothing))}return()=>{let{disabled:v}=e,m={active:r.value,disabled:v,close:l.closeMenu},{id:h,...k}=e;return q({ourProps:{id:h,ref:a,role:"menuitem",tabIndex:v===!0?void 0:-1,"aria-disabled":v===!0?!0:void 0,disabled:void 0,onClick:u,onFocus:s,onPointerenter:f,onMouseenter:f,onPointermove:p,onMousemove:p,onPointerleave:y,onMouseleave:y},theirProps:{...n,...k},slot:m,attrs:n,slots:t,name:"MenuItem"})}}}),wn=Symbol("GroupContext"),kn=O({name:"Switch",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"button"},modelValue:{type:Boolean,default:void 0},defaultChecked:{type:Boolean,optional:!0},form:{type:String,optional:!0},name:{type:String,optional:!0},value:{type:String,optional:!0},id:{type:String,default:()=>`headlessui-switch-${de()}`}},inheritAttrs:!1,setup(e,{emit:t,attrs:n,slots:o,expose:l}){let a=ce(wn,null),[r,i]=wt(b(()=>e.modelValue),m=>t("update:modelValue",m),b(()=>e.defaultChecked));function c(){i(!r.value)}let u=x(null),s=a===null?u:a.switchRef,d=at(b(()=>({as:e.as,type:n.type})),s);l({el:s,$el:s});function f(m){m.preventDefault(),c()}function p(m){m.key===L.Space?(m.preventDefault(),c()):m.key===L.Enter&&ml(m.currentTarget)}function y(m){m.preventDefault()}let v=b(()=>{var m,h;return(h=(m=_(s))==null?void 0:m.closest)==null?void 0:h.call(m,"form")});return V(()=>{ye([v],()=>{if(!v.value||e.defaultChecked===void 0)return;function m(){i(e.defaultChecked)}return v.value.addEventListener("reset",m),()=>{var h;(h=v.value)==null||h.removeEventListener("reset",m)}},{immediate:!0})}),()=>{let{id:m,name:h,value:k,form:w,...$}=e,C={checked:r.value},P={id:m,ref:s,role:"switch",type:d.value,tabIndex:0,"aria-checked":r.value,"aria-labelledby":a==null?void 0:a.labelledby.value,"aria-describedby":a==null?void 0:a.describedby.value,onClick:f,onKeyup:p,onKeypress:y};return z(H,[h!=null&&r.value!=null?z(Ne,$t({features:Ge.Hidden,as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:r.value,form:w,name:h,value:k})):null,q({ourProps:P,theirProps:{...n,...ot($,["modelValue","defaultChecked"])},slot:C,attrs:n,slots:o,name:"Switch"})])}}});function Sn(e){let t={called:!1};return(...n)=>{if(!t.called)return t.called=!0,e(...n)}}function qe(e,...t){e&&t.length>0&&e.classList.add(...t)}function je(e,...t){e&&t.length>0&&e.classList.remove(...t)}var et=(e=>(e.Finished="finished",e.Cancelled="cancelled",e))(et||{});function $n(e,t){let n=Oe();if(!e)return n.dispose;let{transitionDuration:o,transitionDelay:l}=getComputedStyle(e),[a,r]=[o,l].map(i=>{let[c=0]=i.split(",").filter(Boolean).map(u=>u.includes("ms")?parseFloat(u):parseFloat(u)*1e3).sort((u,s)=>s-u);return c});return a!==0?n.setTimeout(()=>t("finished"),a+r):t("finished"),n.add(()=>t("cancelled")),n.dispose}function yt(e,t,n,o,l,a){let r=Oe(),i=a!==void 0?Sn(a):()=>{};return je(e,...l),qe(e,...t,...n),r.nextFrame(()=>{je(e,...n),qe(e,...o),r.add($n(e,c=>(je(e,...o,...t),qe(e,...l),i(c))))}),r.add(()=>je(e,...t,...n,...o,...l)),r.add(()=>i("cancelled")),r.dispose}function ke(e=""){return e.split(" ").filter(t=>t.trim().length>1)}let ut=Symbol("TransitionContext");var _n=(e=>(e.Visible="visible",e.Hidden="hidden",e))(_n||{});function Cn(){return ce(ut,null)!==null}function Pn(){let e=ce(ut,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}function Tn(){let e=ce(ct,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}let ct=Symbol("NestingContext");function Ye(e){return"children"in e?Ye(e.children):e.value.filter(({state:t})=>t==="visible").length>0}function Gt(e){let t=x([]),n=x(!1);V(()=>n.value=!0),le(()=>n.value=!1);function o(a,r=$e.Hidden){let i=t.value.findIndex(({id:c})=>c===a);i!==-1&&(Y(r,{[$e.Unmount](){t.value.splice(i,1)},[$e.Hidden](){t.value[i].state="hidden"}}),!Ye(t)&&n.value&&(e==null||e()))}function l(a){let r=t.value.find(({id:i})=>i===a);return r?r.state!=="visible"&&(r.state="visible"):t.value.push({id:a,state:"visible"}),()=>o(a,$e.Unmount)}return{children:t,register:l,unregister:o}}let Ut=Pe.RenderStrategy,tt=O({props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:n,slots:o,expose:l}){let a=x(0);function r(){a.value|=G.Opening,t("beforeEnter")}function i(){a.value&=~G.Opening,t("afterEnter")}function c(){a.value|=G.Closing,t("beforeLeave")}function u(){a.value&=~G.Closing,t("afterLeave")}if(!Cn()&&gl())return()=>z(Ht,{...e,onBeforeEnter:r,onAfterEnter:i,onBeforeLeave:c,onAfterLeave:u},o);let s=x(null),d=b(()=>e.unmount?$e.Unmount:$e.Hidden);l({el:s,$el:s});let{show:f,appear:p}=Pn(),{register:y,unregister:v}=Tn(),m=x(f.value?"visible":"hidden"),h={value:!0},k=de(),w={value:!1},$=Gt(()=>{!w.value&&m.value!=="hidden"&&(m.value="hidden",v(k),u())});V(()=>{let W=y(k);le(W)}),ve(()=>{if(d.value===$e.Hidden&&k){if(f.value&&m.value!=="visible"){m.value="visible";return}Y(m.value,{hidden:()=>v(k),visible:()=>y(k)})}});let C=ke(e.enter),P=ke(e.enterFrom),A=ke(e.enterTo),U=ke(e.entered),J=ke(e.leave),be=ke(e.leaveFrom),ie=ke(e.leaveTo);V(()=>{ve(()=>{if(m.value==="visible"){let W=_(s);if(W instanceof Comment&&W.data==="")throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}})});function xe(W){let we=h.value&&!p.value,re=_(s);!re||!(re instanceof HTMLElement)||we||(w.value=!0,f.value&&r(),f.value||c(),W(f.value?yt(re,C,P,A,U,me=>{w.value=!1,me===et.Finished&&i()}):yt(re,J,be,ie,U,me=>{w.value=!1,me===et.Finished&&(Ye($)||(m.value="hidden",v(k),u()))})))}return V(()=>{ye([f],(W,we,re)=>{xe(re),h.value=!1},{immediate:!0})}),te(ct,$),nt(b(()=>Y(m.value,{visible:G.Open,hidden:G.Closed})|a.value)),()=>{let{appear:W,show:we,enter:re,enterFrom:me,enterTo:I,entered:N,leave:ee,leaveFrom:se,leaveTo:Me,...ge}=e,el={ref:s},tl={...ge,...p.value&&f.value&&hl.isServer?{class:ae([n.class,ge.class,...C,...P])}:{}};return q({theirProps:tl,ourProps:el,slot:{},slots:o,attrs:n,features:Ut,visible:m.value==="visible",name:"TransitionChild"})}}}),En=tt,Ht=O({inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:n,slots:o}){let l=He(),a=b(()=>e.show===null&&l!==null?(l.value&G.Open)===G.Open:e.show);ve(()=>{if(![!0,!1].includes(a.value))throw new Error('A <Transition /> is used but it is missing a `:show="true | false"` prop.')});let r=x(a.value?"visible":"hidden"),i=Gt(()=>{r.value="hidden"}),c=x(!0),u={show:a,appear:b(()=>e.appear||!c.value)};return V(()=>{ve(()=>{c.value=!1,a.value?r.value="visible":Ye(i)||(r.value="hidden")})}),te(ct,i),te(ut,u),()=>{let s=ot(e,["show","appear","unmount","onBeforeEnter","onBeforeLeave","onAfterEnter","onAfterLeave"]),d={unmount:e.unmount};return q({ourProps:{...d,as:"template"},theirProps:{},slot:{},slots:{...o,default:()=>[z(En,{onBeforeEnter:()=>t("beforeEnter"),onAfterEnter:()=>t("afterEnter"),onBeforeLeave:()=>t("beforeLeave"),onAfterLeave:()=>t("afterLeave"),...n,...d,...s},o.default)]},attrs:{},features:Ut,visible:r.value==="visible",name:"Transition"})}}});const Rn=e=>{let t=document.body;return e.appendTo&&(typeof e.appendTo=="string"&&(t=document.querySelector(e.appendTo)),e.appendTo instanceof HTMLElement&&(t=e.appendTo),t instanceof HTMLElement||(t=document.body)),t},Ln=(e,t,n,o=null)=>{const l=T(e,t);return l.appContext=o,Pt(l,n),Rn(t).appendChild(n),l},Ue=e=>{var a,r;const t=(a=Je())==null?void 0:a.appContext;if(t){const i=(r=Je())==null?void 0:r.provides;Reflect.set(t,"provides",{...t.provides,...i})}const n=document.createElement("div"),o=()=>{var i;Pt(null,n),(i=n.parentNode)==null||i.removeChild(n)},l=i=>{var s;if(Reflect.has(i,"visible")||(i.visible=!0),typeof i.onClose!="function")i.onClose=o;else{const d=i.onClose;i.onClose=()=>{d(),o()}}const c=Ln(e,i,n,t),u=(s=c.component)==null?void 0:s.proxy;for(const d in i)Reflect.has(i,d)&&!Reflect.has(u.$props,d)&&(u[d]=i[d]);return c};return l.close=o,l},K=(e,t)=>{const n=(t==null?void 0:t.target)??window,o=navigator.userAgent.toLowerCase().includes("mac");let l=!1,a=t==null?void 0:t.key;const r=()=>{const u=t??{},s=[];return u.ctrlKey&&s.push(o?"Cmd":"Ctrl"),u.shiftKey&&s.push(o?"Option":"Shift"),a&&s.push(a),s},c=yl(n,"keydown",u=>{u.stopPropagation();const s=t??{};if(!(l||!a)&&(a=typeof a=="string"?[a]:a,a.map(d=>d.toLowerCase()).includes(u.key.toLowerCase())&&An(s,u))){u.preventDefault();const d=e();if(typeof d!="function")return;const f=E(n)??window,p=y=>{y.preventDefault(),d(),f.removeEventListener("keyup",p)};f.addEventListener("keyup",p)}});return e.hotKey=r(),e.directions=(t==null?void 0:t.directions)??"",e.removeListener=c,e.pause=()=>l=!0,e.unpause=()=>l=!1,e},An=(e,t)=>{const n=e.ctrlKey??!1,o=e.shiftKey??!1;if(e.exact)return(n===t.metaKey||n===t.ctrlKey)&&o===t.shiftKey;const l=[];return l.push(n===t.metaKey||n===t.ctrlKey),l.push(o===t.shiftKey),l.every(a=>a)},Dn=(e,t,n)=>{bl(window,e,o=>{var a;const l=o.target;(a=t.value)!=null&&a.contains(l)||n()})},ue=(e,t)=>{const n=ce(e,t);if(!n)throw new Error(`Could not resolve ${e.description}`);return n},Wt=(e,t)=>{const n=Je();return(n==null?void 0:n.provides[e])||ce(e,t)},Bn=(e,t)=>{const n=Wt(e,t);if(!n)throw new Error(`Could not resolve ${e.description}`);return n},zt=Symbol("FORM_STATE"),Ie=Symbol("PictodeAppKey"),On=Symbol("PictodePluginKey"),dt=Symbol("PictodeSelectedKey"),Yt=Symbol("PictodePanelFormKey"),Re=Symbol("PictodeHotKeyListKey"),In=O({__name:"Container",props:{config:{},model:{},prop:{default:""},labelWidth:{},size:{default:"small"}},emits:["change"],setup(e,{emit:t}){const n=e,o=ue(zt),{config:l,prop:a,model:r}=Tt(n),i=b(()=>l.value.name??""),c=b(()=>{let d="";if(i.value)d=i.value;else return a.value;return`${a.value}${a.value?".":""}${d}`}),u=b(()=>{let{type:d}=l.value;return d==="form"?"":d==null?void 0:d.replace(/([A-Z])/g,"-$1").toLowerCase()}),s=async(d,f)=>{let p=f;try{typeof l.value.onChange=="function"&&(p=await l.value.onChange(o,p,{model:r.value,config:l.value,prop:d}))}catch(y){console.error(y)}Reflect.get(r.value,d)!==p&&(Reflect.set(r.value,d,p),t("change",r.value))};return(d,f)=>(S(),B("div",{class:ae([`${d.labelWidth}`=="0"||!E(l).label?"hidden":"","select-none","flex flex-col content-start gap-1 px-1 py-2"])},[g("label",{style:Et({width:`${d.labelWidth}px`}),class:"text-start text-sm text-gray-600 dark:text-gray-300"},F(d.$t(E(l).label??"")),5),(S(),X(xl(u.value),{key:E(l).name,class:ae(E(l).class),model:E(r),config:E(l),prop:c.value,onChange:s},null,40,["class","model","config","prop"]))],2))}}),Mn=["model","size"],Fn=O({__name:"Form",props:{model:{default:()=>({})},config:{default:()=>[]},labelWidth:{default:"200px"},disabled:{type:Boolean,default:!1},height:{default:"auto"},size:{default:"default"},inline:{type:Boolean,default:!1}},emits:["change","update:modelValue"],setup(e,{expose:t,emit:n}){const o=e,{config:l,model:a}=Tt(o),r=x(),i=x(a),c=wl({config:l.value,model:i.value}),u=()=>n("change",i.value),s=async()=>{var f;try{return await((f=r.value)==null?void 0:f.validate()),oe(i.value)}catch{throw new Error}},d=()=>{var f;return(f=r.value)==null?void 0:f.resetFields()};return te(zt,c),t({formModel:i,formState:c,resetForm:d,submitForm:s}),(f,p)=>(S(),B("form",{ref_key:"formRef",ref:r,model:i.value,size:f.size,onChange:u},[(S(!0),B(H,null,Q(o.config,(y,v)=>(S(),X(In,{key:v,config:y,model:i.value,onChange:u},null,8,["config","model"]))),128))],40,Mn))}}),Kn={class:"flex justify-center items-center"},jn=["name","title"],Vn={class:"cursor-pointer"},Z=O({__name:"Button",props:{icon:{},text:{}},setup(e){return(t,n)=>(S(),B("button",kl({type:"button"},t.$attrs),[Te(t.$slots,"default",{},()=>[g("label",Kn,[t.icon?(S(),B("iconpark-icon",{key:0,name:t.icon,title:t.$attrs.title,class:"cursor-pointer"},null,8,jn)):Ee("",!0),g("span",Vn,F(t.text),1)])])],16))}});function Nn(e,t){return S(),B("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[g("path",{"fill-rule":"evenodd",d:"M19.916 4.626a.75.75 0 01.208 1.04l-9 13.5a.75.75 0 01-1.154.114l-6-6a.75.75 0 011.06-1.06l5.353 5.353 8.493-12.739a.75.75 0 011.04-.208z","clip-rule":"evenodd"})])}function Xt(e,t){return S(),B("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[g("path",{"fill-rule":"evenodd",d:"M11.47 4.72a.75.75 0 011.06 0l3.75 3.75a.75.75 0 01-1.06 1.06L12 6.31 8.78 9.53a.75.75 0 01-1.06-1.06l3.75-3.75zm-3.75 9.75a.75.75 0 011.06 0L12 17.69l3.22-3.22a.75.75 0 111.06 1.06l-3.75 3.75a.75.75 0 01-1.06 0l-3.75-3.75a.75.75 0 010-1.06z","clip-rule":"evenodd"})])}const Gn={class:"relative mt-1"},Un={class:"relative w-full cursor-pointer rounded ring-1 ring-black ring-opacity-5 p-0.5 py-2 pl-3 pr-10 text-left focus:outline-none focus-visible:border-indigo-500 focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75 focus-visible:ring-offset-2 sm:text-sm"},Hn={class:"block truncate"},Wn={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},qt=O({__name:"Select",props:{modelValue:{}},emits:["update:modelValue","change"],setup(e,{emit:t}){const n=e,o=b({get(){return n.modelValue},set(l){l!==n.modelValue&&(t("update:modelValue",l),t("change",l))}});return(l,a)=>(S(),X(E(cn),{modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=r=>o.value=r)},{default:D(()=>[g("div",Gn,[T(E(dn),{class:"relative w-full"},{default:D(()=>[Te(l.$slots,"listbox",{selected:o.value},()=>[g("div",Un,[g("span",Hn,F(o.value),1),g("span",Wn,[T(E(Xt),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})])])])]),_:3}),T(it,{"leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:D(()=>[T(E(fn),null,{default:D(()=>[Te(l.$slots,"default")]),_:3})]),_:3})])]),_:3},8,["modelValue"]))}}),zn={key:0,class:"absolute inset-y-0 left-0 flex items-center pl-3 text-blue-400"},Jt=O({__name:"SelectOption",props:{value:{type:[String,Number,Boolean]},label:{type:[String,Number,Boolean]}},setup(e){return(t,n)=>(S(),X(E(vn),{value:t.value},{default:D(({active:o,selected:l})=>[Te(t.$slots,"default",{active:o,selected:l,item:t.value},()=>[g("li",{class:ae([o?"bg-gray-200 dark:bg-navyBlue-100":"","relative rounded-lg cursor-pointer select-none p-2 pl-10 text-gray-900 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-navyBlue-100"])},[g("span",{class:ae([l?"font-medium":"font-normal","block truncate"])},F(t.label),3),l?(S(),B("span",zn,[T(E(Nn),{class:"h-5 w-5","aria-hidden":"true"})])):Ee("",!0)],2)])]),_:3},8,["value"]))}});class Yn extends _l{constructor(n){super(n);R(this,"className","Iframe");R(this,"iframeElement",document.createElement("iframe"));this.iframeElement.src=n.src??"",this.iframeElement.style.border="none",this.iframeElement.style.width="100%",this.iframeElement.style.height="100%",this.iframeElement.style.display="block",this.iframeElement.style.margin="0",this.iframeElement.style.boxSizing="border-box",super.setContent(this.iframeElement)}_setAttr(n,o){n==="src"&&this.iframeElement?this.iframeElement.src=o:super._setAttr(n,o)}}const ne=(e=[])=>{function t(o){return o.charAt(0).toUpperCase()+o.slice(1)}function n(o){if(typeof o=="string")return t(o);if(Array.isArray(o))return o.map(l=>t(l)).join("/")}return Array.isArray(e)?e.map(o=>n(o)).join("+"):t(e)},Xn=(e=[])=>{function t(o){return o===" "?"Space":o.charAt(0).toUpperCase()+o.slice(1)}function n(o){if(typeof o=="string")return t(o);if(Array.isArray(o))return o.map(l=>t(l)).join(" / ")}return Array.isArray(e)?e.map(o=>n(o)):[t(e)]},qn=["onClick"],Jn={class:"w-full grid grid-cols-[1rem_1fr_1.5fr] gap-2 text-sm font-medium select-none"},Zn=["name"],Qn=O({__name:"ContextMenu",props:{visible:{type:Boolean},x:{},y:{},menuGroups:{default:()=>[]}},emits:["update:visible","close"],setup(e,{emit:t}){const n=e,o=x(null),l=b({get(){return n.visible},set(u){t("update:visible",u),u||t("close")}}),a=b(()=>{const u=Math.max(n.x-2,0),s=Math.max(n.y-2,0),d=12,f=224,p=n.menuGroups.flat().length*40,y=u+f-window.innerWidth+d,v=s+p-window.innerHeight+d;return{left:y>0?`${u-y}px`:`${u}px`,top:v>0?`${s-v}px`:`${s}px`}}),r=b(()=>n.menuGroups.filter(u=>u.length));Dn("mousedown",o,()=>{l.value=!1});const i=u=>{u.preventDefault()},c=u=>{var s;u.disable||((s=u.action)==null||s.call(u),l.value=!1)};return V(()=>{o.value&&o.value.addEventListener("contextmenu",i,!1)}),le(()=>{o.value&&o.value.removeEventListener("contextmenu",i,!1)}),(u,s)=>(S(),X(it,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"translate-y-1 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-1 opacity-0"},{default:D(()=>[l.value?(S(),B("div",{key:0,style:Et(a.value),class:"absolute w-screen max-w-sm transform"},[g("div",{ref_key:"popoverRef",ref:o,class:"absolute w-fit py-1 divide-y rounded-sm bg-gray-50 dark:bg-navyBlue-200 shadow-md ring-1 ring-gray-600 dark:ring-navyBlue-100 ring-opacity-5 focus:outline-none"},[(S(!0),B(H,null,Q(r.value,(d,f)=>(S(),B("div",{key:f,class:"py-1"},[(S(!0),B(H,null,Q(d,(p,y)=>(S(),B("div",{key:y,class:ae(["flex items-center py-2 px-4 transition duration-150 ease-in-out",[p.disable?"text-gray-300 dark:text-slate-500 cursor-default":"text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-navyBlue-100 cursor-pointer"]]),onClick:v=>c(p)},[g("div",Jn,[p.icon?(S(),B("iconpark-icon",{key:0,name:p.icon},null,8,Zn)):Ee("",!0),g("p",null,F(u.$t(p.label)),1),g("p",{class:ae([p.disable?"":"text-gray-400 dark:text-slate-400","text-end text-xs"])},F(p.hotKey),3)])],10,qn))),128))]))),128))],512)],4)):Ee("",!0)]),_:1}))}});const eo=(e,t)=>{const n=Ue(Qn),{moveDown:o,moveUp:l,moveBottom:a,moveTop:r,deleteNode:i,selectAll:c,resetStage:u,undo:s,redo:d,makeGroup:f,decomposeGroup:p}=Bn(Re),y=({event:v})=>{v.evt.preventDefault();let m=!1;const h=e.findTopGroup(v.target);if(v.target instanceof pe.Stage)m=!0;else if(!t.value.find(J=>J.id()===v.target.id()||J.id()===(h==null?void 0:h.id()))){const J=h??v.target;e.select(J)}const k=t.value.length&&!m?[{icon:"sent-to-back",label:o.directions,hotKey:ne(o.hotKey),action:o},{icon:"bring-to-front",label:l.directions,hotKey:ne(l.hotKey),action:l},{icon:"bring-to-front-one",label:a.directions,hotKey:ne(a.hotKey),action:a},{icon:"send-to-back",label:r.directions,hotKey:ne(r.hotKey),action:r}]:[],w=t.value.length>1&&!m?[{icon:"group",label:f.directions,hotKey:ne(f.hotKey),action:f}]:[],$=t.value.length===1&&t.value[0]instanceof pe.Group?[{icon:"ungroup",label:p.directions,hotKey:ne(p.hotKey),action:p}]:[],C=t.value.length&&!m?[{icon:"delete-one",label:i.directions,hotKey:ne(i.hotKey),action:i}]:[],P=m||t.value.length===0?[{icon:"full-selection",label:c.directions,hotKey:ne(c.hotKey),action:c},{icon:"clear",label:u.directions,hotKey:ne(u.hotKey),action:u}]:[],A=[{icon:"undo",label:s.directions,hotKey:ne(s.hotKey),disable:!e.canUndo(),action:s},{icon:"redo",label:d.directions,hotKey:ne(d.hotKey),disable:!e.canRedo(),action:d}],U=[P,k,w,$,A,C];n({x:v.evt.clientX,y:v.evt.clientY,menuGroups:U})};V(()=>e.on("mouse:contextmenu",y)),le(()=>e.off("mouse:contextmenu",y))},to=eo,lo=g("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),no={class:"fixed inset-0 overflow-y-auto"},oo={class:"flex min-h-full items-center justify-center p-4 text-center"},ft=O({__name:"Dialog",props:{visible:{type:Boolean}},emits:["update:visible","close"],setup(e,{emit:t}){const n=e,o=b({get(){return n.visible},set(a){t("update:visible",a),a||t("close")}});function l(){o.value=!1}return(a,r)=>(S(),X(E(Ht),{appear:"",show:o.value,as:"template"},{default:D(()=>[T(E(en),{as:"div",class:"relative z-10",onClose:l},{default:D(()=>[T(E(tt),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:D(()=>[lo]),_:1}),g("div",no,[g("div",oo,[T(E(tt),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:D(()=>[T(E(tn),{class:"rounded-lg bg-white dark:bg-navyBlue-200 p-4 text-left dark:text-gray-300 align-middle shadow-xl transition-all w-auto"},{default:D(()=>[T(E(ln),{class:"grid grid-cols-[1fr_2rem] py-2"},{default:D(()=>[g("div",null,[Te(a.$slots,"title")]),T(Z,{class:"hover:bg-none",icon:"close",onClick:l})]),_:3}),Te(a.$slots,"default")]),_:3})]),_:3})])])]),_:3})]),_:3},8,["show"]))}}),ao={as:"h3",class:"text-lg font-medium leading-6"},io={class:"flex flex-col"},ro={class:"mt-3"},so={class:"text-sm text-gray-500"},uo={class:"mt-4 flex flex-row justify-between"},co=O({__name:"MessageBox",props:{visible:{type:Boolean},title:{},message:{}},emits:["update:visible","close","submit"],setup(e,{emit:t}){const n=e,o=b({get(){return n.visible},set(r){t("update:visible",r),r||t("close")}}),l=()=>{o.value=!1},a=()=>{t("submit"),l()};return(r,i)=>(S(),X(ft,{visible:o.value,onClose:l},{title:D(()=>[g("div",ao,F(r.$t(r.title)),1)]),default:D(()=>[g("div",io,[g("div",ro,[g("p",so,F(r.$t(r.message)),1)]),g("div",uo,[T(Z,{class:"inline-flex justify-center rounded-md border border-transparent bg-red-400 px-4 py-2 text-sm font-medium text-red-50 hover:bg-red-500 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2",title:r.$t("关闭"),text:r.$t("关闭"),onClick:l},null,8,["title","text"]),T(Z,{class:"inline-flex justify-center rounded-md border border-transparent bg-blue-400 px-4 py-2 text-sm font-medium text-blue-50 hover:bg-blue-500 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",title:r.$t("确认"),text:r.$t("确认"),onClick:a},null,8,["title","text"])])])]),_:1},8,["visible"]))}}),fo=()=>{const e=x(!1),t=x();return{loading:e,error:t,execute:async(o=["*"],l=!1)=>{try{return e.value=!0,await Dt(o,l)}catch(a){throw(a instanceof Cl||a instanceof Pl)&&(t.value=a),a}finally{e.value=!1}}}},vo=()=>{const e=x(!1),t=x(),{error:n,execute:o}=fo();return ye(()=>n.value,a=>{t.value=a}),{loading:e,error:t,execute:async(a=["*"])=>{try{e.value=!0;const r=await o(a)??[],i=new FileReader;return new Promise((c,u)=>{i.onload=({target:s})=>{c(s==null?void 0:s.result)},i.onerror=s=>{t.value=s,u(t.value)},i.readAsText(r[0])})}catch(r){t.value=r}finally{e.value=!1}}}},po=g("span",{class:"sr-only"},"Enable notifications",-1),mo=O({__name:"Switch",props:{modelValue:{type:Boolean}},emits:["change","update:modelValue"],setup(e,{emit:t}){const n=e,o=b({get(){return n.modelValue},set(l){l!==n.modelValue&&(t("update:modelValue",l),t("change",l))}});return(l,a)=>(S(),X(E(kn),{modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=r=>o.value=r),class:ae([o.value?"bg-blue-400":"bg-gray-200","relative inline-flex h-6 w-11 items-center rounded-full"])},{default:D(()=>[po,g("span",{class:ae([o.value?"translate-x-6":"translate-x-1","inline-block h-4 w-4 transform rounded-full bg-white transition"])},null,2)]),_:1},8,["modelValue","class"]))}});var Be=(e=>(e.HTML="text/html",e.CSS="text/css",e.JPEG="image/jpeg",e.PNG="image/png",e.GIF="image/gif",e.MPEG="audio/mpeg",e.OGG="audio/ogg",e.MP4="video/mp4",e.JSON="application/json",e.JAVASCRIPT="application/javascript",e.ECMASCRIPT="application/ecmascript",e.EXCEL="application/vnb.ms-excel",e.CSV="application/x-csv",e.ZIP="application/zip",e.TGZ="application/x-gtar",e.TAR_GZ="application/x-gzip",e.XML="text/xml",e.TEXT="text/plain",e.SVG="image/svg+xml",e))(Be||{});class go extends Tl{constructor(t,n){super(`${t} 导出失败`,{cause:n.cause})}}const Zt=(e,t="file",n=Be.TEXT,o="utf-8",l=!1)=>{const a=x(!1),r=x();return{execute:async c=>{a.value=!0,typeof t=="function"&&(t=t(c));try{const u=await Promise.resolve(e(c)),s=document.createElement("a");if(l)s.href=u;else{const d=new Blob([u],{type:`${n};charset=${o}`});s.href=window.URL.createObjectURL(d)}s.download=t,s.click(),window.URL.revokeObjectURL(s.href)}catch(u){throw r.value=new go(t,u),r.value}finally{a.value=!1}},loading:a,error:r}},ho={class:"text-lg"},yo={class:"max-w-5xl min-w-fit flex flex-row justify-between transform overflow-hidden"},bo={class:"flex items-center h-96 w-96"},xo={class:"w-full h-full flex flex-grow justify-center bg-fixed rounded-md p-1",style:{"background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMUlEQVQ4T2NkYGAQYcAP3uCTZhw1gGGYhAGBZIA/nYDCgBDAm9BGDWAAJyRCgLaBCAAgXwixzAS0pgAAAABJRU5ErkJggg==)"}},wo=["src"],ko={class:"flex flex-col flex-wrap w-96 min-w-max gap-6 grow ml-6 antialiased p-2"},So={class:"flex flex-row justify-between items-center"},$o={class:"flex flex-row justify-between items-center"},_o={class:"flex flex-grow justify-around flex-wrap"},Co={class:"flex flex-row justify-between items-center"},Po={class:"relative w-full cursor-pointer rounded-lg ring-1 ring-slate-950 dark:ring-navyBlue-100 py-2 pl-2 pr-6 text-left focus:outline-none focus-visible:border-indigo-500 focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75 focus-visible:ring-offset-2 sm:text-sm"},To={class:"block truncate"},Eo={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},Ro={class:"absolute mt-3 max-h-60 w-fit rounded-lg bg-white dark:bg-navyBlue-200 py-1 text-base shadow-lg ring-1 ring-slate-950 dark:ring-navyBlue-100 focus:outline-none sm:text-sm"},Lo={class:"grow flex flex-col justify-end"},Ao=O({__name:"ExportImageDialog",props:{visible:{type:Boolean}},emits:["update:visible","close"],setup(e,{emit:t}){const n=e,o=ue(Ie),l=ue(dt),a=b({get(){return n.visible},set(v){t("update:visible",v),v||t("close")}}),r=[{label:"PNG",value:Be.PNG,format:"png"},{label:"JPEG",value:Be.JPEG,format:"jpeg"}],i=[1,2,3],c=x(!0),u=x(2),s=x(r[0].value),d=x(""),f=()=>{a.value=!1},p=async()=>{const{dataURL:v}=await o.toDataURL(l.value,{pixelRatio:u.value,mimeType:s.value,haveBackground:c.value});d.value=v},y=async()=>{const{execute:v}=Zt(()=>d.value,()=>{var m;return`Pictode-${new Date}.${(m=r.find(h=>h.value===s.value))==null?void 0:m.format}`},s.value,"utf-8",!0);await v(),a.value=!1};return V(()=>{j(()=>{p()})}),(v,m)=>(S(),X(ft,{visible:a.value,onClose:f},{title:D(()=>[g("div",ho,F(v.$t("导出图片")),1)]),default:D(()=>[g("div",yo,[g("div",bo,[g("div",xo,[g("img",{src:d.value,class:"object-contain max-w-full max-h-full"},null,8,wo)])]),g("div",ko,[g("div",So,[g("label",null,F(v.$t("背景")),1),T(mo,{modelValue:c.value,"onUpdate:modelValue":m[0]||(m[0]=h=>c.value=h),onChange:p},null,8,["modelValue"])]),g("div",$o,[g("label",null,F(v.$t("缩放比")),1),T(E(Rt),{modelValue:u.value,"onUpdate:modelValue":m[1]||(m[1]=h=>u.value=h),class:"rounded-lg ring-1 w-24 ring-slate-950 dark:ring-navyBlue-100 p-0.5",onChange:p},{default:D(()=>[g("div",_o,[(S(),B(H,null,Q(i,(h,k)=>T(E(Lt),{key:k,value:h,class:"font-mono text-xs"},{default:D(({checked:w})=>[g("div",{class:ae(["rounded-lg inline-flex items-center relative cursor-pointer select-none p-2",w?"bg-blue-500":"hover:bg-gray-200 dark:hover:bg-navyBlue-100"])},F(`${h}x`),3)]),_:2},1032,["value"])),64))])]),_:1},8,["modelValue"])]),g("div",Co,[g("label",null,F(v.$t("图片格式")),1),T(qt,{modelValue:s.value,"onUpdate:modelValue":m[2]||(m[2]=h=>s.value=h),class:"w-24",onChange:p},{listbox:D(()=>{var h;return[g("div",Po,[g("span",To,F((h=r.find(k=>k.value===s.value))==null?void 0:h.label),1),g("span",Eo,[T(E(Xt),{class:"h-3 w-3 text-gray-400","aria-hidden":"true"})])])]}),default:D(()=>[g("div",Ro,[(S(),B(H,null,Q(r,({label:h,value:k},w)=>T(Jt,{key:w,value:k,label:h,class:"p-1 w-24"},null,8,["value","label"])),64))])]),_:1},8,["modelValue"])]),g("div",Lo,[T(Z,{class:"inline-flex justify-center rounded-md border border-transparent px-4 py-2 text-sm font-medium bg-blue-400 text-blue-50",title:v.$t("下载"),text:v.$t("下载"),onClick:y},null,8,["title","text"])])])])]),_:1},8,["visible"]))}}),Do=(e,t,n)=>{const o=Wt(Re,null);if(o)return o;const l=Ue(co),a=Ue(Ao),{execute:r}=vo(),i={open:K(async()=>{const c=await r([".pictode"]);c&&t.fromJSON(c)},{key:"o",directions:"打开",exact:!0,ctrlKey:!0,target:e}),exportImg:K(()=>{a({})},{key:"e",directions:"导出图片",exact:!0,ctrlKey:!0,shiftKey:!0,target:e}),moveDown:K(()=>{t.moveDown(...n.value)},{key:"[",directions:"下移一层",exact:!0,ctrlKey:!0,target:e}),moveUp:K(()=>{t.moveUp(...n.value)},{key:"]",directions:"上移一层",exact:!0,ctrlKey:!0,target:e}),moveBottom:K(()=>{t.moveBottom(...n.value)},{key:"[",directions:"置于底层",exact:!0,ctrlKey:!0,shiftKey:!0,target:e}),moveTop:K(()=>{t.moveTop(...n.value)},{key:"]",directions:"置于顶层",exact:!0,ctrlKey:!0,shiftKey:!0,target:e}),deleteNode:K(()=>{t.remove(...n.value)},{key:["delete","backspace"],directions:"删除",target:e}),selectAll:K(()=>{const c=t.isPluginEnable("selectorPlugin");t.triggerSelector(!0),t.selectAll(),t.triggerSelector(c)},{key:"a",directions:"全部选中",exact:!0,ctrlKey:!0,target:e}),resetStage:K(()=>{l({title:"清除画布",message:"将会清空画布内容，是否继续？",onSubmit:()=>{t.clear(),l.close()}})},{key:"r",directions:"重置画布",exact:!0,ctrlKey:!0,target:e}),undo:K(()=>{t.undo()},{key:"z",directions:"撤销",exact:!0,ctrlKey:!0,target:e}),redo:K(()=>{t.redo()},{key:"y",directions:"重做",exact:!0,ctrlKey:!0,target:e}),stageDrag:K(()=>(t.triggerPanning(!0),()=>{t.triggerPanning(!1)}),{key:" ",directions:"移动画布",target:e}),mouseWheel:K(()=>(t.triggerMouseWheel(!0),()=>{t.triggerMouseWheel(!1)}),{key:["Control","Meta"],directions:"缩放画布",target:e}),makeGroup:K(()=>{const c=t.makeGroup(n.value);Array.isArray(c)||t.select(c)},{key:"g",directions:"组合",ctrlKey:!0,shiftKey:!0,exact:!0,target:e}),decomposeGroup:K(()=>{const c=n.value[0];c instanceof pe.Group&&t.decomposeGroup(c)},{key:"j",directions:"解除组合",ctrlKey:!0,shiftKey:!0,exact:!0,target:e}),alignLeft:K(()=>{n.value.length<1||t.alignLeft(n.value)},{key:"a",directions:"左对齐",shiftKey:!0,target:e}),alignCenterX:K(()=>{n.value.length<1||t.alignCenterX(n.value)},{key:"h",directions:"水平居中",shiftKey:!0,target:e}),alignRight:K(()=>{n.value.length<1||t.alignRight(n.value)},{key:"d",directions:"右对齐",shiftKey:!0,target:e}),alignTop:K(()=>{n.value.length<1||t.alignTop(n.value)},{key:"w",directions:"顶对齐",shiftKey:!0,target:e}),alignCenterY:K(()=>{n.value.length<1||t.alignCenterY(n.value)},{key:"v",directions:"垂直居中",shiftKey:!0,target:e}),alignBottom:K(()=>{n.value.length<1||t.alignBottom(n.value)},{key:"s",directions:"底对齐",shiftKey:!0,target:e}),distributeX:K(()=>{n.value.length<2||t.dispersionX(n.value)},{key:"h",directions:"水平分布",ctrlKey:!0,shiftKey:!0,target:e}),distributeY:K(()=>{n.value.length<2||t.dispersionY(n.value)},{key:"v",directions:"垂直分布",ctrlKey:!0,shiftKey:!0,target:e})};return te(Re,i),i},Bo=Do,Oo={bindTool:["ellipseTool"],bindShape:["Ellipse"],formConfig:[{name:"stroke",label:"描边",type:"Color"},{name:"fill",label:"填充",type:"Color"},{name:"strokeWidth",label:"描边宽度",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:2,title:"细"},{label:"line-2",value:4,title:"粗"},{label:"line-3",value:8,title:"特粗"}]},{name:"dash",label:"边框样式",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:[],title:"实线"},{label:"dotted-line-2",value:[12,8],title:"虚线"},{label:"dotted-line-1",value:[6,4],title:"点虚线"}]},{name:"opacity",label:"透明度",type:"Slider"}],model:{stroke:"#000",fill:"#ffffff",strokeWidth:2,dash:[],opacity:1}},Io={bindTool:["iframeTool"],bindShape:["Iframe"],formConfig:[{name:"src",label:"网址",type:"Texts"},{name:"stroke",label:"描边",type:"Color"},{name:"strokeWidth",label:"描边宽度",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:2,title:"细"},{label:"line-2",value:4,title:"粗"},{label:"line-3",value:8,title:"特粗"}]},{name:"dash",label:"边框样式",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:[],title:"实线"},{label:"dotted-line-2",value:[12,8],title:"虚线"},{label:"dotted-line-1",value:[6,4],title:"点虚线"}]},{name:"opacity",label:"透明度",type:"Slider"}],model:{src:"https://cn.vuejs.org/",stroke:"#000000",strokeWidth:2,dash:[],opacity:1}},Mo={bindTool:["imageTool"],bindShape:["Image"],formConfig:[{name:"stroke",label:"描边",type:"Color"},{name:"strokeWidth",label:"描边宽度",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:2,title:"细"},{label:"line-2",value:4,title:"粗"},{label:"line-3",value:8,title:"特粗"}]},{name:"dash",label:"边框样式",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:[],title:"实线"},{label:"dotted-line-2",value:[12,8],title:"虚线"},{label:"dotted-line-1",value:[6,4],title:"点虚线"}]},{name:"opacity",label:"透明度",type:"Slider"}],model:{stroke:"#ffffff00",strokeWidth:2,dash:[],opacity:1}},Fo={bindTool:["lineTool","drawingTool"],bindShape:["Line"],formConfig:[{name:"stroke",label:"描边",type:"Color"},{name:"strokeWidth",label:"描边宽度",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:2,title:"细"},{label:"line-2",value:4,title:"粗"},{label:"line-3",value:8,title:"特粗"}]},{name:"tension",label:"边角",type:"RadioGroup",optionType:"icon",options:[{label:"node-flat",value:0,title:"直角"},{label:"node-round",value:.4,title:"圆角"}]},{name:"dash",label:"边框样式",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:[],title:"实线"},{label:"dotted-line-2",value:[12,8],title:"虚线"},{label:"dotted-line-1",value:[6,4],title:"点虚线"}]},{name:"opacity",label:"透明度",type:"Slider"}],model:{stroke:"#000000",strokeWidth:2,opacity:1,tension:.4,dash:[]}},Ko={bindTool:["rectTool"],bindShape:["Rect"],formConfig:[{name:"stroke",label:"描边",type:"Color"},{name:"fill",label:"填充",type:"Color"},{name:"strokeWidth",label:"描边宽度",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:2,title:"细"},{label:"line-2",value:4,title:"粗"},{label:"line-3",value:8,title:"特粗"}]},{name:"cornerRadius",label:"边角",type:"RadioGroup",optionType:"icon",options:[{label:"node-flat",value:0,title:"直角"},{label:"node-round",value:20,title:"圆角"}]},{name:"dash",label:"边框样式",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:[],title:"实线"},{label:"dotted-line-2",value:[12,8],title:"虚线"},{label:"dotted-line-1",value:[6,4],title:"点虚线"}]},{name:"opacity",label:"透明度",type:"Slider"}],model:{stroke:"#000000",fill:"#ffffff",strokeWidth:2,cornerRadius:20,dash:[],opacity:1}},jo={bindTool:["regularPolygonTool"],bindShape:["RegularPolygon"],formConfig:[{name:"stroke",label:"描边",type:"Color"},{name:"fill",label:"填充",type:"Color"},{name:"strokeWidth",label:"描边宽度",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:2,title:"细"},{label:"line-2",value:4,title:"粗"},{label:"line-3",value:8,title:"特粗"}]},{name:"dash",label:"边框样式",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:[],title:"实线"},{label:"dotted-line-2",value:[12,8],title:"虚线"},{label:"dotted-line-1",value:[6,4],title:"点虚线"}]},{name:"opacity",label:"透明度",type:"Slider"}],model:{stroke:"#000000",fill:"#ffffff",strokeWidth:2,dash:[],opacity:1}},Vo={bindTool:["textTool"],bindShape:["Text"],formConfig:[{name:"fill",label:"填充",type:"Color"},{name:"fontSize",label:"字体大小",type:"RadioGroup",optionType:"text",options:[{label:"S",value:12,class:"w-[1rem] h-[1rem] flex items-center justify-center",title:"S"},{label:"M",value:16,class:"w-[1rem] h-[1rem] flex items-center justify-center",title:"M"},{label:"L",value:20,class:"w-[1rem] h-[1rem] flex items-center justify-center",title:"L"},{label:"XL",value:24,class:"w-[1rem] h-[1rem] flex items-center justify-center",title:"XL"}]},{name:"stroke",label:"描边",type:"Color"},{name:"strokeWidth",label:"描边宽度",type:"Slider",min:0,max:2},{name:"opacity",label:"透明度",type:"Slider"}],model:{stroke:"#000000",strokeWidth:0,fill:"#000000",fontSize:16,opacity:1}},Qt=[jo,Oo,Mo,Fo,Ko,Vo,Io],No=e=>Qt.find(({bindShape:t})=>t.includes(e)),Go=e=>Qt.find(({bindTool:t})=>t.includes(e)),Uo=()=>{const e=new El,t=new Rl({enabled:!0,stackSize:50}),n=new Ll({enabled:!0,multipleSelect:!0}),o=new Al({enabled:!0});e.use(t),e.use(n),e.use(o);const l=x([]),a=x([]),r=x({}),i=x(e.scale()),c=({selected:d})=>{var p,y;if(l.value=d,((p=e.curTool)==null?void 0:p.name)!=="selectTool")return;const f=No(((y=d[0])==null?void 0:y.className)??"");a.value=(f==null?void 0:f.formConfig)??[],f!=null&&f.model&&(f.model=Object.keys(f.model).reduce((v,m)=>{var h;return{...v,[m]:(h=l.value)==null?void 0:h[0].attrs[m]}},{})),r.value=(f==null?void 0:f.model)??{}},u=({curTool:d})=>{if(!d)return;const f=Go(d.name);f&&(a.value=f.formConfig,r.value=f.model,d.config={...d.config,...r.value})},s=({scale:d})=>{i.value=d};return V(()=>{e.on("selected:changed",c),e.on("tool:changed",u),e.on("canvas:zoom:end",s)}),le(()=>{e.off("selected:changed",c),e.off("tool:changed",u),e.off("canvas:zoom:end",s)}),te(Ie,e),te(dt,l),te(On,{selectorPlugin:n,historyPlugin:t}),te(Yt,{panelFormConfig:a,panelFormModel:r}),{app:e,scale:i,selected:l,panelFormConfig:a,panelFormModel:r}},Ho=Uo,Wo={class:"w-full min-w-fit md:min-w-[60rem] h-[40rem] p-2 overflow-auto scrollbar scrollbar-w-2 scrollbar-thumb-gray-200 scrollbar-track-gray-100 scrollbar-thumb-rounded-lg scrollbar-track-rounded-lg"},zo={class:"my-4 text-xl font-bold"},Yo={class:"columns-2 gap-8"},Xo={class:"font-bold text-base"},qo={class:"rounded-lg ring-1 ring-slate-950 dark:ring-navyBlue-100 divide-y divide-slate-950 dark:divide-navyBlue-100 mt-2 text-xs"},Jo={class:"justify-self-end flex flex-row gap-1"},Zo=O({__name:"HotKeyList",props:{visible:{type:Boolean}},emits:["update:visible","close"],setup(e,{emit:t}){const n=e,{undo:o,redo:l,deleteNode:a,selectAll:r,resetStage:i,stageDrag:c,mouseWheel:u,moveUp:s,moveBottom:d,moveTop:f,moveDown:p,makeGroup:y,decomposeGroup:v,alignBottom:m,alignLeft:h,alignCenterX:k,alignCenterY:w,alignRight:$,alignTop:C,distributeX:P,distributeY:A}=ue(Re),U=[{title:"编辑",hotKeyList:[o,l,r,a,i]},{title:"视图",hotKeyList:[c,u]},{title:"转换",hotKeyList:[f,s,p,d,y,v,h,k,$,C,w,m,P,A]}],J=b({get(){return n.visible},set(ie){t("update:visible",ie),ie||t("close")}}),be=()=>{J.value=!1};return(ie,xe)=>(S(),X(ft,{visible:J.value,onClose:be},{title:D(()=>[Sl(F(ie.$t("帮助中心")),1)]),default:D(()=>[g("div",Wo,[g("h3",zo,F(ie.$t("快捷键列表")),1),g("div",Yo,[(S(),B(H,null,Q(U,({title:W,hotKeyList:we},re)=>g("div",{key:re,class:"w-full break-inside-avoid-column pb-4"},[g("h3",Xo,F(ie.$t(W)),1),g("div",qo,[(S(!0),B(H,null,Q(we,(me,I)=>(S(),B("div",{key:I,class:"w-full p-4 flex flex-row justify-between items-center"},[g("div",null,F(ie.$t(me.directions??"")),1),g("div",Jo,[(S(!0),B(H,null,Q(E(Xn)(me.hotKey),(N,ee)=>(S(),B("i",{key:ee,class:"p-2 min-w-fit bg-blue-100 rounded-lg dark:text-gray-600"},F(N),1))),128))])]))),128))])])),64))])])]),_:1},8,["visible"]))}}),Qo=g("iconpark-icon",{name:"hamburger",class:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-navyBlue-100 text-lg dark:text-gray-300"},null,-1),ea={class:"relative"},ta={class:"w-full flex flex-row justify-between items-center gap-2"},la=["name"],na={class:"flex-1 text-start"},oa={class:"text-xs text-gray-700 dark:text-slate-400"},aa=O({__name:"Menu",setup(e){const t=ue(Ie),{open:n,resetStage:o,exportImg:l}=ue(Re),{execute:a}=Zt(()=>t.toJSON(),()=>`Pictode-${new Date}.pictode`,Be.JSON,"utf-8"),r=[[{icon:"folder-close",label:n.directions??"",hotkey:n.hotKey,handler:n},{icon:"hard-disk-one",label:"保存到本地",handler:()=>{a()}},{icon:"down-picture",label:l.directions??"",hotkey:l.hotKey,handler:l},{icon:"clear",label:o.directions??"",hotkey:o.hotKey,handler:o}]];return(i,c)=>(S(),X(E(hn),{as:"div"},{default:D(()=>[T(E(yn),{class:"outline-none flex justify-start bg-white dark:bg-navyBlue-200 rounded-lg"},{default:D(()=>[Qo]),_:1}),T(it,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:D(()=>[g("div",ea,[T(E(bn),{class:"absolute mt-2 w-60 p-1 divide-y rounded-lg bg-white dark:bg-navyBlue-200 shadow-md ring-1 ring-slate-950 dark:ring-navyBlue-100 focus:outline-none"},{default:D(()=>[(S(),B(H,null,Q(r,(u,s)=>g("div",{key:s,class:"px-1 py-1"},[(S(!0),B(H,null,Q(u,(d,f)=>(S(),X(E(xn),{key:f,class:"hover:bg-gray-200 dark:hover:bg-navyBlue-100"},{default:D(({active:p})=>[T(Z,{class:ae([p?"bg-blue-100":"text-gray-900 ","group flex w-full items-center rounded-md px-2 py-2 text-sm dark:text-gray-300"]),title:i.$t(d.label),onClick:d.handler},{default:D(()=>[g("div",ta,[g("iconpark-icon",{name:d.icon},null,8,la),g("span",na,F(i.$t(d.label)),1),g("span",oa,F(E(ne)(d.hotkey)),1)])]),_:2},1032,["class","title","onClick"])]),_:2},1024))),128))])),64))]),_:1})])]),_:1})]),_:1}))}}),ia={key:0},ra={key:0,class:"flex flex-col content-start gap-1 px-1 py-2 select-none"},sa={class:"text-start text-sm text-gray-600 dark:text-gray-300"},ua={class:"flex flex-row justify-start flex-wrap gap-2"},ca={key:1,class:"select-none p-2"},da=g("iconpark-icon",null,null,-1),fa=[da],va={class:"flex flex-col content-start gap-1 px-1 py-2 select-none"},pa={class:"text-start text-sm text-gray-600 dark:text-gray-300"},ma={class:"flex flex-row justify-start flex-wrap gap-2"},ga=O({__name:"PropertyPanel",setup(e){const t=ue(Ie),n=ue(dt),{panelFormConfig:o,panelFormModel:l}=ue(Yt),{moveBottom:a,moveDown:r,moveUp:i,moveTop:c,alignLeft:u,alignRight:s,alignTop:d,alignBottom:f,alignCenterX:p,alignCenterY:y,distributeX:v,distributeY:m}=ue(Re),h=b(()=>[{icon:"bring-to-front-one",action:a},{icon:"sent-to-back",action:r},{icon:"bring-to-front",action:i},{icon:"send-to-back",action:c}]),k=b(()=>[{icon:"align-left",visible:n.value.length>1,action:u},{icon:"align-horizontally",visible:n.value.length>1,action:p},{icon:"align-right",visible:n.value.length>1,action:s},{icon:"distribute-horizontal-spacing",visible:n.value.length>2,action:v},{icon:"align-top",visible:n.value.length>1,action:d},{icon:"align-vertically",visible:n.value.length>1,action:y},{icon:"align-bottom",visible:n.value.length>1,action:f},{icon:"distribute-vertical-spacing",visible:n.value.length>2,action:m}]),w=b(()=>n.value.length>1),$=C=>{t.update(...n.value.map(P=>{const A=P.toObject();return A.attrs={...A.attrs,...C},A}))};return(C,P)=>E(o).length?(S(),B("div",ia,[T(E(Fn),{model:E(l),config:E(o),onChange:$},null,8,["model","config"]),w.value?(S(),B("div",ra,[g("label",sa,F(C.$t("对齐")),1),g("div",ua,[(S(!0),B(H,null,Q(k.value,(A,U)=>(S(),B("div",{key:U},[A.visible?(S(),X(Z,{key:0,class:"rounded-lg inline-flex items-center relative cursor-pointer select-none p-2 hover:bg-gray-200 dark:hover:bg-navyBlue-100 dark:text-gray-300",title:C.$t(A.action.directions??""),icon:A.icon,onClick:A.action},null,8,["title","icon","onClick"])):(S(),B("div",ca,fa))]))),128))])])):Ee("",!0),g("div",va,[g("label",pa,F(C.$t("层级")),1),g("div",ma,[(S(!0),B(H,null,Q(h.value,(A,U)=>(S(),X(Z,{key:U,class:"rounded-lg inline-flex items-center relative cursor-pointer select-none p-2 hover:bg-gray-200 dark:hover:bg-navyBlue-100 dark:text-gray-300",title:C.$t(A.action.directions??""),icon:A.icon,onClick:A.action},null,8,["title","icon","onClick"]))),128))])])])):Ee("",!0)}});class ha{constructor({config:t,hooks:n}){R(this,"name","regularPolygonTool");R(this,"hooks");R(this,"config");R(this,"regularPolygon",null);R(this,"startPointer",new fe(0,0));this.config=t,this.hooks=n}mousedown({app:t}){var n,o;this.regularPolygon||(this.startPointer.clone(t.pointer),this.regularPolygon=new pe.RegularPolygon({sides:4,radius:0,strokeScaleEnabled:!1,...this.config}),this.regularPolygon.setPosition(this.startPointer),t.add(this.regularPolygon),(o=(n=this.hooks)==null?void 0:n.onStartDrawing)==null||o.call(n,t,this.regularPolygon))}mousemove({app:t}){if(!this.regularPolygon)return;const n=t.pointer.x-this.startPointer.x,o=t.pointer.y-this.startPointer.y,l=new fe(this.startPointer.x+n/2,this.startPointer.y+o/2);this.regularPolygon.setPosition(l),this.regularPolygon.radius(l.distanceTo(t.pointer)),t.render()}mouseup({app:t,pointer:n}){var o,l,a;if(this.regularPolygon){if(this.startPointer.eq(n)){(o=this.regularPolygon)==null||o.destroy(),this.regularPolygon=null;return}(a=(l=this.hooks)==null?void 0:l.onCompleteDrawing)==null||a.call(l,t,this.regularPolygon),this.regularPolygon=null,this.startPointer.setXY(0,0)}}enableChanged(){this.regularPolygon=null,this.startPointer.setXY(0,0)}}class ya{constructor({config:t,hooks:n}){R(this,"name","drawingTool");R(this,"config");R(this,"hooks");R(this,"line",null);R(this,"points",[]);this.config=t,this.hooks=n}mousedown({app:t}){var o,l;const n=this.points.at(-1);n!=null&&n.eq(t.pointer)||this.points.push(t.pointer),!this.line&&(this.line=new pe.Line({points:De(this.points),globalCompositeOperation:"source-over",lineCap:"round",lineJoin:"round",strokeScaleEnabled:!1,hitStrokeWidth:20,...this.config}),t.add(this.line),(l=(o=this.hooks)==null?void 0:o.onStartDrawing)==null||l.call(o,t,this.line))}mousemove({app:t,event:n}){this.line&&(n.evt.stopPropagation(),this.points.push(t.pointer),this.line.points(De(this.points)))}mouseup({app:t,pointer:n}){var l,a;if(!this.line)return;const o=this.points.at(-1);this.points.length<=6&&o&&n.distanceTo(o)<10&&this.line&&this.line.destroy(),(a=(l=this.hooks)==null?void 0:l.onCompleteDrawing)==null||a.call(l,t,this.line),this.line=null,this.points=[]}enableChanged(){this.line=null,this.points=[]}}class ba{constructor({config:t,hooks:n}){R(this,"name","ellipseTool");R(this,"config");R(this,"hooks");R(this,"ellipse",null);R(this,"startPointer",new fe(0,0));this.config=t,this.hooks=n}mousedown({app:t}){this.ellipse||(this.startPointer.clone(t.pointer),this.ellipse=new pe.Ellipse({radiusX:0,radiusY:0,strokeScaleEnabled:!1,...this.config}),this.ellipse.setPosition(this.startPointer),this.ellipse.radius(new fe(0,0)),t.add(this.ellipse))}mousemove({app:t}){if(!this.ellipse)return;const n=t.pointer.x-this.startPointer.x,o=t.pointer.y-this.startPointer.y,l=new fe(Math.abs(n)/2,Math.abs(o)/2);this.ellipse.setPosition(new fe(this.startPointer.x+n/2,this.startPointer.y+o/2)),this.ellipse.radius(l),t.render()}mouseup({app:t,pointer:n}){var o,l,a;if(this.ellipse){if(this.startPointer.eq(n)){(o=this.ellipse)==null||o.destroy(),this.ellipse=null;return}(a=(l=this.hooks)==null?void 0:l.onCompleteDrawing)==null||a.call(l,t,this.ellipse),this.ellipse=null,this.startPointer.setXY(0,0)}}enableChanged(){this.ellipse=null,this.startPointer.setXY(0,0)}}class xa{constructor({config:t,hooks:n}){R(this,"name","lineTool");R(this,"config");R(this,"hooks");R(this,"points",[]);R(this,"line",null);this.config=t,this.hooks=n}mousedown({app:t}){var o,l;this.line||(this.line=new pe.Line({points:De(this.points),fill:"transparent",strokeScaleEnabled:!1,hitStrokeWidth:20,...this.config}),t.add(this.line),(l=(o=this.hooks)==null?void 0:o.onStartDrawing)==null||l.call(o,t,this.line));const n=this.points.at(-1);n!=null&&n.eq(t.pointer)||this.points.push(t.pointer),this.line.points(De(this.points))}mousemove({app:t,pointer:n}){this.line&&(this.line.points(De(this.points).concat(n.x,n.y)),t.render())}doubleClick({app:t}){var n,o;this.line&&((o=(n=this.hooks)==null?void 0:n.onCompleteDrawing)==null||o.call(n,t,this.line),this.line=null,this.points=[])}enableChanged(){this.line=null,this.points=[]}}class wa{constructor({config:t,hooks:n}){R(this,"name","rectTool");R(this,"config");R(this,"hooks");R(this,"startPointer",new fe(0,0));R(this,"rectangle",null);this.config=t,this.hooks=n}mousedown({app:t}){var n,o;this.rectangle||(this.startPointer.clone(t.pointer),this.rectangle=new pe.Rect({strokeScaleEnabled:!1,...this.config}),this.rectangle.setPosition(this.startPointer),this.rectangle.width(0),this.rectangle.height(0),t.add(this.rectangle),(o=(n=this.hooks)==null?void 0:n.onStartDrawing)==null||o.call(n,t,this.rectangle))}mousemove({app:t}){this.rectangle&&(this.rectangle.setPosition(new fe(Math.min(this.startPointer.x,t.pointer.x),Math.min(this.startPointer.y,t.pointer.y))),this.rectangle.width(Math.abs(t.pointer.x-this.startPointer.x)),this.rectangle.height(Math.abs(t.pointer.y-this.startPointer.y)),t.render())}mouseup({app:t,pointer:n}){var o,l,a;if(this.rectangle){if(this.startPointer.eq(n)){(o=this.rectangle)==null||o.destroy(),this.rectangle=null;return}(a=(l=this.hooks)==null?void 0:l.onCompleteDrawing)==null||a.call(l,t,this.rectangle),this.rectangle=null,this.startPointer.setXY(0,0)}}enableChanged(){this.rectangle=null,this.startPointer.setXY(0,0)}}class ka{constructor(t){R(this,"name","eraserTool");R(this,"hooks");R(this,"targetMap",new Map);R(this,"isEraser",!1);this.hooks=t.hooks}mousedown({event:t}){this.isEraser=!0,!(t.target instanceof pe.Stage)&&(this.targetMap.set(t.target.id(),{node:t.target,opacity:t.target.attrs.opacity}),t.target.opacity(.3))}mouseup({app:t}){this.targetMap.size&&(t.remove(...[...this.targetMap.values()].map(({node:n,opacity:o})=>(n.opacity(o),n))),this.targetMap.clear(),this.isEraser=!1)}mousemove({event:t}){!this.isEraser||t.target instanceof pe.Stage||this.targetMap.get(t.target.id())||(this.targetMap.set(t.target.id(),{node:t.target,opacity:t.target.attrs.opacity}),t.target.opacity(.3))}enableChanged(){this.targetMap.clear(),this.isEraser=!1}}class Sa{constructor({config:t,hooks:n}){R(this,"name","iframeTool");R(this,"config");R(this,"hooks");R(this,"iframe",null);R(this,"startPointer",new fe(0,0));this.config=t,this.hooks=n}mousedown({app:t}){var n,o;this.iframe||(this.startPointer.clone(t.pointer),this.iframe=new Yn({strokeScaleEnabled:!1,...this.config}),this.iframe.setPosition(this.startPointer),this.iframe.width(0),this.iframe.height(0),t.add(this.iframe),(o=(n=this.hooks)==null?void 0:n.onStartDrawing)==null||o.call(n,t,this.iframe))}mousemove({app:t}){this.iframe&&(this.iframe.setPosition(new fe(Math.min(this.startPointer.x,t.pointer.x),Math.min(this.startPointer.y,t.pointer.y))),this.iframe.width(Math.abs(t.pointer.x-this.startPointer.x)),this.iframe.height(Math.abs(t.pointer.y-this.startPointer.y)),t.render())}mouseup({app:t,pointer:n}){var o,l,a;if(this.iframe){if(this.startPointer.eq(n)){(o=this.iframe)==null||o.destroy(),this.iframe=null;return}(a=(l=this.hooks)==null?void 0:l.onCompleteDrawing)==null||a.call(l,t,this.iframe),this.iframe=null,this.startPointer.setXY(0,0)}}}const $a=""+new URL("round-8b362c12.svg",import.meta.url).href,_a={class:"flex flex-grow justify-around flex-wrap"},Ca=["name","stroke"],Pa=O({__name:"Tools",setup(e){const t=ue(Ie),n=new Dl({hooks:{onActive(i){var c,u;(u=(c=i.getPlugin("selectorPlugin"))==null?void 0:c.enable)==null||u.call(c)},onInactive(i){var c,u;(u=(c=i.getPlugin("selectorPlugin"))==null?void 0:c.disable)==null||u.call(c)}}}),o=[{icon:"move",name:"selectTool",title:"选择",tool:n},{icon:"rectangle",name:"rectTool",title:"矩形",tool:()=>new wa({hooks:{onActive(i){i.containerElement.style.cursor="crosshair",i.cancelSelect()},onInactive(i){i.containerElement.style.cursor="default"},onCompleteDrawing(i,c){l.value=n.name,j(()=>i.select(c))}}})},{icon:"oval",name:"ellipseTool",title:"椭圆",tool:()=>new ba({hooks:{onActive(i){i.containerElement.style.cursor="crosshair",i.cancelSelect()},onInactive(i){i.containerElement.style.cursor="default"},onCompleteDrawing(i,c){l.value=n.name,j(()=>i.select(c))}}})},{icon:"diamond",name:"diamondTool",title:"菱形",tool:()=>new ha({hooks:{onActive(i){i.containerElement.style.cursor="crosshair",i.cancelSelect()},onInactive(i){i.containerElement.style.cursor="default"},onCompleteDrawing(i,c){l.value=n.name,j(()=>i.select(c))}}})},{icon:"line-1",name:"lineTool",title:"线条",tool:()=>new xa({hooks:{onActive(i){i.containerElement.style.cursor="crosshair",i.cancelSelect()},onInactive(i){i.containerElement.style.cursor="default"},onCompleteDrawing(i,c){l.value=n.name,j(()=>i.select(c))}}})},{icon:"pencil",name:"drawingTool",title:"自由书写",tool:()=>new ya({hooks:{onActive(i){i.containerElement.style.cursor="crosshair",i.cancelSelect()},onInactive(i){i.containerElement.style.cursor="default"}}})},{icon:"picture",name:"imageTool",title:"图片",tool:async()=>{const i=await Dt([".jpg",".png",".jpge",".PNG",".JPG",".JPGE",".svg"],!1),c=await Bl(s=>s.readAsDataURL(i[0])),u=new Image;return u.src=c,new Ol({config:{image:u},hooks:{onActive(s){s.cancelSelect()},onInactive(s){s.containerElement.style.cursor="default"},onCompleteDrawing(s,d){l.value=n.name,j(()=>s.select(d))}}})}},{icon:"text",name:"textTool",title:"文本",tool:()=>new Il({hooks:{onActive(i){i.containerElement.style.cursor="crosshair"},onInactive(i){i.containerElement.style.cursor="default"},onCompleteDrawing(i,c){l.value=n.name,j(()=>i.select(c))}}})},{icon:"eraser",name:"eraserTool",title:"橡皮擦",tool:()=>new ka({hooks:{onActive(i){i.containerElement.style.cursor=`url(${$a}), auto`},onInactive(i){i.containerElement.style.cursor="default"}}})},{icon:"web",name:"iframeTool",title:"网页",tool:()=>new Sa({hooks:{onActive(i){i.containerElement.style.cursor="crosshair",i.cancelSelect()},onInactive(i){i.containerElement.style.cursor="default"},onCompleteDrawing(i,c){l.value=n.name,j(()=>i.select(c))}}})}],l=x(o[0].name),{theme:a}=At(),r=b(()=>a.value==="dark"?"#d1d5db":"#333333");return ve(async()=>{var c;let i=(c=o.find(({name:u})=>u===l.value))==null?void 0:c.tool;typeof i=="function"&&(i=await i()),i&&t.setTool(i)}),(i,c)=>(S(),X(E(Rt),{modelValue:l.value,"onUpdate:modelValue":c[0]||(c[0]=u=>l.value=u)},{default:D(()=>[g("div",_a,[(S(),B(H,null,Q(o,(u,s)=>T(E(Lt),{key:s,value:u.name,title:i.$t(u.title)},{default:D(({checked:d})=>[g("div",{class:ae(["rounded-lg inline-flex items-center relative cursor-pointer select-none p-2",d?"bg-blue-500":"hover:bg-gray-200 dark:hover:bg-navyBlue-100"])},[g("iconpark-icon",{name:u.icon,stroke:r.value},null,8,Ca)],2)]),_:2},1032,["value","title"])),64))])]),_:1},8,["modelValue"]))}}),Ta={class:"w-full h-full"},Ea={class:"absolute left-0 top-0 right-0 bottom-0 p-8 z-50 pointer-events-none grid grid-cols-3 grid-rows-[auto_1fr_50px] gap-12"},Ra={class:"row-start-1 col-start-1 justify-self-start"},La={class:"row-start-1 col-start-2 justify-self-stretch"},Aa={class:"row-start-1 col-start-3 justify-self-end"},Da={class:"grid grid-flow-col gap-1 items-center w-full pointer-events-auto rounded-lg p-1 ring-1 ring-slate-950 dark:ring-navyBlue-100 bg-white dark:bg-navyBlue-200"},Ba={class:"absolute z-50 mt-3 mr-10 max-h-60 left-[-30px] w-fit rounded-lg bg-white dark:bg-navyBlue-200 py-1 text-base shadow-lg ring-1 ring-slate-950 dark:ring-navyBlue-100 focus:outline-none sm:text-sm"},Oa={class:"row-start-2 col-start-3 justify-self-end"},Ia={class:"row-start-3 col-start-1 justify-self-start flex flex-row gap-2"},Ma={class:"grid grid-flow-col gap-1 items-center w-full pointer-events-auto rounded-lg p-1 ring-1 ring-slate-950 dark:ring-navyBlue-100 bg-white dark:bg-navyBlue-200"},Fa={class:"flex text-center text-sm text-slate-900 dark:text-gray-300 h-full w-8 justify-center items-center select-none"},Ka={class:"grid grid-flow-col gap-1 items-center w-full pointer-events-auto rounded-lg p-1 ring-1 ring-slate-950 dark:ring-navyBlue-100 bg-white dark:bg-navyBlue-200"},Ga=O({__name:"index",setup(e){const t=x(null),{triggerTheme:n,theme:o}=At(),{app:l,selected:a,scale:r}=Ho(),{undo:i,redo:c}=Bo(t,l,a);to(l,a);const u=b(()=>`${Math.ceil(r.value*100)}%`),s=Ue(Zo),d=()=>{l.scaleTo(r.value+l.config.mousewheel.factor)},f=()=>{l.scaleTo(r.value-l.config.mousewheel.factor)},p=()=>i(),y=()=>c(),v=()=>n();return V(()=>{t.value&&(l.mount(t.value),t.value.tabIndex=0)}),(m,h)=>(S(),B("div",Ta,[g("div",Ea,[g("section",Ra,[T(aa,{class:"pointer-events-auto rounded-lg ring-1 ring-slate-950 dark:ring-navyBlue-100"})]),g("section",La,[T(Pa,{class:"pointer-events-auto w-full rounded-lg p-2 ring-1 ring-slate-950 dark:ring-navyBlue-100 bg-white dark:bg-navyBlue-200"})]),g("section",Aa,[g("div",Da,[T(Z,{class:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-navyBlue-100 text-lg dark:text-gray-300",icon:E(o)==="dark"?"sun":"moon",onClick:v},null,8,["icon"]),T(qt,{modelValue:m.$i18n.locale,"onUpdate:modelValue":h[0]||(h[0]=k=>m.$i18n.locale=k)},{listbox:D(()=>[T(Z,{class:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-navyBlue-100 text-lg dark:text-gray-300",title:m.$t("语言"),icon:"translate"},null,8,["title"])]),default:D(()=>[g("div",Ba,[(S(!0),B(H,null,Q(E($l),({label:k,value:w},$)=>(S(),X(Jt,{key:$,value:w,label:k,class:"p-1"},null,8,["value","label"]))),128))])]),_:1},8,["modelValue"]),T(Z,{class:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-navyBlue-100 text-lg dark:text-gray-300",title:m.$t("帮助中心"),icon:"helpcenter",onClick:h[1]||(h[1]=k=>E(s)({}))},null,8,["title"])])]),g("section",Oa,[T(ga,{class:"p-4 w-56 shadow-md rounded-lg ring-1 ring-slate-950 dark:ring-navyBlue-100 bg-white dark:bg-navyBlue-200 pointer-events-auto"})]),g("section",Ia,[g("div",Ma,[T(Z,{class:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-navyBlue-100 dark:text-gray-300",icon:"minus",title:m.$t("缩小"),onClick:f},null,8,["title"]),g("span",Fa,F(u.value),1),T(Z,{class:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-navyBlue-100 dark:text-gray-300",icon:"plus",title:m.$t("放大"),onClick:d},null,8,["title"])]),g("div",Ka,[T(Z,{class:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-navyBlue-100 dark:text-gray-300",icon:"undo",title:m.$t("撤销"),onClick:p},null,8,["title"]),T(Z,{class:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-navyBlue-100 dark:text-gray-300",icon:"redo",title:m.$t("重做"),onClick:y},null,8,["title"])])])]),g("div",{ref_key:"canvasRef",ref:t,class:"w-full h-full absolute overflow-clip dark:bg-navyBlue-300 focus:border-none"},null,512)]))}});export{Ga as default};
