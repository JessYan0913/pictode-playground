var nl=Object.defineProperty;var ol=(e,t,n)=>t in e?nl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var x=(e,t,n)=>(ol(e,typeof t!="symbol"?t+"":t,n),n);import{r as w,d as O,c as b,m as xt,o as j,a as ae,n as il,h as W,f as Ge,b as Ne,H as J,F as H,w as he,S as $e,e as ye,g as _,E as wt,u as Y,i as Fe,P as je,N as me,T as al,p as ie,j as de,s as sl,t as fe,k as He,l as N,V as rl,q as ul,M as cl,y as lt,v as V,x as A,U as dl,_ as fl,z as pt,A as _e,B as kt,C as St,D as Pt,G as nt,I as vl,K as $t,J as ot,L as it,O as _t,Q as se,R as pl,W as hl,X as Tt,Y as gl,Z as ml,$ as Se,a0 as yl,a1 as re,a2 as Je,a3 as Ct,a4 as E,a5 as bl,a6 as R,a7 as xl,a8 as Et,a9 as $,aa as B,ab as y,ac as K,ad as Rt,ae as X,af as wl,ag as kl,ah as ee,ai as Te,aj as Sl,ak as Ce,al as D,am as at,an as At,ao as Lt,ap as Pl,aq as Dt,ar as $l}from"./index-d3b77a03.js";import{H as _l,K as z,s as Bt,F as Tl,I as Cl,B as El,A as st,a as Rl,S as Al,b as Ll,P as pe,f as De,c as Dl,r as Bl,d as Ol,T as Ml}from"./index-331c47b9.js";function Il(e){throw new Error("Unexpected object: "+e)}var I=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(I||{});function Ot(e,t){let n=t.resolveItems();if(n.length<=0)return null;let o=t.resolveActiveIndex(),l=o??-1,i=(()=>{switch(e.focus){case 0:return n.findIndex(s=>!t.resolveDisabled(s));case 1:{let s=n.slice().reverse().findIndex((a,c,u)=>l!==-1&&u.length-c-1>=l?!1:!t.resolveDisabled(a));return s===-1?s:n.length-1-s}case 2:return n.findIndex((s,a)=>a<=l?!1:!t.resolveDisabled(s));case 3:{let s=n.slice().reverse().findIndex(a=>!t.resolveDisabled(a));return s===-1?s:n.length-1-s}case 4:return n.findIndex(s=>t.resolveId(s)===e.id);case 5:return null;default:Il(e)}})();return i===-1?o:i}function ht(e){return[e.screenX,e.screenY]}function Mt(){let e=w([-1,-1]);return{wasMoved(t){let n=ht(t);return e.value[0]===n[0]&&e.value[1]===n[1]?!1:(e.value=n,!0)},update(t){e.value=ht(t)}}}function Fl(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function rt(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Oe(){let e=[],t={addEventListener(n,o,l,i){return n.addEventListener(o,l,i),t.add(()=>n.removeEventListener(o,l,i))},requestAnimationFrame(...n){let o=requestAnimationFrame(...n);t.add(()=>cancelAnimationFrame(o))},nextFrame(...n){t.requestAnimationFrame(()=>{t.requestAnimationFrame(...n)})},setTimeout(...n){let o=setTimeout(...n);t.add(()=>clearTimeout(o))},microTask(...n){let o={current:!0};return rt(()=>{o.current&&n[0]()}),t.add(()=>{o.current=!1})},style(n,o,l){let i=n.style.getPropertyValue(o);return Object.assign(n.style,{[o]:l}),this.add(()=>{Object.assign(n.style,{[o]:i})})},group(n){let o=Oe();return n(o),this.add(()=>o.dispose())},add(n){return e.push(n),()=>{let o=e.indexOf(n);if(o>=0)for(let l of e.splice(o,1))l()}},dispose(){for(let n of e.splice(0))n()}};return t}function Kl(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}function It(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.value){let o=_(n);o instanceof HTMLElement&&t.add(o)}return t}var Ft=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(Ft||{});let Ae=Object.assign(O({name:"FocusTrap",props:{as:{type:[Object,String],default:"div"},initialFocus:{type:Object,default:null},features:{type:Number,default:30},containers:{type:[Object,Function],default:w(new Set)}},inheritAttrs:!1,setup(e,{attrs:t,slots:n,expose:o}){let l=w(null);o({el:l,$el:l});let i=b(()=>xt(l)),s=w(!1);j(()=>s.value=!0),ae(()=>s.value=!1),jl({ownerDocument:i},b(()=>s.value&&!!(e.features&16)));let a=Gl({ownerDocument:i,container:l,initialFocus:b(()=>e.initialFocus)},b(()=>s.value&&!!(e.features&2)));Nl({ownerDocument:i,container:l,containers:e.containers,previousActiveElement:a},b(()=>s.value&&!!(e.features&8)));let c=il();function u(p){let g=_(l);g&&(d=>d())(()=>{Y(c.value,{[Fe.Forwards]:()=>{je(g,me.First,{skipElements:[p.relatedTarget]})},[Fe.Backwards]:()=>{je(g,me.Last,{skipElements:[p.relatedTarget]})}})})}let r=w(!1);function v(p){p.key==="Tab"&&(r.value=!0,requestAnimationFrame(()=>{r.value=!1}))}function f(p){if(!s.value)return;let g=It(e.containers);_(l)instanceof HTMLElement&&g.add(_(l));let d=p.relatedTarget;d instanceof HTMLElement&&d.dataset.headlessuiFocusGuard!=="true"&&(Kt(g,d)||(r.value?je(_(l),Y(c.value,{[Fe.Forwards]:()=>me.Next,[Fe.Backwards]:()=>me.Previous})|me.WrapAround,{relativeTo:p.target}):p.target instanceof HTMLElement&&$e(p.target)))}return()=>{let p={},g={ref:l,onKeydown:v,onFocusout:f},{features:d,initialFocus:h,containers:m,...S}=e;return W(H,[!!(d&4)&&W(Ge,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:u,features:Ne.Focusable}),J({ourProps:g,theirProps:{...t,...S},slot:p,attrs:t,slots:n,name:"FocusTrap"}),!!(d&4)&&W(Ge,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:u,features:Ne.Focusable})])}}}),{features:Ft}),ke=[];Kl(()=>{function e(t){t.target instanceof HTMLElement&&t.target!==document.body&&ke[0]!==t.target&&(ke.unshift(t.target),ke=ke.filter(n=>n!=null&&n.isConnected),ke.splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function Vl(e){let t=w(ke.slice());return ye([e],([n],[o])=>{o===!0&&n===!1?rt(()=>{t.value.splice(0)}):o===!1&&n===!0&&(t.value=ke.slice())},{flush:"post"}),()=>{var n;return(n=t.value.find(o=>o!=null&&o.isConnected))!=null?n:null}}function jl({ownerDocument:e},t){let n=Vl(t);j(()=>{he(()=>{var o,l;t.value||((o=e.value)==null?void 0:o.activeElement)===((l=e.value)==null?void 0:l.body)&&$e(n())},{flush:"post"})}),ae(()=>{t.value&&$e(n())})}function Gl({ownerDocument:e,container:t,initialFocus:n},o){let l=w(null),i=w(!1);return j(()=>i.value=!0),ae(()=>i.value=!1),j(()=>{ye([t,n,o],(s,a)=>{if(s.every((u,r)=>(a==null?void 0:a[r])===u)||!o.value)return;let c=_(t);c&&rt(()=>{var u,r;if(!i.value)return;let v=_(n),f=(u=e.value)==null?void 0:u.activeElement;if(v){if(v===f){l.value=f;return}}else if(c.contains(f)){l.value=f;return}v?$e(v):je(c,me.First|me.NoScroll)===al.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),l.value=(r=e.value)==null?void 0:r.activeElement})},{immediate:!0,flush:"post"})}),l}function Nl({ownerDocument:e,container:t,containers:n,previousActiveElement:o},l){var i;wt((i=e.value)==null?void 0:i.defaultView,"focus",s=>{if(!l.value)return;let a=It(n);_(t)instanceof HTMLElement&&a.add(_(t));let c=o.value;if(!c)return;let u=s.target;u&&u instanceof HTMLElement?Kt(a,u)?(o.value=u,$e(u)):(s.preventDefault(),s.stopPropagation(),$e(c)):$e(o.value)},!0)}function Kt(e,t){for(let n of e)if(n.contains(t))return!0;return!1}let Xe=new Map,Le=new Map;function gt(e,t=w(!0)){he(n=>{var o;if(!t.value)return;let l=_(e);if(!l)return;n(function(){var s;if(!l)return;let a=(s=Le.get(l))!=null?s:1;if(a===1?Le.delete(l):Le.set(l,a-1),a!==1)return;let c=Xe.get(l);c&&(c["aria-hidden"]===null?l.removeAttribute("aria-hidden"):l.setAttribute("aria-hidden",c["aria-hidden"]),l.inert=c.inert,Xe.delete(l))});let i=(o=Le.get(l))!=null?o:0;Le.set(l,i+1),i===0&&(Xe.set(l,{"aria-hidden":l.getAttribute("aria-hidden"),inert:l.inert}),l.setAttribute("aria-hidden","true"),l.inert=!0)})}let Vt=Symbol("StackContext");var Ze=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(Ze||{});function Ul(){return de(Vt,()=>{})}function Hl({type:e,enabled:t,element:n,onUpdate:o}){let l=Ul();function i(...s){o==null||o(...s),l(...s)}j(()=>{ye(t,(s,a)=>{s?i(0,e,n):a===!0&&i(1,e,n)},{immediate:!0,flush:"sync"})}),ae(()=>{t.value&&i(1,e,n)}),ie(Vt,i)}function Wl(e){let t=sl(e.getSnapshot());return ae(e.subscribe(()=>{t.value=e.getSnapshot()})),t}function zl(e,t){let n=e(),o=new Set;return{getSnapshot(){return n},subscribe(l){return o.add(l),()=>o.delete(l)},dispatch(l,...i){let s=t[l].call(n,...i);s&&(n=s,o.forEach(a=>a()))}}}function Yl(){let e;return{before({doc:t}){var n;let o=t.documentElement;e=((n=t.defaultView)!=null?n:window).innerWidth-o.clientWidth},after({doc:t,d:n}){let o=t.documentElement,l=o.clientWidth-o.offsetWidth,i=e-l;n.style(o,"paddingRight",`${i}px`)}}}function Xl(){if(!Fl())return{};let e;return{before(){e=window.pageYOffset},after({doc:t,d:n,meta:o}){function l(s){return o.containers.flatMap(a=>a()).some(a=>a.contains(s))}if(window.getComputedStyle(t.documentElement).scrollBehavior!=="auto"){let s=Oe();s.style(t.documentElement,"scroll-behavior","auto"),n.add(()=>n.microTask(()=>s.dispose()))}n.style(t.body,"marginTop",`-${e}px`),window.scrollTo(0,0);let i=null;n.addEventListener(t,"click",s=>{if(s.target instanceof HTMLElement)try{let a=s.target.closest("a");if(!a)return;let{hash:c}=new URL(a.href),u=t.querySelector(c);u&&!l(u)&&(i=u)}catch{}},!0),n.addEventListener(t,"touchmove",s=>{s.target instanceof HTMLElement&&!l(s.target)&&s.preventDefault()},{passive:!1}),n.add(()=>{window.scrollTo(0,window.pageYOffset+e),i&&i.isConnected&&(i.scrollIntoView({block:"nearest"}),i=null)})}}}function ql(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function Jl(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let Pe=zl(()=>new Map,{PUSH(e,t){var n;let o=(n=this.get(e))!=null?n:{doc:e,count:0,d:Oe(),meta:new Set};return o.count++,o.meta.add(t),this.set(e,o),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let o={doc:e,d:t,meta:Jl(n)},l=[Xl(),Yl(),ql()];l.forEach(({before:i})=>i==null?void 0:i(o)),l.forEach(({after:i})=>i==null?void 0:i(o))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});Pe.subscribe(()=>{let e=Pe.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let o=t.get(n.doc)==="hidden",l=n.count!==0;(l&&!o||!l&&o)&&Pe.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&Pe.dispatch("TEARDOWN",n)}});function Zl(e,t,n){let o=Wl(Pe),l=b(()=>{let i=e.value?o.value.get(e.value):void 0;return i?i.count>0:!1});return ye([e,t],([i,s],[a],c)=>{if(!i||!s)return;Pe.dispatch("PUSH",i,n);let u=!1;c(()=>{u||(Pe.dispatch("POP",a??i,n),u=!0)})},{immediate:!0}),l}var Ql=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Ql||{});let Qe=Symbol("DialogContext");function ut(e){let t=de(Qe,null);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,ut),n}return t}let Ke="DC8F892D-2EBD-447C-A4C8-A03058436FF4",en=O({name:"Dialog",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},open:{type:[Boolean,String],default:Ke},initialFocus:{type:Object,default:null},id:{type:String,default:()=>`headlessui-dialog-${fe()}`}},emits:{close:e=>!0},setup(e,{emit:t,attrs:n,slots:o,expose:l}){var i;let s=w(!1);j(()=>{s.value=!0});let a=w(0),c=He(),u=b(()=>e.open===Ke&&c!==null?(c.value&N.Open)===N.Open:e.open),r=w(null),v=b(()=>xt(r));if(l({el:r,$el:r}),!(e.open!==Ke||c!==null))throw new Error("You forgot to provide an `open` prop to the `Dialog`.");if(typeof u.value!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${u.value===Ke?void 0:e.open}`);let f=b(()=>s.value&&u.value?0:1),p=b(()=>f.value===0),g=b(()=>a.value>1),d=de(Qe,null)!==null,[h,m]=rl(),{resolveContainers:S,mainTreeNodeRef:k,MainTreeNode:P}=ul({portals:h,defaultContainers:[b(()=>{var M;return(M=q.panelRef.value)!=null?M:r.value})]}),T=b(()=>g.value?"parent":"leaf"),C=b(()=>c!==null?(c.value&N.Closing)===N.Closing:!1),L=b(()=>d||C.value?!1:p.value),U=b(()=>{var M,G,le;return(le=Array.from((G=(M=v.value)==null?void 0:M.querySelectorAll("body > *"))!=null?G:[]).find(ne=>ne.id==="headlessui-portal-root"?!1:ne.contains(_(k))&&ne instanceof HTMLElement))!=null?le:null});gt(U,L);let ve=b(()=>g.value?!0:p.value),te=b(()=>{var M,G,le;return(le=Array.from((G=(M=v.value)==null?void 0:M.querySelectorAll("[data-headlessui-portal]"))!=null?G:[]).find(ne=>ne.contains(_(k))&&ne instanceof HTMLElement))!=null?le:null});gt(te,ve),Hl({type:"Dialog",enabled:b(()=>f.value===0),element:r,onUpdate:(M,G)=>{if(G==="Dialog")return Y(M,{[Ze.Add]:()=>a.value+=1,[Ze.Remove]:()=>a.value-=1})}});let Re=cl({name:"DialogDescription",slot:b(()=>({open:u.value}))}),Z=w(null),q={titleId:Z,panelRef:w(null),dialogState:f,setTitleId(M){Z.value!==M&&(Z.value=M)},close(){t("close",!1)}};ie(Qe,q);let xe=b(()=>!(!p.value||g.value));lt(S,(M,G)=>{q.close(),V(()=>G==null?void 0:G.focus())},xe);let ue=b(()=>!(g.value||f.value!==0));wt((i=v.value)==null?void 0:i.defaultView,"keydown",M=>{ue.value&&(M.defaultPrevented||M.key===A.Escape&&(M.preventDefault(),M.stopPropagation(),q.close()))});let be=b(()=>!(C.value||f.value!==0||d));return Zl(v,be,M=>{var G;return{containers:[...(G=M.containers)!=null?G:[],S]}}),he(M=>{if(f.value!==0)return;let G=_(r);if(!G)return;let le=new ResizeObserver(ne=>{for(let Ie of ne){let ge=Ie.target.getBoundingClientRect();ge.x===0&&ge.y===0&&ge.width===0&&ge.height===0&&q.close()}});le.observe(G),M(()=>le.disconnect())}),()=>{let{id:M,open:G,initialFocus:le,...ne}=e,Ie={...n,ref:r,id:M,role:"dialog","aria-modal":f.value===0?!0:void 0,"aria-labelledby":Z.value,"aria-describedby":Re.value},ge={open:f.value===0};return W(pt,{force:!0},()=>[W(dl,()=>W(fl,{target:r.value},()=>W(pt,{force:!1},()=>W(Ae,{initialFocus:le,containers:S,features:p.value?Y(T.value,{parent:Ae.features.RestoreFocus,leaf:Ae.features.All&~Ae.features.FocusLock}):Ae.features.None},()=>W(m,{},()=>J({ourProps:Ie,theirProps:{...ne,...n},slot:ge,attrs:n,slots:o,visible:f.value===0,features:_e.RenderStrategy|_e.Static,name:"Dialog"})))))),W(P)])}}}),tn=O({name:"DialogPanel",props:{as:{type:[Object,String],default:"div"},id:{type:String,default:()=>`headlessui-dialog-panel-${fe()}`}},setup(e,{attrs:t,slots:n,expose:o}){let l=ut("DialogPanel");o({el:l.panelRef,$el:l.panelRef});function i(s){s.stopPropagation()}return()=>{let{id:s,...a}=e,c={id:s,ref:l.panelRef,onClick:i};return J({ourProps:c,theirProps:a,slot:{open:l.dialogState.value===0},attrs:t,slots:n,name:"DialogPanel"})}}}),ln=O({name:"DialogTitle",props:{as:{type:[Object,String],default:"h2"},id:{type:String,default:()=>`headlessui-dialog-title-${fe()}`}},setup(e,{attrs:t,slots:n}){let o=ut("DialogTitle");return j(()=>{o.setTitleId(e.id),ae(()=>o.setTitleId(null))}),()=>{let{id:l,...i}=e;return J({ourProps:{id:l},theirProps:i,slot:{open:o.dialogState.value===0},attrs:t,slots:n,name:"DialogTitle"})}}}),mt=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function yt(e){var t,n;let o=(t=e.innerText)!=null?t:"",l=e.cloneNode(!0);if(!(l instanceof HTMLElement))return o;let i=!1;for(let a of l.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))a.remove(),i=!0;let s=i?(n=l.innerText)!=null?n:"":o;return mt.test(s)&&(s=s.replace(mt,"")),s}function nn(e){let t=e.getAttribute("aria-label");if(typeof t=="string")return t.trim();let n=e.getAttribute("aria-labelledby");if(n){let o=n.split(" ").map(l=>{let i=document.getElementById(l);if(i){let s=i.getAttribute("aria-label");return typeof s=="string"?s.trim():yt(i).trim()}return null}).filter(Boolean);if(o.length>0)return o.join(", ")}return yt(e).trim()}function jt(e){let t=w(""),n=w("");return()=>{let o=_(e);if(!o)return"";let l=o.innerText;if(t.value===l)return n.value;let i=nn(o).trim().toLowerCase();return t.value=l,n.value=i,i}}function on(e,t){return e===t}var an=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(an||{}),sn=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(sn||{}),rn=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(rn||{});function un(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let Gt=Symbol("ListboxContext");function We(e){let t=de(Gt,null);if(t===null){let n=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,We),n}return t}let cn=O({name:"Listbox",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>on},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:t,attrs:n,emit:o}){let l=w(1),i=w(null),s=w(null),a=w(null),c=w([]),u=w(""),r=w(null),v=w(1);function f(k=P=>P){let P=r.value!==null?c.value[r.value]:null,T=_t(k(c.value.slice()),L=>_(L.dataRef.domRef)),C=P?T.indexOf(P):null;return C===-1&&(C=null),{options:T,activeOptionIndex:C}}let p=b(()=>e.multiple?1:0),[g,d]=kt(b(()=>e.modelValue),k=>o("update:modelValue",k),b(()=>e.defaultValue)),h=b(()=>g.value===void 0?Y(p.value,{1:[],0:void 0}):g.value),m={listboxState:l,value:h,mode:p,compare(k,P){if(typeof e.by=="string"){let T=e.by;return(k==null?void 0:k[T])===(P==null?void 0:P[T])}return e.by(k,P)},orientation:b(()=>e.horizontal?"horizontal":"vertical"),labelRef:i,buttonRef:s,optionsRef:a,disabled:b(()=>e.disabled),options:c,searchQuery:u,activeOptionIndex:r,activationTrigger:v,closeListbox(){e.disabled||l.value!==1&&(l.value=1,r.value=null)},openListbox(){e.disabled||l.value!==0&&(l.value=0)},goToOption(k,P,T){if(e.disabled||l.value===1)return;let C=f(),L=Ot(k===I.Specific?{focus:I.Specific,id:P}:{focus:k},{resolveItems:()=>C.options,resolveActiveIndex:()=>C.activeOptionIndex,resolveId:U=>U.id,resolveDisabled:U=>U.dataRef.disabled});u.value="",r.value=L,v.value=T??1,c.value=C.options},search(k){if(e.disabled||l.value===1)return;let P=u.value!==""?0:1;u.value+=k.toLowerCase();let T=(r.value!==null?c.value.slice(r.value+P).concat(c.value.slice(0,r.value+P)):c.value).find(L=>L.dataRef.textValue.startsWith(u.value)&&!L.dataRef.disabled),C=T?c.value.indexOf(T):-1;C===-1||C===r.value||(r.value=C,v.value=1)},clearSearch(){e.disabled||l.value!==1&&u.value!==""&&(u.value="")},registerOption(k,P){let T=f(C=>[...C,{id:k,dataRef:P}]);c.value=T.options,r.value=T.activeOptionIndex},unregisterOption(k){let P=f(T=>{let C=T.findIndex(L=>L.id===k);return C!==-1&&T.splice(C,1),T});c.value=P.options,r.value=P.activeOptionIndex,v.value=1},theirOnChange(k){e.disabled||d(k)},select(k){e.disabled||d(Y(p.value,{0:()=>k,1:()=>{let P=se(m.value.value).slice(),T=se(k),C=P.findIndex(L=>m.compare(T,se(L)));return C===-1?P.push(T):P.splice(C,1),P}}))}};lt([s,a],(k,P)=>{var T;m.closeListbox(),St(P,Pt.Loose)||(k.preventDefault(),(T=_(s))==null||T.focus())},b(()=>l.value===0)),ie(Gt,m),nt(b(()=>Y(l.value,{0:N.Open,1:N.Closed})));let S=b(()=>{var k;return(k=_(s))==null?void 0:k.closest("form")});return j(()=>{ye([S],()=>{if(!S.value||e.defaultValue===void 0)return;function k(){m.theirOnChange(e.defaultValue)}return S.value.addEventListener("reset",k),()=>{var P;(P=S.value)==null||P.removeEventListener("reset",k)}},{immediate:!0})}),()=>{let{name:k,modelValue:P,disabled:T,form:C,...L}=e,U={open:l.value===0,disabled:T,value:h.value};return W(H,[...k!=null&&h.value!=null?vl({[k]:h.value}).map(([ve,te])=>W(Ge,$t({features:Ne.Hidden,key:ve,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:C,name:ve,value:te}))):[],J({ourProps:{},theirProps:{...n,...ot(L,["defaultValue","onUpdate:modelValue","horizontal","multiple","by"])},slot:U,slots:t,attrs:n,name:"Listbox"})])}}}),dn=O({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-listbox-button-${fe()}`}},setup(e,{attrs:t,slots:n,expose:o}){let l=We("ListboxButton");o({el:l.buttonRef,$el:l.buttonRef});function i(u){switch(u.key){case A.Space:case A.Enter:case A.ArrowDown:u.preventDefault(),l.openListbox(),V(()=>{var r;(r=_(l.optionsRef))==null||r.focus({preventScroll:!0}),l.value.value||l.goToOption(I.First)});break;case A.ArrowUp:u.preventDefault(),l.openListbox(),V(()=>{var r;(r=_(l.optionsRef))==null||r.focus({preventScroll:!0}),l.value.value||l.goToOption(I.Last)});break}}function s(u){switch(u.key){case A.Space:u.preventDefault();break}}function a(u){l.disabled.value||(l.listboxState.value===0?(l.closeListbox(),V(()=>{var r;return(r=_(l.buttonRef))==null?void 0:r.focus({preventScroll:!0})})):(u.preventDefault(),l.openListbox(),un(()=>{var r;return(r=_(l.optionsRef))==null?void 0:r.focus({preventScroll:!0})})))}let c=it(b(()=>({as:e.as,type:t.type})),l.buttonRef);return()=>{var u,r;let v={open:l.listboxState.value===0,disabled:l.disabled.value,value:l.value.value},{id:f,...p}=e,g={ref:l.buttonRef,id:f,type:c.value,"aria-haspopup":"listbox","aria-controls":(u=_(l.optionsRef))==null?void 0:u.id,"aria-expanded":l.listboxState.value===0,"aria-labelledby":l.labelRef.value?[(r=_(l.labelRef))==null?void 0:r.id,f].join(" "):void 0,disabled:l.disabled.value===!0?!0:void 0,onKeydown:i,onKeyup:s,onClick:a};return J({ourProps:g,theirProps:p,slot:v,attrs:t,slots:n,name:"ListboxButton"})}}}),fn=O({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-listbox-options-${fe()}`}},setup(e,{attrs:t,slots:n,expose:o}){let l=We("ListboxOptions"),i=w(null);o({el:l.optionsRef,$el:l.optionsRef});function s(u){switch(i.value&&clearTimeout(i.value),u.key){case A.Space:if(l.searchQuery.value!=="")return u.preventDefault(),u.stopPropagation(),l.search(u.key);case A.Enter:if(u.preventDefault(),u.stopPropagation(),l.activeOptionIndex.value!==null){let r=l.options.value[l.activeOptionIndex.value];l.select(r.dataRef.value)}l.mode.value===0&&(l.closeListbox(),V(()=>{var r;return(r=_(l.buttonRef))==null?void 0:r.focus({preventScroll:!0})}));break;case Y(l.orientation.value,{vertical:A.ArrowDown,horizontal:A.ArrowRight}):return u.preventDefault(),u.stopPropagation(),l.goToOption(I.Next);case Y(l.orientation.value,{vertical:A.ArrowUp,horizontal:A.ArrowLeft}):return u.preventDefault(),u.stopPropagation(),l.goToOption(I.Previous);case A.Home:case A.PageUp:return u.preventDefault(),u.stopPropagation(),l.goToOption(I.First);case A.End:case A.PageDown:return u.preventDefault(),u.stopPropagation(),l.goToOption(I.Last);case A.Escape:u.preventDefault(),u.stopPropagation(),l.closeListbox(),V(()=>{var r;return(r=_(l.buttonRef))==null?void 0:r.focus({preventScroll:!0})});break;case A.Tab:u.preventDefault(),u.stopPropagation();break;default:u.key.length===1&&(l.search(u.key),i.value=setTimeout(()=>l.clearSearch(),350));break}}let a=He(),c=b(()=>a!==null?(a.value&N.Open)===N.Open:l.listboxState.value===0);return()=>{var u,r,v,f;let p={open:l.listboxState.value===0},{id:g,...d}=e,h={"aria-activedescendant":l.activeOptionIndex.value===null||(u=l.options.value[l.activeOptionIndex.value])==null?void 0:u.id,"aria-multiselectable":l.mode.value===1?!0:void 0,"aria-labelledby":(f=(r=_(l.labelRef))==null?void 0:r.id)!=null?f:(v=_(l.buttonRef))==null?void 0:v.id,"aria-orientation":l.orientation.value,id:g,onKeydown:s,role:"listbox",tabIndex:0,ref:l.optionsRef};return J({ourProps:h,theirProps:d,slot:p,attrs:t,slots:n,features:_e.RenderStrategy|_e.Static,visible:c.value,name:"ListboxOptions"})}}}),vn=O({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-listbox.option-${fe()}`}},setup(e,{slots:t,attrs:n,expose:o}){let l=We("ListboxOption"),i=w(null);o({el:i,$el:i});let s=b(()=>l.activeOptionIndex.value!==null?l.options.value[l.activeOptionIndex.value].id===e.id:!1),a=b(()=>Y(l.mode.value,{0:()=>l.compare(se(l.value.value),se(e.value)),1:()=>se(l.value.value).some(m=>l.compare(se(m),se(e.value)))})),c=b(()=>Y(l.mode.value,{1:()=>{var m;let S=se(l.value.value);return((m=l.options.value.find(k=>S.some(P=>l.compare(se(P),se(k.dataRef.value)))))==null?void 0:m.id)===e.id},0:()=>a.value})),u=jt(i),r=b(()=>({disabled:e.disabled,value:e.value,get textValue(){return u()},domRef:i}));j(()=>l.registerOption(e.id,r)),ae(()=>l.unregisterOption(e.id)),j(()=>{ye([l.listboxState,a],()=>{l.listboxState.value===0&&a.value&&Y(l.mode.value,{1:()=>{c.value&&l.goToOption(I.Specific,e.id)},0:()=>{l.goToOption(I.Specific,e.id)}})},{immediate:!0})}),he(()=>{l.listboxState.value===0&&s.value&&l.activationTrigger.value!==0&&V(()=>{var m,S;return(S=(m=_(i))==null?void 0:m.scrollIntoView)==null?void 0:S.call(m,{block:"nearest"})})});function v(m){if(e.disabled)return m.preventDefault();l.select(e.value),l.mode.value===0&&(l.closeListbox(),V(()=>{var S;return(S=_(l.buttonRef))==null?void 0:S.focus({preventScroll:!0})}))}function f(){if(e.disabled)return l.goToOption(I.Nothing);l.goToOption(I.Specific,e.id)}let p=Mt();function g(m){p.update(m)}function d(m){p.wasMoved(m)&&(e.disabled||s.value||l.goToOption(I.Specific,e.id,0))}function h(m){p.wasMoved(m)&&(e.disabled||s.value&&l.goToOption(I.Nothing))}return()=>{let{disabled:m}=e,S={active:s.value,selected:a.value,disabled:m},{id:k,value:P,disabled:T,...C}=e,L={id:k,ref:i,role:"option",tabIndex:m===!0?void 0:-1,"aria-disabled":m===!0?!0:void 0,"aria-selected":a.value,disabled:void 0,onClick:v,onFocus:f,onPointerenter:g,onMouseenter:g,onPointermove:d,onMousemove:d,onPointerleave:h,onMouseleave:h};return J({ourProps:L,theirProps:C,slot:S,attrs:n,slots:t,name:"ListboxOption"})}}});var pn=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(pn||{}),hn=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(hn||{});function gn(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let Nt=Symbol("MenuContext");function ze(e){let t=de(Nt,null);if(t===null){let n=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,ze),n}return t}let mn=O({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(e,{slots:t,attrs:n}){let o=w(1),l=w(null),i=w(null),s=w([]),a=w(""),c=w(null),u=w(1);function r(f=p=>p){let p=c.value!==null?s.value[c.value]:null,g=_t(f(s.value.slice()),h=>_(h.dataRef.domRef)),d=p?g.indexOf(p):null;return d===-1&&(d=null),{items:g,activeItemIndex:d}}let v={menuState:o,buttonRef:l,itemsRef:i,items:s,searchQuery:a,activeItemIndex:c,activationTrigger:u,closeMenu:()=>{o.value=1,c.value=null},openMenu:()=>o.value=0,goToItem(f,p,g){let d=r(),h=Ot(f===I.Specific?{focus:I.Specific,id:p}:{focus:f},{resolveItems:()=>d.items,resolveActiveIndex:()=>d.activeItemIndex,resolveId:m=>m.id,resolveDisabled:m=>m.dataRef.disabled});a.value="",c.value=h,u.value=g??1,s.value=d.items},search(f){let p=a.value!==""?0:1;a.value+=f.toLowerCase();let g=(c.value!==null?s.value.slice(c.value+p).concat(s.value.slice(0,c.value+p)):s.value).find(h=>h.dataRef.textValue.startsWith(a.value)&&!h.dataRef.disabled),d=g?s.value.indexOf(g):-1;d===-1||d===c.value||(c.value=d,u.value=1)},clearSearch(){a.value=""},registerItem(f,p){let g=r(d=>[...d,{id:f,dataRef:p}]);s.value=g.items,c.value=g.activeItemIndex,u.value=1},unregisterItem(f){let p=r(g=>{let d=g.findIndex(h=>h.id===f);return d!==-1&&g.splice(d,1),g});s.value=p.items,c.value=p.activeItemIndex,u.value=1}};return lt([l,i],(f,p)=>{var g;v.closeMenu(),St(p,Pt.Loose)||(f.preventDefault(),(g=_(l))==null||g.focus())},b(()=>o.value===0)),ie(Nt,v),nt(b(()=>Y(o.value,{0:N.Open,1:N.Closed}))),()=>{let f={open:o.value===0,close:v.closeMenu};return J({ourProps:{},theirProps:e,slot:f,slots:t,attrs:n,name:"Menu"})}}}),yn=O({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-menu-button-${fe()}`}},setup(e,{attrs:t,slots:n,expose:o}){let l=ze("MenuButton");o({el:l.buttonRef,$el:l.buttonRef});function i(u){switch(u.key){case A.Space:case A.Enter:case A.ArrowDown:u.preventDefault(),u.stopPropagation(),l.openMenu(),V(()=>{var r;(r=_(l.itemsRef))==null||r.focus({preventScroll:!0}),l.goToItem(I.First)});break;case A.ArrowUp:u.preventDefault(),u.stopPropagation(),l.openMenu(),V(()=>{var r;(r=_(l.itemsRef))==null||r.focus({preventScroll:!0}),l.goToItem(I.Last)});break}}function s(u){switch(u.key){case A.Space:u.preventDefault();break}}function a(u){e.disabled||(l.menuState.value===0?(l.closeMenu(),V(()=>{var r;return(r=_(l.buttonRef))==null?void 0:r.focus({preventScroll:!0})})):(u.preventDefault(),l.openMenu(),gn(()=>{var r;return(r=_(l.itemsRef))==null?void 0:r.focus({preventScroll:!0})})))}let c=it(b(()=>({as:e.as,type:t.type})),l.buttonRef);return()=>{var u;let r={open:l.menuState.value===0},{id:v,...f}=e,p={ref:l.buttonRef,id:v,type:c.value,"aria-haspopup":"menu","aria-controls":(u=_(l.itemsRef))==null?void 0:u.id,"aria-expanded":l.menuState.value===0,onKeydown:i,onKeyup:s,onClick:a};return J({ourProps:p,theirProps:f,slot:r,attrs:t,slots:n,name:"MenuButton"})}}}),bn=O({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-menu-items-${fe()}`}},setup(e,{attrs:t,slots:n,expose:o}){let l=ze("MenuItems"),i=w(null);o({el:l.itemsRef,$el:l.itemsRef}),pl({container:b(()=>_(l.itemsRef)),enabled:b(()=>l.menuState.value===0),accept(r){return r.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:r.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(r){r.setAttribute("role","none")}});function s(r){var v;switch(i.value&&clearTimeout(i.value),r.key){case A.Space:if(l.searchQuery.value!=="")return r.preventDefault(),r.stopPropagation(),l.search(r.key);case A.Enter:if(r.preventDefault(),r.stopPropagation(),l.activeItemIndex.value!==null){let f=l.items.value[l.activeItemIndex.value];(v=_(f.dataRef.domRef))==null||v.click()}l.closeMenu(),Tt(_(l.buttonRef));break;case A.ArrowDown:return r.preventDefault(),r.stopPropagation(),l.goToItem(I.Next);case A.ArrowUp:return r.preventDefault(),r.stopPropagation(),l.goToItem(I.Previous);case A.Home:case A.PageUp:return r.preventDefault(),r.stopPropagation(),l.goToItem(I.First);case A.End:case A.PageDown:return r.preventDefault(),r.stopPropagation(),l.goToItem(I.Last);case A.Escape:r.preventDefault(),r.stopPropagation(),l.closeMenu(),V(()=>{var f;return(f=_(l.buttonRef))==null?void 0:f.focus({preventScroll:!0})});break;case A.Tab:r.preventDefault(),r.stopPropagation(),l.closeMenu(),V(()=>hl(_(l.buttonRef),r.shiftKey?me.Previous:me.Next));break;default:r.key.length===1&&(l.search(r.key),i.value=setTimeout(()=>l.clearSearch(),350));break}}function a(r){switch(r.key){case A.Space:r.preventDefault();break}}let c=He(),u=b(()=>c!==null?(c.value&N.Open)===N.Open:l.menuState.value===0);return()=>{var r,v;let f={open:l.menuState.value===0},{id:p,...g}=e,d={"aria-activedescendant":l.activeItemIndex.value===null||(r=l.items.value[l.activeItemIndex.value])==null?void 0:r.id,"aria-labelledby":(v=_(l.buttonRef))==null?void 0:v.id,id:p,onKeydown:s,onKeyup:a,role:"menu",tabIndex:0,ref:l.itemsRef};return J({ourProps:d,theirProps:g,slot:f,attrs:t,slots:n,features:_e.RenderStrategy|_e.Static,visible:u.value,name:"MenuItems"})}}}),xn=O({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-menu-item-${fe()}`}},setup(e,{slots:t,attrs:n,expose:o}){let l=ze("MenuItem"),i=w(null);o({el:i,$el:i});let s=b(()=>l.activeItemIndex.value!==null?l.items.value[l.activeItemIndex.value].id===e.id:!1),a=jt(i),c=b(()=>({disabled:e.disabled,get textValue(){return a()},domRef:i}));j(()=>l.registerItem(e.id,c)),ae(()=>l.unregisterItem(e.id)),he(()=>{l.menuState.value===0&&s.value&&l.activationTrigger.value!==0&&V(()=>{var d,h;return(h=(d=_(i))==null?void 0:d.scrollIntoView)==null?void 0:h.call(d,{block:"nearest"})})});function u(d){if(e.disabled)return d.preventDefault();l.closeMenu(),Tt(_(l.buttonRef))}function r(){if(e.disabled)return l.goToItem(I.Nothing);l.goToItem(I.Specific,e.id)}let v=Mt();function f(d){v.update(d)}function p(d){v.wasMoved(d)&&(e.disabled||s.value||l.goToItem(I.Specific,e.id,0))}function g(d){v.wasMoved(d)&&(e.disabled||s.value&&l.goToItem(I.Nothing))}return()=>{let{disabled:d}=e,h={active:s.value,disabled:d,close:l.closeMenu},{id:m,...S}=e;return J({ourProps:{id:m,ref:i,role:"menuitem",tabIndex:d===!0?void 0:-1,"aria-disabled":d===!0?!0:void 0,disabled:void 0,onClick:u,onFocus:r,onPointerenter:f,onMouseenter:f,onPointermove:p,onMousemove:p,onPointerleave:g,onMouseleave:g},theirProps:{...n,...S},slot:h,attrs:n,slots:t,name:"MenuItem"})}}}),wn=Symbol("GroupContext"),kn=O({name:"Switch",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"button"},modelValue:{type:Boolean,default:void 0},defaultChecked:{type:Boolean,optional:!0},form:{type:String,optional:!0},name:{type:String,optional:!0},value:{type:String,optional:!0},id:{type:String,default:()=>`headlessui-switch-${fe()}`}},inheritAttrs:!1,setup(e,{emit:t,attrs:n,slots:o,expose:l}){let i=de(wn,null),[s,a]=kt(b(()=>e.modelValue),h=>t("update:modelValue",h),b(()=>e.defaultChecked));function c(){a(!s.value)}let u=w(null),r=i===null?u:i.switchRef,v=it(b(()=>({as:e.as,type:n.type})),r);l({el:r,$el:r});function f(h){h.preventDefault(),c()}function p(h){h.key===A.Space?(h.preventDefault(),c()):h.key===A.Enter&&gl(h.currentTarget)}function g(h){h.preventDefault()}let d=b(()=>{var h,m;return(m=(h=_(r))==null?void 0:h.closest)==null?void 0:m.call(h,"form")});return j(()=>{ye([d],()=>{if(!d.value||e.defaultChecked===void 0)return;function h(){a(e.defaultChecked)}return d.value.addEventListener("reset",h),()=>{var m;(m=d.value)==null||m.removeEventListener("reset",h)}},{immediate:!0})}),()=>{let{id:h,name:m,value:S,form:k,...P}=e,T={checked:s.value},C={id:h,ref:r,role:"switch",type:v.value,tabIndex:0,"aria-checked":s.value,"aria-labelledby":i==null?void 0:i.labelledby.value,"aria-describedby":i==null?void 0:i.describedby.value,onClick:f,onKeyup:p,onKeypress:g};return W(H,[m!=null&&s.value!=null?W(Ge,$t({features:Ne.Hidden,as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:s.value,form:k,name:m,value:S})):null,J({ourProps:C,theirProps:{...n,...ot(P,["modelValue","defaultChecked"])},slot:T,attrs:n,slots:o,name:"Switch"})])}}});function Sn(e){let t={called:!1};return(...n)=>{if(!t.called)return t.called=!0,e(...n)}}function qe(e,...t){e&&t.length>0&&e.classList.add(...t)}function Ve(e,...t){e&&t.length>0&&e.classList.remove(...t)}var et=(e=>(e.Finished="finished",e.Cancelled="cancelled",e))(et||{});function Pn(e,t){let n=Oe();if(!e)return n.dispose;let{transitionDuration:o,transitionDelay:l}=getComputedStyle(e),[i,s]=[o,l].map(a=>{let[c=0]=a.split(",").filter(Boolean).map(u=>u.includes("ms")?parseFloat(u):parseFloat(u)*1e3).sort((u,r)=>r-u);return c});return i!==0?n.setTimeout(()=>t("finished"),i+s):t("finished"),n.add(()=>t("cancelled")),n.dispose}function bt(e,t,n,o,l,i){let s=Oe(),a=i!==void 0?Sn(i):()=>{};return Ve(e,...l),qe(e,...t,...n),s.nextFrame(()=>{Ve(e,...n),qe(e,...o),s.add(Pn(e,c=>(Ve(e,...o,...t),qe(e,...l),a(c))))}),s.add(()=>Ve(e,...t,...n,...o,...l)),s.add(()=>a("cancelled")),s.dispose}function we(e=""){return e.split(" ").filter(t=>t.trim().length>1)}let ct=Symbol("TransitionContext");var $n=(e=>(e.Visible="visible",e.Hidden="hidden",e))($n||{});function _n(){return de(ct,null)!==null}function Tn(){let e=de(ct,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}function Cn(){let e=de(dt,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}let dt=Symbol("NestingContext");function Ye(e){return"children"in e?Ye(e.children):e.value.filter(({state:t})=>t==="visible").length>0}function Ut(e){let t=w([]),n=w(!1);j(()=>n.value=!0),ae(()=>n.value=!1);function o(i,s=Se.Hidden){let a=t.value.findIndex(({id:c})=>c===i);a!==-1&&(Y(s,{[Se.Unmount](){t.value.splice(a,1)},[Se.Hidden](){t.value[a].state="hidden"}}),!Ye(t)&&n.value&&(e==null||e()))}function l(i){let s=t.value.find(({id:a})=>a===i);return s?s.state!=="visible"&&(s.state="visible"):t.value.push({id:i,state:"visible"}),()=>o(i,Se.Unmount)}return{children:t,register:l,unregister:o}}let Ht=_e.RenderStrategy,tt=O({props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:n,slots:o,expose:l}){let i=w(0);function s(){i.value|=N.Opening,t("beforeEnter")}function a(){i.value&=~N.Opening,t("afterEnter")}function c(){i.value|=N.Closing,t("beforeLeave")}function u(){i.value&=~N.Closing,t("afterLeave")}if(!_n()&&ml())return()=>W(Wt,{...e,onBeforeEnter:s,onAfterEnter:a,onBeforeLeave:c,onAfterLeave:u},o);let r=w(null),v=b(()=>e.unmount?Se.Unmount:Se.Hidden);l({el:r,$el:r});let{show:f,appear:p}=Tn(),{register:g,unregister:d}=Cn(),h=w(f.value?"visible":"hidden"),m={value:!0},S=fe(),k={value:!1},P=Ut(()=>{!k.value&&h.value!=="hidden"&&(h.value="hidden",d(S),u())});j(()=>{let q=g(S);ae(q)}),he(()=>{if(v.value===Se.Hidden&&S){if(f.value&&h.value!=="visible"){h.value="visible";return}Y(h.value,{hidden:()=>d(S),visible:()=>g(S)})}});let T=we(e.enter),C=we(e.enterFrom),L=we(e.enterTo),U=we(e.entered),ve=we(e.leave),te=we(e.leaveFrom),Re=we(e.leaveTo);j(()=>{he(()=>{if(h.value==="visible"){let q=_(r);if(q instanceof Comment&&q.data==="")throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}})});function Z(q){let xe=m.value&&!p.value,ue=_(r);!ue||!(ue instanceof HTMLElement)||xe||(k.value=!0,f.value&&s(),f.value||c(),q(f.value?bt(ue,T,C,L,U,be=>{k.value=!1,be===et.Finished&&a()}):bt(ue,ve,te,Re,U,be=>{k.value=!1,be===et.Finished&&(Ye(P)||(h.value="hidden",d(S),u()))})))}return j(()=>{ye([f],(q,xe,ue)=>{Z(ue),m.value=!1},{immediate:!0})}),ie(dt,P),nt(b(()=>Y(h.value,{visible:N.Open,hidden:N.Closed})|i.value)),()=>{let{appear:q,show:xe,enter:ue,enterFrom:be,enterTo:M,entered:G,leave:le,leaveFrom:ne,leaveTo:Ie,...ge}=e,tl={ref:r},ll={...ge,...p.value&&f.value&&yl.isServer?{class:re([n.class,ge.class,...T,...C])}:{}};return J({theirProps:ll,ourProps:tl,slot:{},slots:o,attrs:n,features:Ht,visible:h.value==="visible",name:"TransitionChild"})}}}),En=tt,Wt=O({inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:n,slots:o}){let l=He(),i=b(()=>e.show===null&&l!==null?(l.value&N.Open)===N.Open:e.show);he(()=>{if(![!0,!1].includes(i.value))throw new Error('A <Transition /> is used but it is missing a `:show="true | false"` prop.')});let s=w(i.value?"visible":"hidden"),a=Ut(()=>{s.value="hidden"}),c=w(!0),u={show:i,appear:b(()=>e.appear||!c.value)};return j(()=>{he(()=>{c.value=!1,i.value?s.value="visible":Ye(a)||(s.value="hidden")})}),ie(dt,a),ie(ct,u),()=>{let r=ot(e,["show","appear","unmount","onBeforeEnter","onBeforeLeave","onAfterEnter","onAfterLeave"]),v={unmount:e.unmount};return J({ourProps:{...v,as:"template"},theirProps:{},slot:{},slots:{...o,default:()=>[W(En,{onBeforeEnter:()=>t("beforeEnter"),onAfterEnter:()=>t("afterEnter"),onBeforeLeave:()=>t("beforeLeave"),onAfterLeave:()=>t("afterLeave"),...n,...v,...r},o.default)]},attrs:{},features:Ht,visible:s.value==="visible",name:"Transition"})}}});const Rn=e=>{let t=document.body;return e.appendTo&&(typeof e.appendTo=="string"&&(t=document.querySelector(e.appendTo)),e.appendTo instanceof HTMLElement&&(t=e.appendTo),t instanceof HTMLElement||(t=document.body)),t},An=(e,t,n,o=null)=>{const l=E(e,t);return l.appContext=o,Ct(l,n),Rn(t).appendChild(n),l},Ue=e=>{var i,s;const t=(i=Je())==null?void 0:i.appContext;if(t){const a=(s=Je())==null?void 0:s.provides;Reflect.set(t,"provides",{...t.provides,...a})}const n=document.createElement("div"),o=()=>{var a;Ct(null,n),(a=n.parentNode)==null||a.removeChild(n)},l=a=>{var r;if(Reflect.has(a,"visible")||(a.visible=!0),typeof a.onClose!="function")a.onClose=o;else{const v=a.onClose;a.onClose=()=>{v(),o()}}const c=An(e,a,n,t),u=(r=c.component)==null?void 0:r.proxy;for(const v in a)Reflect.has(a,v)&&!Reflect.has(u.$props,v)&&(u[v]=a[v]);return c};return l.close=o,l},F=(e,t)=>{const n=(t==null?void 0:t.target)??window,o=navigator.userAgent.toLowerCase().includes("mac");let l=!1,i=t==null?void 0:t.key;const s=()=>{const u=t??{},r=[];return u.ctrlKey&&r.push(o?"Cmd":"Ctrl"),u.shiftKey&&r.push(o?"Option":"Shift"),i&&r.push(i),r},c=bl(n,"keydown",u=>{u.stopPropagation();const r=t??{};if(!(l||!i)&&(i=typeof i=="string"?[i]:i,i.map(v=>v.toLowerCase()).includes(u.key.toLowerCase())&&Ln(r,u))){u.preventDefault();const v=e();if(typeof v!="function")return;const f=R(n)??window,p=g=>{g.preventDefault(),v(),f.removeEventListener("keyup",p)};f.addEventListener("keyup",p)}});return e.hotKey=s(),e.directions=(t==null?void 0:t.directions)??"",e.removeListener=c,e.pause=()=>l=!0,e.unpause=()=>l=!1,e},Ln=(e,t)=>{const n=e.ctrlKey??!1,o=e.shiftKey??!1;if(e.exact)return(n===t.metaKey||n===t.ctrlKey)&&o===t.shiftKey;const l=[];return l.push(n===t.metaKey||n===t.ctrlKey),l.push(o===t.shiftKey),l.every(i=>i)},Dn=(e,t,n)=>{xl(window,e,o=>{var i;const l=o.target;(i=t.value)!=null&&i.contains(l)||n()})},ce=(e,t)=>{const n=de(e,t);if(!n)throw new Error(`Could not resolve ${e.description}`);return n},zt=(e,t)=>{const n=Je();return(n==null?void 0:n.provides[e])||de(e,t)},Bn=(e,t)=>{const n=zt(e,t);if(!n)throw new Error(`Could not resolve ${e.description}`);return n},Yt=Symbol("FORM_STATE"),Me=Symbol("PictodeAppKey"),On=Symbol("PictodePluginKey"),ft=Symbol("PictodeSelectedKey"),Xt=Symbol("PictodePanelFormKey"),Ee=Symbol("PictodeHotKeyListKey"),Mn=O({__name:"Container",props:{config:{},model:{},prop:{default:""},labelWidth:{},size:{default:"small"}},emits:["change"],setup(e,{emit:t}){const n=e,o=ce(Yt),{config:l,prop:i,model:s}=Et(n),a=b(()=>l.value.name??""),c=b(()=>{let v="";if(a.value)v=a.value;else return i.value;return`${i.value}${i.value?".":""}${v}`}),u=b(()=>{let{type:v}=l.value;return v==="form"?"":v==null?void 0:v.replace(/([A-Z])/g,"-$1").toLowerCase()}),r=async(v,f)=>{let p=f;try{typeof l.value.onChange=="function"&&(p=await l.value.onChange(o,p,{model:s.value,config:l.value,prop:v}))}catch(g){console.error(g)}Reflect.get(s.value,v)!==p&&(Reflect.set(s.value,v,p),t("change",s.value))};return(v,f)=>($(),B("div",{class:re([`${v.labelWidth}`=="0"||!R(l).label?"hidden":"","select-none","flex flex-col content-start gap-1 px-1 py-2"])},[y("label",{style:Rt({width:`${v.labelWidth}px`}),class:"text-start text-sm text-gray-600 dark:text-gray-300"},K(v.$t(R(l).label??"")),5),($(),X(wl(u.value),{key:R(l).name,class:re(R(l).class),model:R(s),config:R(l),prop:c.value,onChange:r},null,40,["class","model","config","prop"]))],2))}}),In=["model","size"],Fn=O({__name:"Form",props:{model:{default:()=>({})},config:{default:()=>[]},labelWidth:{default:"200px"},disabled:{type:Boolean,default:!1},height:{default:"auto"},size:{default:"default"},inline:{type:Boolean,default:!1}},emits:["change","update:modelValue"],setup(e,{expose:t,emit:n}){const o=e,{config:l,model:i}=Et(o),s=w(),a=w(i),c=kl({config:l.value,model:a.value}),u=()=>n("change",a.value),r=async()=>{var f;try{return await((f=s.value)==null?void 0:f.validate()),se(a.value)}catch{throw new Error}},v=()=>{var f;return(f=s.value)==null?void 0:f.resetFields()};return ie(Yt,c),t({formModel:a,formState:c,resetForm:v,submitForm:r}),(f,p)=>($(),B("form",{ref_key:"formRef",ref:s,model:a.value,size:f.size,onChange:u},[($(!0),B(H,null,ee(o.config,(g,d)=>($(),X(Mn,{key:d,config:g,model:a.value,onChange:u},null,8,["config","model"]))),128))],40,In))}}),Kn={class:"flex justify-center items-center"},Vn=["name","title"],jn={class:"cursor-pointer"},Q=O({__name:"Button",props:{icon:{},text:{}},setup(e){return(t,n)=>($(),B("button",Sl({type:"button"},t.$attrs),[Te(t.$slots,"default",{},()=>[y("label",Kn,[t.icon?($(),B("iconpark-icon",{key:0,name:t.icon,title:t.$attrs.title,class:"cursor-pointer"},null,8,Vn)):Ce("",!0),y("span",jn,K(t.text),1)])])],16))}});function Gn(e,t){return $(),B("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[y("path",{"fill-rule":"evenodd",d:"M19.916 4.626a.75.75 0 01.208 1.04l-9 13.5a.75.75 0 01-1.154.114l-6-6a.75.75 0 011.06-1.06l5.353 5.353 8.493-12.739a.75.75 0 011.04-.208z","clip-rule":"evenodd"})])}function qt(e,t){return $(),B("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[y("path",{"fill-rule":"evenodd",d:"M11.47 4.72a.75.75 0 011.06 0l3.75 3.75a.75.75 0 01-1.06 1.06L12 6.31 8.78 9.53a.75.75 0 01-1.06-1.06l3.75-3.75zm-3.75 9.75a.75.75 0 011.06 0L12 17.69l3.22-3.22a.75.75 0 111.06 1.06l-3.75 3.75a.75.75 0 01-1.06 0l-3.75-3.75a.75.75 0 010-1.06z","clip-rule":"evenodd"})])}const Nn={class:"relative mt-1"},Un={class:"relative w-full cursor-pointer rounded ring-1 ring-black ring-opacity-5 p-0.5 py-2 pl-3 pr-10 text-left focus:outline-none focus-visible:border-indigo-500 focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75 focus-visible:ring-offset-2 sm:text-sm"},Hn={class:"block truncate"},Wn={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},Jt=O({__name:"Select",props:{modelValue:{}},emits:["update:modelValue","change"],setup(e,{emit:t}){const n=e,o=b({get(){return n.modelValue},set(l){l!==n.modelValue&&(t("update:modelValue",l),t("change",l))}});return(l,i)=>($(),X(R(cn),{modelValue:o.value,"onUpdate:modelValue":i[0]||(i[0]=s=>o.value=s)},{default:D(()=>[y("div",Nn,[E(R(dn),{class:"relative w-full"},{default:D(()=>[Te(l.$slots,"listbox",{selected:o.value},()=>[y("div",Un,[y("span",Hn,K(o.value),1),y("span",Wn,[E(R(qt),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})])])])]),_:3}),E(at,{"leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:D(()=>[E(R(fn),null,{default:D(()=>[Te(l.$slots,"default")]),_:3})]),_:3})])]),_:3},8,["modelValue"]))}}),zn={key:0,class:"absolute inset-y-0 left-0 flex items-center pl-3 text-blue-400"},Zt=O({__name:"SelectOption",props:{value:{type:[String,Number,Boolean]},label:{type:[String,Number,Boolean]}},setup(e){return(t,n)=>($(),X(R(vn),{value:t.value},{default:D(({active:o,selected:l})=>[Te(t.$slots,"default",{active:o,selected:l,item:t.value},()=>[y("li",{class:re([o?"bg-gray-200 dark:bg-navyBlue-100":"","relative rounded-lg cursor-pointer select-none p-2 pl-10 text-gray-900 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-navyBlue-100"])},[y("span",{class:re([l?"font-medium":"font-normal","block truncate"])},K(t.label),3),l?($(),B("span",zn,[E(R(Gn),{class:"h-5 w-5","aria-hidden":"true"})])):Ce("",!0)],2)])]),_:3},8,["value"]))}});class Yn extends _l{constructor(n){super(n);x(this,"className","Iframe");x(this,"iframeElement",document.createElement("iframe"));this.iframeElement.src=n.src??"",this.iframeElement.style.border="none",this.iframeElement.style.width="100%",this.iframeElement.style.height="100%",this.iframeElement.style.display="block",this.iframeElement.style.margin="0",this.iframeElement.style.boxSizing="border-box",super.setContent(this.iframeElement)}_setAttr(n,o){n==="src"&&this.iframeElement?this.iframeElement.src=o:super._setAttr(n,o)}}const oe=(e=[])=>{function t(o){return o.charAt(0).toUpperCase()+o.slice(1)}function n(o){if(typeof o=="string")return t(o);if(Array.isArray(o))return o.map(l=>t(l)).join("/")}return Array.isArray(e)?e.map(o=>n(o)).join("+"):t(e)},Xn=(e=[])=>{function t(o){return o===" "?"Space":o.charAt(0).toUpperCase()+o.slice(1)}function n(o){if(typeof o=="string")return t(o);if(Array.isArray(o))return o.map(l=>t(l)).join(" / ")}return Array.isArray(e)?e.map(o=>n(o)):[t(e)]},qn=["onClick"],Jn={class:"w-full grid grid-cols-[1rem_1fr_1.5fr] gap-2 text-sm font-medium select-none"},Zn=["name"],Qn=O({__name:"ContextMenu",props:{visible:{type:Boolean},x:{},y:{},menuGroups:{default:()=>[]}},emits:["update:visible","close"],setup(e,{emit:t}){const n=e,o=w(null),l=b({get(){return n.visible},set(u){t("update:visible",u),u||t("close")}}),i=b(()=>{const u=Math.max(n.x-2,0),r=Math.max(n.y-2,0),v=12,f=224,p=n.menuGroups.flat().length*40,g=u+f-window.innerWidth+v,d=r+p-window.innerHeight+v;return{left:g>0?`${u-g}px`:`${u}px`,top:d>0?`${r-d}px`:`${r}px`}}),s=b(()=>n.menuGroups.filter(u=>u.length));Dn("mousedown",o,()=>{l.value=!1});const a=u=>{u.preventDefault()},c=u=>{var r;u.disable||((r=u.action)==null||r.call(u),l.value=!1)};return j(()=>{o.value&&o.value.addEventListener("contextmenu",a,!1)}),ae(()=>{o.value&&o.value.removeEventListener("contextmenu",a,!1)}),(u,r)=>($(),X(at,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"translate-y-1 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-1 opacity-0"},{default:D(()=>[l.value?($(),B("div",{key:0,style:Rt(i.value),class:"absolute w-screen max-w-sm transform"},[y("div",{ref_key:"popoverRef",ref:o,class:"absolute w-fit py-1 divide-y rounded-sm bg-gray-50 dark:bg-navyBlue-200 shadow-md ring-1 ring-gray-600 dark:ring-navyBlue-100 ring-opacity-5 focus:outline-none"},[($(!0),B(H,null,ee(s.value,(v,f)=>($(),B("div",{key:f,class:"py-1"},[($(!0),B(H,null,ee(v,(p,g)=>($(),B("div",{key:g,class:re(["flex items-center py-2 px-4 transition duration-150 ease-in-out",[p.disable?"text-gray-300 dark:text-slate-500 cursor-default":"text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-navyBlue-100 cursor-pointer"]]),onClick:d=>c(p)},[y("div",Jn,[p.icon?($(),B("iconpark-icon",{key:0,name:p.icon},null,8,Zn)):Ce("",!0),y("p",null,K(u.$t(p.label)),1),y("p",{class:re([p.disable?"":"text-gray-400 dark:text-slate-400","text-end text-xs"])},K(p.hotKey),3)])],10,qn))),128))]))),128))],512)],4)):Ce("",!0)]),_:1}))}});const eo=(e,t)=>{const n=Ue(Qn),{moveDown:o,moveUp:l,moveBottom:i,moveTop:s,deleteNode:a,selectAll:c,resetStage:u,rulerVisible:r,undo:v,redo:f,makeGroup:p,decomposeGroup:g}=Bn(Ee),d=({event:h})=>{h.evt.preventDefault();let m=!1;const S=e.findTopGroup(h.target);if(h.target instanceof z.Stage)m=!0;else if(!t.value.find(te=>te.id()===h.target.id()||te.id()===(S==null?void 0:S.id()))){const te=S??h.target;e.select(te)}const k=t.value.length&&!m?[{icon:"sent-to-back",label:o.directions,hotKey:oe(o.hotKey),action:o},{icon:"bring-to-front",label:l.directions,hotKey:oe(l.hotKey),action:l},{icon:"bring-to-front-one",label:i.directions,hotKey:oe(i.hotKey),action:i},{icon:"send-to-back",label:s.directions,hotKey:oe(s.hotKey),action:s}]:[],P=t.value.length>1&&!m?[{icon:"group",label:p.directions,hotKey:oe(p.hotKey),action:p}]:[],T=t.value.length===1&&t.value[0]instanceof z.Group?[{icon:"ungroup",label:g.directions,hotKey:oe(g.hotKey),action:g}]:[],C=t.value.length&&!m?[{icon:"delete-one",label:a.directions,hotKey:oe(a.hotKey),action:a}]:[],L=m||t.value.length===0?[{icon:"full-selection",label:c.directions,hotKey:oe(c.hotKey),action:c},{icon:"clear",label:u.directions,hotKey:oe(u.hotKey),action:u},{icon:"ruler",label:r.directions,hotKey:oe(r.hotKey),action:r},{icon:"lattice-pattern",label:"背景",action:()=>{e.triggerBackgroundVisible()}}]:[],U=[{icon:"undo",label:v.directions,hotKey:oe(v.hotKey),disable:!e.canUndo(),action:v},{icon:"redo",label:f.directions,hotKey:oe(f.hotKey),disable:!e.canRedo(),action:f}],ve=[L,k,P,T,U,C];n({x:h.evt.clientX,y:h.evt.clientY,menuGroups:ve})};j(()=>e.on("mouse:contextmenu",d)),ae(()=>e.off("mouse:contextmenu",d))},to=eo,lo=y("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),no={class:"fixed inset-0 overflow-y-auto"},oo={class:"flex min-h-full items-center justify-center p-4 text-center"},vt=O({__name:"Dialog",props:{visible:{type:Boolean}},emits:["update:visible","close"],setup(e,{emit:t}){const n=e,o=b({get(){return n.visible},set(i){t("update:visible",i),i||t("close")}});function l(){o.value=!1}return(i,s)=>($(),X(R(Wt),{appear:"",show:o.value,as:"template"},{default:D(()=>[E(R(en),{as:"div",class:"relative z-10",onClose:l},{default:D(()=>[E(R(tt),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:D(()=>[lo]),_:1}),y("div",no,[y("div",oo,[E(R(tt),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:D(()=>[E(R(tn),{class:"rounded-lg bg-white dark:bg-navyBlue-200 p-4 text-left dark:text-gray-300 align-middle shadow-xl transition-all w-auto"},{default:D(()=>[E(R(ln),{class:"grid grid-cols-[1fr_2rem] py-2"},{default:D(()=>[y("div",null,[Te(i.$slots,"title")]),E(Q,{class:"hover:bg-none",icon:"close",onClick:l})]),_:3}),Te(i.$slots,"default")]),_:3})]),_:3})])])]),_:3})]),_:3},8,["show"]))}}),io={as:"h3",class:"text-lg font-medium leading-6"},ao={class:"flex flex-col"},so={class:"mt-3"},ro={class:"text-sm text-gray-500"},uo={class:"mt-4 flex flex-row justify-between"},co=O({__name:"MessageBox",props:{visible:{type:Boolean},title:{},message:{}},emits:["update:visible","close","submit"],setup(e,{emit:t}){const n=e,o=b({get(){return n.visible},set(s){t("update:visible",s),s||t("close")}}),l=()=>{o.value=!1},i=()=>{t("submit"),l()};return(s,a)=>($(),X(vt,{visible:o.value,onClose:l},{title:D(()=>[y("div",io,K(s.$t(s.title)),1)]),default:D(()=>[y("div",ao,[y("div",so,[y("p",ro,K(s.$t(s.message)),1)]),y("div",uo,[E(Q,{class:"inline-flex justify-center rounded-md border border-transparent bg-red-400 px-4 py-2 text-sm font-medium text-red-50 hover:bg-red-500 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2",title:s.$t("关闭"),text:s.$t("关闭"),onClick:l},null,8,["title","text"]),E(Q,{class:"inline-flex justify-center rounded-md border border-transparent bg-blue-400 px-4 py-2 text-sm font-medium text-blue-50 hover:bg-blue-500 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",title:s.$t("确认"),text:s.$t("确认"),onClick:i},null,8,["title","text"])])])]),_:1},8,["visible"]))}}),fo=()=>{const e=w(!1),t=w();return{loading:e,error:t,execute:async(o=["*"],l=!1)=>{try{return e.value=!0,await Bt(o,l)}catch(i){throw(i instanceof Tl||i instanceof Cl)&&(t.value=i),i}finally{e.value=!1}}}},vo=()=>{const e=w(!1),t=w(),{error:n,execute:o}=fo();return ye(()=>n.value,i=>{t.value=i}),{loading:e,error:t,execute:async(i=["*"])=>{try{e.value=!0;const s=await o(i)??[],a=new FileReader;return new Promise((c,u)=>{a.onload=({target:r})=>{c(r==null?void 0:r.result)},a.onerror=r=>{t.value=r,u(t.value)},a.readAsText(s[0])})}catch(s){t.value=s}finally{e.value=!1}}}},po=y("span",{class:"sr-only"},"Enable notifications",-1),ho=O({__name:"Switch",props:{modelValue:{type:Boolean}},emits:["change","update:modelValue"],setup(e,{emit:t}){const n=e,o=b({get(){return n.modelValue},set(l){l!==n.modelValue&&(t("update:modelValue",l),t("change",l))}});return(l,i)=>($(),X(R(kn),{modelValue:o.value,"onUpdate:modelValue":i[0]||(i[0]=s=>o.value=s),class:re([o.value?"bg-blue-400":"bg-gray-200","relative inline-flex h-6 w-11 items-center rounded-full"])},{default:D(()=>[po,y("span",{class:re([o.value?"translate-x-6":"translate-x-1","inline-block h-4 w-4 transform rounded-full bg-white transition"])},null,2)]),_:1},8,["modelValue","class"]))}});var Be=(e=>(e.HTML="text/html",e.CSS="text/css",e.JPEG="image/jpeg",e.PNG="image/png",e.GIF="image/gif",e.MPEG="audio/mpeg",e.OGG="audio/ogg",e.MP4="video/mp4",e.JSON="application/json",e.JAVASCRIPT="application/javascript",e.ECMASCRIPT="application/ecmascript",e.EXCEL="application/vnb.ms-excel",e.CSV="application/x-csv",e.ZIP="application/zip",e.TGZ="application/x-gtar",e.TAR_GZ="application/x-gzip",e.XML="text/xml",e.TEXT="text/plain",e.SVG="image/svg+xml",e))(Be||{});class go extends El{constructor(t,n){super(`${t} 导出失败`,{cause:n.cause})}}const Qt=(e,t="file",n=Be.TEXT,o="utf-8",l=!1)=>{const i=w(!1),s=w();return{execute:async c=>{i.value=!0,typeof t=="function"&&(t=t(c));try{const u=await Promise.resolve(e(c)),r=document.createElement("a");if(l)r.href=u;else{const v=new Blob([u],{type:`${n};charset=${o}`});r.href=window.URL.createObjectURL(v)}r.download=t,r.click(),window.URL.revokeObjectURL(r.href)}catch(u){throw s.value=new go(t,u),s.value}finally{i.value=!1}},loading:i,error:s}},mo={class:"text-lg"},yo={class:"max-w-5xl min-w-fit flex flex-row justify-between transform overflow-hidden"},bo={class:"flex items-center h-96 w-96"},xo={class:"w-full h-full flex flex-grow justify-center bg-fixed rounded-md p-1",style:{"background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMUlEQVQ4T2NkYGAQYcAP3uCTZhw1gGGYhAGBZIA/nYDCgBDAm9BGDWAAJyRCgLaBCAAgXwixzAS0pgAAAABJRU5ErkJggg==)"}},wo=["src"],ko={class:"flex flex-col flex-wrap w-96 min-w-max gap-6 grow ml-6 antialiased p-2"},So={class:"flex flex-row justify-between items-center"},Po={class:"flex flex-row justify-between items-center"},$o={class:"flex flex-grow justify-around flex-wrap"},_o={class:"flex flex-row justify-between items-center"},To={class:"relative w-full cursor-pointer rounded-lg ring-1 ring-slate-950 dark:ring-navyBlue-100 py-2 pl-2 pr-6 text-left focus:outline-none focus-visible:border-indigo-500 focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75 focus-visible:ring-offset-2 sm:text-sm"},Co={class:"block truncate"},Eo={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},Ro={class:"absolute mt-3 max-h-60 w-fit rounded-lg bg-white dark:bg-navyBlue-200 py-1 text-base shadow-lg ring-1 ring-slate-950 dark:ring-navyBlue-100 focus:outline-none sm:text-sm"},Ao={class:"grow flex flex-col justify-end"},Lo=O({__name:"ExportImageDialog",props:{visible:{type:Boolean}},emits:["update:visible","close"],setup(e,{emit:t}){const n=e,o=ce(Me),l=ce(ft),i=b({get(){return n.visible},set(d){t("update:visible",d),d||t("close")}}),s=[{label:"PNG",value:Be.PNG,format:"png"},{label:"JPEG",value:Be.JPEG,format:"jpeg"}],a=[1,2,3],c=w(!0),u=w(2),r=w(s[0].value),v=w(""),f=()=>{i.value=!1},p=async()=>{const{dataURL:d}=await o.toDataURL(l.value,{pixelRatio:u.value,mimeType:r.value,haveBackground:c.value});v.value=d},g=async()=>{const{execute:d}=Qt(()=>v.value,()=>{var h;return`Pictode-${new Date}.${(h=s.find(m=>m.value===r.value))==null?void 0:h.format}`},r.value,"utf-8",!0);await d(),i.value=!1};return j(()=>{V(()=>{p()})}),(d,h)=>($(),X(vt,{visible:i.value,onClose:f},{title:D(()=>[y("div",mo,K(d.$t("导出图片")),1)]),default:D(()=>[y("div",yo,[y("div",bo,[y("div",xo,[y("img",{src:v.value,class:"object-contain max-w-full max-h-full"},null,8,wo)])]),y("div",ko,[y("div",So,[y("label",null,K(d.$t("背景")),1),E(ho,{modelValue:c.value,"onUpdate:modelValue":h[0]||(h[0]=m=>c.value=m),onChange:p},null,8,["modelValue"])]),y("div",Po,[y("label",null,K(d.$t("缩放比")),1),E(R(At),{modelValue:u.value,"onUpdate:modelValue":h[1]||(h[1]=m=>u.value=m),class:"rounded-lg ring-1 w-24 ring-slate-950 dark:ring-navyBlue-100 p-0.5",onChange:p},{default:D(()=>[y("div",$o,[($(),B(H,null,ee(a,(m,S)=>E(R(Lt),{key:S,value:m,class:"font-mono text-xs"},{default:D(({checked:k})=>[y("div",{class:re(["rounded-lg inline-flex items-center relative cursor-pointer select-none p-2",k?"bg-blue-500":"hover:bg-gray-200 dark:hover:bg-navyBlue-100"])},K(`${m}x`),3)]),_:2},1032,["value"])),64))])]),_:1},8,["modelValue"])]),y("div",_o,[y("label",null,K(d.$t("图片格式")),1),E(Jt,{modelValue:r.value,"onUpdate:modelValue":h[2]||(h[2]=m=>r.value=m),class:"w-24",onChange:p},{listbox:D(()=>{var m;return[y("div",To,[y("span",Co,K((m=s.find(S=>S.value===r.value))==null?void 0:m.label),1),y("span",Eo,[E(R(qt),{class:"h-3 w-3 text-gray-400","aria-hidden":"true"})])])]}),default:D(()=>[y("div",Ro,[($(),B(H,null,ee(s,({label:m,value:S},k)=>E(Zt,{key:k,value:S,label:m,class:"p-1 w-24"},null,8,["value","label"])),64))])]),_:1},8,["modelValue"])]),y("div",Ao,[E(Q,{class:"inline-flex justify-center rounded-md border border-transparent px-4 py-2 text-sm font-medium bg-blue-400 text-blue-50",title:d.$t("下载"),text:d.$t("下载"),onClick:g},null,8,["title","text"])])])])]),_:1},8,["visible"]))}}),Do=(e,t,n)=>{const o=zt(Ee,null);if(o)return o;const l=Ue(co),i=Ue(Lo),{execute:s}=vo(),a={open:F(async()=>{const c=await s([".pictode"]);c&&t.fromJSON(c)},{key:"o",directions:"打开",exact:!0,ctrlKey:!0,target:e}),exportImg:F(()=>{i({})},{key:"e",directions:"导出图片",exact:!0,ctrlKey:!0,shiftKey:!0,target:e}),moveDown:F(()=>{t.moveDown(...n.value)},{key:"[",directions:"下移一层",exact:!0,ctrlKey:!0,target:e}),moveUp:F(()=>{t.moveUp(...n.value)},{key:"]",directions:"上移一层",exact:!0,ctrlKey:!0,target:e}),moveBottom:F(()=>{t.moveBottom(...n.value)},{key:"[",directions:"置于底层",exact:!0,ctrlKey:!0,shiftKey:!0,target:e}),moveTop:F(()=>{t.moveTop(...n.value)},{key:"]",directions:"置于顶层",exact:!0,ctrlKey:!0,shiftKey:!0,target:e}),deleteNode:F(()=>{t.remove(...n.value)},{key:["delete","backspace"],directions:"删除",target:e}),selectAll:F(()=>{const c=t.isPluginEnable("selectorPlugin");t.triggerSelector(!0),t.selectAll(),t.triggerSelector(c)},{key:"a",directions:"全部选中",exact:!0,ctrlKey:!0,target:e}),resetStage:F(()=>{l({title:"清除画布",message:"将会清空画布内容，是否继续？",onSubmit:()=>{t.clear(),l.close()}})},{key:"r",directions:"重置画布",exact:!0,ctrlKey:!0,target:e}),rulerVisible:F(()=>{t.triggerRulerVisible()},{key:"r",directions:"标尺",exact:!0,ctrlKey:!0,shiftKey:!0,target:e}),undo:F(()=>{t.undo()},{key:"z",directions:"撤销",exact:!0,ctrlKey:!0,target:e}),redo:F(()=>{t.redo()},{key:"y",directions:"重做",exact:!0,ctrlKey:!0,target:e}),stageDrag:F(()=>(t.triggerPanning(!0),()=>{t.triggerPanning(!1)}),{key:" ",directions:"移动画布",target:e}),mouseWheel:F(()=>(t.triggerMouseWheel(!0),()=>{t.triggerMouseWheel(!1)}),{key:["Control","Meta"],directions:"缩放画布",target:e}),makeGroup:F(()=>{const c=t.makeGroup(n.value);Array.isArray(c)||t.select(c)},{key:"g",directions:"组合",ctrlKey:!0,shiftKey:!0,exact:!0,target:e}),decomposeGroup:F(()=>{const c=n.value[0];c instanceof z.Group&&t.decomposeGroup(c)},{key:"j",directions:"解除组合",ctrlKey:!0,shiftKey:!0,exact:!0,target:e}),alignLeft:F(()=>{n.value.length<1||t.alignLeft(n.value)},{key:"a",directions:"左对齐",shiftKey:!0,target:e}),alignCenterX:F(()=>{n.value.length<1||t.alignCenterX(n.value)},{key:"h",directions:"水平居中",shiftKey:!0,target:e}),alignRight:F(()=>{n.value.length<1||t.alignRight(n.value)},{key:"d",directions:"右对齐",shiftKey:!0,target:e}),alignTop:F(()=>{n.value.length<1||t.alignTop(n.value)},{key:"w",directions:"顶对齐",shiftKey:!0,target:e}),alignCenterY:F(()=>{n.value.length<1||t.alignCenterY(n.value)},{key:"v",directions:"垂直居中",shiftKey:!0,target:e}),alignBottom:F(()=>{n.value.length<1||t.alignBottom(n.value)},{key:"s",directions:"底对齐",shiftKey:!0,target:e}),distributeX:F(()=>{n.value.length<2||t.dispersionX(n.value)},{key:"h",directions:"水平分布",ctrlKey:!0,shiftKey:!0,target:e}),distributeY:F(()=>{n.value.length<2||t.dispersionY(n.value)},{key:"v",directions:"垂直分布",ctrlKey:!0,shiftKey:!0,target:e})};return ie(Ee,a),a},Bo=Do;st.prototype.triggerRulerVisible=function(e){const t=this.getPlugin("rulerPlugin");return t&&t.triggerVisible(e),this};st.prototype.rulerUpdate=function(){const e=this.getPlugin("rulerPlugin");return e&&e.update(),this};class Oo{constructor(t,n,o){x(this,"ruler");x(this,"rulerFill");x(this,"tickMarkGroup");x(this,"ticks");x(this,"tickText");x(this,"tickTexts",[]);x(this,"width");x(this,"height");x(this,"axis","x");x(this,"jump",50);x(this,"fill","#ffffff");x(this,"thickness",40);x(this,"enabled",!0);x(this,"update",()=>{this.enabled&&(this.updateSize(),this.updateScale(),this.updatePosition(),this.updateTicks())});this.app=t,this.axis=n,this.jump=o.jump,this.fill=o.fill,this.thickness=o.thickness,this.width=t.stage.width(),this.height=t.stage.height(),this.ruler=new z.Group({name:`pictode:ruler:${n}`,x:0,y:0,clip:{x:0,y:0,width:this.width,height:this.height}}),this.rulerFill=new z.Rect({name:`pictode:ruler:${n}:fill`,x:0,y:0,width:this.axis==="x"?this.width:this.thickness,height:this.axis==="x"?this.thickness:this.height,fill:this.fill}),this.ruler.add(this.rulerFill),this.tickMarkGroup=new z.Group,this.ruler.add(this.tickMarkGroup),this.ticks=new z.Path({name:`pictode:ruler:${n}:path`,data:"",stroke:"black"}),this.ruler.add(this.ticks),this.tickText=new z.Text({fill:"black",fontSize:10,fontFamily:"Calibri",text:"",align:"center"}),this.app.optionLayer.add(this.ruler),this.app.on("canvas:resized",this.update),this.app.on("canvas:drag:move",this.update),this.app.on("canvas:zoom:end",this.update),this.update(),this.triggerVisible(o.enabled)}destroy(){this.app.off("canvas:resized",this.update),this.app.off("canvas:drag:move",this.update),this.app.off("canvas:zoom:end",this.update),this.ruler.remove()}triggerVisible(t){this.enabled=t,this.ruler.visible(t),this.update()}updateSize(){this.width=this.app.stage.width(),this.height=this.app.stage.height(),this.ruler.clip({x:0,y:0,width:this.width,height:this.height}),this.axis==="x"?(this.rulerFill.width(this.width),this.ruler.width(this.width)):(this.rulerFill.height(this.height),this.ruler.height(this.height))}updateScale(){const t=1/this.app.stage.scaleX(),n=1/this.app.stage.scaleY();this.ruler.scale({x:t,y:n})}updatePosition(){const t={x:-this.app.stage.x()/this.app.stage.scaleX(),y:-this.app.stage.y()/this.app.stage.scaleY()};this.ruler.position(t)}updateTicks(){const t=this.app.stage,n=this.axis==="x"?t.x():t.y(),o=this.axis==="x"?this.width:this.height,l=this.axis==="x"?t.scaleX():t.scaleY();let i=this.jump/l;const s=i*l,a=-Math.ceil(n/s),c=Math.ceil((o-n)/s),u=n+a*s,r=n+c*s;let v=[],f=0,p=a*i;const g=5;for(let d=u;d<r;d=d+s){if(v.push(this.axis==="x"?`M${d},0 L${d},${g}`:`M0,${d} L$${g},${d}`),this.tickTexts.length<f+1){const h=this.tickText.clone({text:p,width:100});h.align(this.axis==="x"?"center":"left"),h.name("tickText"+this.axis),this.tickTexts[f]=h,this.tickMarkGroup.add(h)}this.tickTexts[f].setAttrs({x:this.axis==="x"?d-this.tickTexts[f].width()/2:10,y:this.axis==="x"?10:d-this.tickTexts[f].height()/2,text:Math.floor(p),visible:!0}),f=f+1,p=p+i}this.ticks.data(v.join(" "))}}const Mo={enabled:!0,axis:"x",jump:50,thickness:40,fill:"#ffffff"};class Io{constructor(t){x(this,"name","rulerPlugin");x(this,"app");x(this,"options");x(this,"rulers");x(this,"axis");this.options={...Mo,...t},this.axis=[],this.rulers=[],typeof this.options.axis=="string"?this.axis=[this.options.axis]:this.axis=this.options.axis}install(t){this.app=t;for(const n of this.axis)this.rulers=this.rulers||[],this.rulers.push(new Oo(this.app,n,{...this.options}));this.app.emit("ruler:installed",{ruler:this})}destroy(){var t;this.rulers.forEach(n=>n.destroy()),(t=this.app)==null||t.emit("ruler:destroy",{ruler:this})}enable(){this.rulers.forEach(t=>t.triggerVisible(!0))}disable(){this.rulers.forEach(t=>t.triggerVisible(!1))}isEnabled(){return this.rulers.some(t=>t.enabled)}triggerVisible(t){const n=t||!this.isEnabled();this.rulers.forEach(o=>o.triggerVisible(n))}update(){this.rulers.forEach(t=>t.update())}}const Fo={bindTool:["ellipseTool"],bindShape:["Ellipse"],formConfig:[{name:"stroke",label:"描边",type:"Color"},{name:"fill",label:"填充",type:"Color"},{name:"strokeWidth",label:"描边宽度",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:2,title:"细"},{label:"line-2",value:4,title:"粗"},{label:"line-3",value:8,title:"特粗"}]},{name:"dash",label:"边框样式",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:[],title:"实线"},{label:"dotted-line-2",value:[12,8],title:"虚线"},{label:"dotted-line-1",value:[6,4],title:"点虚线"}]},{name:"opacity",label:"透明度",type:"Slider"}],model:{stroke:"#000",fill:"#ffffff",strokeWidth:2,dash:[],opacity:1}},Ko={bindTool:["iframeTool"],bindShape:["Iframe"],formConfig:[{name:"src",label:"网址",type:"Texts"},{name:"stroke",label:"描边",type:"Color"},{name:"strokeWidth",label:"描边宽度",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:2,title:"细"},{label:"line-2",value:4,title:"粗"},{label:"line-3",value:8,title:"特粗"}]},{name:"dash",label:"边框样式",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:[],title:"实线"},{label:"dotted-line-2",value:[12,8],title:"虚线"},{label:"dotted-line-1",value:[6,4],title:"点虚线"}]},{name:"opacity",label:"透明度",type:"Slider"}],model:{src:"https://cn.vuejs.org/",stroke:"#000000",strokeWidth:2,dash:[],opacity:1}},Vo={bindTool:["imageTool"],bindShape:["Image"],formConfig:[{name:"stroke",label:"描边",type:"Color"},{name:"strokeWidth",label:"描边宽度",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:2,title:"细"},{label:"line-2",value:4,title:"粗"},{label:"line-3",value:8,title:"特粗"}]},{name:"dash",label:"边框样式",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:[],title:"实线"},{label:"dotted-line-2",value:[12,8],title:"虚线"},{label:"dotted-line-1",value:[6,4],title:"点虚线"}]},{name:"opacity",label:"透明度",type:"Slider"}],model:{stroke:"#ffffff00",strokeWidth:2,dash:[],opacity:1}},jo={bindTool:["lineTool","drawingTool"],bindShape:["Line"],formConfig:[{name:"stroke",label:"描边",type:"Color"},{name:"strokeWidth",label:"描边宽度",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:2,title:"细"},{label:"line-2",value:4,title:"粗"},{label:"line-3",value:8,title:"特粗"}]},{name:"tension",label:"边角",type:"RadioGroup",optionType:"icon",options:[{label:"node-flat",value:0,title:"直角"},{label:"node-round",value:.4,title:"圆角"}]},{name:"dash",label:"边框样式",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:[],title:"实线"},{label:"dotted-line-2",value:[12,8],title:"虚线"},{label:"dotted-line-1",value:[6,4],title:"点虚线"}]},{name:"opacity",label:"透明度",type:"Slider"}],model:{stroke:"#000000",strokeWidth:2,opacity:1,tension:.4,dash:[]}},Go={bindTool:["rectTool"],bindShape:["Rect"],formConfig:[{name:"stroke",label:"描边",type:"Color"},{name:"fill",label:"填充",type:"Color"},{name:"strokeWidth",label:"描边宽度",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:2,title:"细"},{label:"line-2",value:4,title:"粗"},{label:"line-3",value:8,title:"特粗"}]},{name:"cornerRadius",label:"边角",type:"RadioGroup",optionType:"icon",options:[{label:"node-flat",value:0,title:"直角"},{label:"node-round",value:20,title:"圆角"}]},{name:"dash",label:"边框样式",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:[],title:"实线"},{label:"dotted-line-2",value:[12,8],title:"虚线"},{label:"dotted-line-1",value:[6,4],title:"点虚线"}]},{name:"opacity",label:"透明度",type:"Slider"}],model:{stroke:"#000000",fill:"#ffffff",strokeWidth:2,cornerRadius:20,dash:[],opacity:1}},No={bindTool:["regularPolygonTool"],bindShape:["RegularPolygon"],formConfig:[{name:"stroke",label:"描边",type:"Color"},{name:"fill",label:"填充",type:"Color"},{name:"strokeWidth",label:"描边宽度",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:2,title:"细"},{label:"line-2",value:4,title:"粗"},{label:"line-3",value:8,title:"特粗"}]},{name:"dash",label:"边框样式",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:[],title:"实线"},{label:"dotted-line-2",value:[12,8],title:"虚线"},{label:"dotted-line-1",value:[6,4],title:"点虚线"}]},{name:"opacity",label:"透明度",type:"Slider"}],model:{stroke:"#000000",fill:"#ffffff",strokeWidth:2,dash:[],opacity:1}},Uo={bindTool:["textTool"],bindShape:["Text"],formConfig:[{name:"fill",label:"填充",type:"Color"},{name:"fontSize",label:"字体大小",type:"RadioGroup",optionType:"text",options:[{label:"S",value:12,class:"w-[1rem] h-[1rem] flex items-center justify-center",title:"S"},{label:"M",value:16,class:"w-[1rem] h-[1rem] flex items-center justify-center",title:"M"},{label:"L",value:20,class:"w-[1rem] h-[1rem] flex items-center justify-center",title:"L"},{label:"XL",value:24,class:"w-[1rem] h-[1rem] flex items-center justify-center",title:"XL"}]},{name:"stroke",label:"描边",type:"Color"},{name:"strokeWidth",label:"描边宽度",type:"Slider",min:0,max:2},{name:"opacity",label:"透明度",type:"Slider"}],model:{stroke:"#000000",strokeWidth:0,fill:"#000000",fontSize:16,opacity:1}},el=[No,Fo,Vo,jo,Go,Uo,Ko],Ho=e=>el.find(({bindShape:t})=>t.includes(e)),Wo=e=>el.find(({bindTool:t})=>t.includes(e)),zo=()=>{const e=new st,t=new Rl({enabled:!0,stackSize:50}),n=new Al({enabled:!0,multipleSelect:!0}),o=new Ll({enabled:!0}),l=new Io({enabled:!1,axis:["x","y"]});e.use(l),e.use(t),e.use(n),e.use(o);const i=w([]),s=w([]),a=w({}),c=w(e.scale()),u=({selected:g})=>{var h,m;if(i.value=g,((h=e.curTool)==null?void 0:h.name)!=="selectTool")return;const d=Ho(((m=g[0])==null?void 0:m.className)??"");s.value=(d==null?void 0:d.formConfig)??[],d!=null&&d.model&&(d.model=Object.keys(d.model).reduce((S,k)=>{var P;return{...S,[k]:(P=i.value)==null?void 0:P[0].attrs[k]}},{})),a.value=(d==null?void 0:d.model)??{}},r=({curTool:g})=>{if(!g)return;const d=Wo(g.name);d&&(s.value=d.formConfig,a.value=d.model,g.config={...g.config,...a.value})},v=({scale:g})=>{c.value=g},f=({event:g})=>{g.evt.button===1&&e.triggerPanning(!0)},p=({event:g})=>{g.evt.button===1&&e.triggerPanning(!1)};return j(()=>{e.on("selected:changed",u),e.on("tool:changed",r),e.on("canvas:zoom:end",v),e.on("mouse:down",f),e.on("mouse:up",p)}),ae(()=>{e.off("selected:changed",u),e.off("tool:changed",r),e.off("canvas:zoom:end",v),e.off("mouse:down",f),e.off("mouse:up",p)}),ie(Me,e),ie(ft,i),ie(On,{selectorPlugin:n,historyPlugin:t}),ie(Xt,{panelFormConfig:s,panelFormModel:a}),{app:e,scale:c,selected:i,panelFormConfig:s,panelFormModel:a}},Yo=zo,Xo={class:"w-full min-w-fit md:min-w-[60rem] h-[40rem] p-2 overflow-auto scrollbar scrollbar-w-2 scrollbar-thumb-gray-200 scrollbar-track-gray-100 scrollbar-thumb-rounded-lg scrollbar-track-rounded-lg"},qo={class:"my-4 text-xl font-bold"},Jo={class:"columns-2 gap-8"},Zo={class:"font-bold text-base"},Qo={class:"rounded-lg ring-1 ring-slate-950 dark:ring-navyBlue-100 divide-y divide-slate-950 dark:divide-navyBlue-100 mt-2 text-xs"},ei={class:"justify-self-end flex flex-row gap-1"},ti=O({__name:"HotKeyList",props:{visible:{type:Boolean}},emits:["update:visible","close"],setup(e,{emit:t}){const n=e,{undo:o,redo:l,deleteNode:i,selectAll:s,resetStage:a,stageDrag:c,mouseWheel:u,moveUp:r,moveBottom:v,moveTop:f,moveDown:p,makeGroup:g,decomposeGroup:d,alignBottom:h,alignLeft:m,alignCenterX:S,alignCenterY:k,alignRight:P,alignTop:T,distributeX:C,distributeY:L,rulerVisible:U}=ce(Ee),ve=[{title:"编辑",hotKeyList:[o,l,s,i,a,U]},{title:"视图",hotKeyList:[c,u]},{title:"转换",hotKeyList:[f,r,p,v,g,d,m,S,P,T,k,h,C,L]}],te=b({get(){return n.visible},set(Z){t("update:visible",Z),Z||t("close")}}),Re=()=>{te.value=!1};return(Z,q)=>($(),X(vt,{visible:te.value,onClose:Re},{title:D(()=>[Pl(K(Z.$t("帮助中心")),1)]),default:D(()=>[y("div",Xo,[y("h3",qo,K(Z.$t("快捷键列表")),1),y("div",Jo,[($(),B(H,null,ee(ve,({title:xe,hotKeyList:ue},be)=>y("div",{key:be,class:"w-full break-inside-avoid-column pb-4"},[y("h3",Zo,K(Z.$t(xe)),1),y("div",Qo,[($(!0),B(H,null,ee(ue,(M,G)=>($(),B("div",{key:G,class:"w-full p-4 flex flex-row justify-between items-center"},[y("div",null,K(Z.$t(M.directions??"")),1),y("div",ei,[($(!0),B(H,null,ee(R(Xn)(M.hotKey),(le,ne)=>($(),B("i",{key:ne,class:"p-2 min-w-fit bg-blue-100 rounded-lg dark:text-gray-600"},K(le),1))),128))])]))),128))])])),64))])])]),_:1},8,["visible"]))}}),li=y("iconpark-icon",{name:"hamburger",class:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-navyBlue-100 text-lg dark:text-gray-300"},null,-1),ni={class:"relative"},oi={class:"w-full flex flex-row justify-between items-center gap-2"},ii=["name"],ai={class:"flex-1 text-start"},si={class:"text-xs text-gray-700 dark:text-slate-400"},ri=O({__name:"Menu",setup(e){const t=ce(Me),{open:n,resetStage:o,exportImg:l,rulerVisible:i}=ce(Ee),{execute:s}=Qt(()=>t.toJSON(),()=>`Pictode-${new Date}.pictode`,Be.JSON,"utf-8"),a=[[{icon:"folder-close",label:n.directions??"",hotkey:n.hotKey,handler:n},{icon:"hard-disk-one",label:"保存到本地",handler:()=>{s()}},{icon:"down-picture",label:l.directions??"",hotkey:l.hotKey,handler:l},{icon:"clear",label:o.directions??"",hotkey:o.hotKey,handler:o},{icon:"ruler",label:i.directions??"",hotkey:i.hotKey,handler:i}]];return(c,u)=>($(),X(R(mn),{as:"div"},{default:D(()=>[E(R(yn),{class:"outline-none flex justify-start bg-white dark:bg-navyBlue-200 rounded-lg"},{default:D(()=>[li]),_:1}),E(at,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:D(()=>[y("div",ni,[E(R(bn),{class:"absolute mt-2 w-60 p-1 divide-y rounded-lg bg-white dark:bg-navyBlue-200 shadow-md ring-1 ring-slate-950 dark:ring-navyBlue-100 focus:outline-none"},{default:D(()=>[($(),B(H,null,ee(a,(r,v)=>y("div",{key:v,class:"px-1 py-1"},[($(!0),B(H,null,ee(r,(f,p)=>($(),X(R(xn),{key:p,class:"hover:bg-gray-200 dark:hover:bg-navyBlue-100"},{default:D(({active:g})=>[E(Q,{class:re([g?"bg-blue-100":"text-gray-900 ","group flex w-full items-center rounded-md px-2 py-2 text-sm dark:text-gray-300"]),title:c.$t(f.label),onClick:f.handler},{default:D(()=>[y("div",oi,[y("iconpark-icon",{name:f.icon},null,8,ii),y("span",ai,K(c.$t(f.label)),1),y("span",si,K(R(oe)(f.hotkey)),1)])]),_:2},1032,["class","title","onClick"])]),_:2},1024))),128))])),64))]),_:1})])]),_:1})]),_:1}))}}),ui={key:0},ci={key:0,class:"flex flex-col content-start gap-1 px-1 py-2 select-none"},di={class:"text-start text-sm text-gray-600 dark:text-gray-300"},fi={class:"flex flex-row justify-start flex-wrap gap-2"},vi={key:1,class:"select-none p-2"},pi=y("iconpark-icon",null,null,-1),hi=[pi],gi={class:"flex flex-col content-start gap-1 px-1 py-2 select-none"},mi={class:"text-start text-sm text-gray-600 dark:text-gray-300"},yi={class:"flex flex-row justify-start flex-wrap gap-2"},bi=O({__name:"PropertyPanel",setup(e){const t=ce(Me),n=ce(ft),{panelFormConfig:o,panelFormModel:l}=ce(Xt),{moveBottom:i,moveDown:s,moveUp:a,moveTop:c,alignLeft:u,alignRight:r,alignTop:v,alignBottom:f,alignCenterX:p,alignCenterY:g,distributeX:d,distributeY:h}=ce(Ee),m=b(()=>[{icon:"bring-to-front-one",action:i},{icon:"sent-to-back",action:s},{icon:"bring-to-front",action:a},{icon:"send-to-back",action:c}]),S=b(()=>[{icon:"align-left",visible:n.value.length>1,action:u},{icon:"align-horizontally",visible:n.value.length>1,action:p},{icon:"align-right",visible:n.value.length>1,action:r},{icon:"distribute-horizontal-spacing",visible:n.value.length>2,action:d},{icon:"align-top",visible:n.value.length>1,action:v},{icon:"align-vertically",visible:n.value.length>1,action:g},{icon:"align-bottom",visible:n.value.length>1,action:f},{icon:"distribute-vertical-spacing",visible:n.value.length>2,action:h}]),k=b(()=>n.value.length>1),P=T=>{t.update(...n.value.map(C=>{const L=C.toObject();return L.attrs={...L.attrs,...T},L}))};return(T,C)=>R(o).length?($(),B("div",ui,[E(R(Fn),{model:R(l),config:R(o),onChange:P},null,8,["model","config"]),k.value?($(),B("div",ci,[y("label",di,K(T.$t("对齐")),1),y("div",fi,[($(!0),B(H,null,ee(S.value,(L,U)=>($(),B("div",{key:U},[L.visible?($(),X(Q,{key:0,class:"rounded-lg inline-flex items-center relative cursor-pointer select-none p-2 hover:bg-gray-200 dark:hover:bg-navyBlue-100 dark:text-gray-300",title:T.$t(L.action.directions??""),icon:L.icon,onClick:L.action},null,8,["title","icon","onClick"])):($(),B("div",vi,hi))]))),128))])])):Ce("",!0),y("div",gi,[y("label",mi,K(T.$t("层级")),1),y("div",yi,[($(!0),B(H,null,ee(m.value,(L,U)=>($(),X(Q,{key:U,class:"rounded-lg inline-flex items-center relative cursor-pointer select-none p-2 hover:bg-gray-200 dark:hover:bg-navyBlue-100 dark:text-gray-300",title:T.$t(L.action.directions??""),icon:L.icon,onClick:L.action},null,8,["title","icon","onClick"]))),128))])])])):Ce("",!0)}});class xi{constructor({config:t,hooks:n}){x(this,"name","regularPolygonTool");x(this,"hooks");x(this,"config");x(this,"regularPolygon",null);x(this,"startPointer",new pe(0,0));this.config=t,this.hooks=n}mousedown({app:t}){var n,o;this.regularPolygon||(this.startPointer.clone(t.pointer),this.regularPolygon=new z.RegularPolygon({sides:4,radius:0,strokeScaleEnabled:!1,...this.config}),this.regularPolygon.setPosition(this.startPointer),t.add(this.regularPolygon),(o=(n=this.hooks)==null?void 0:n.onStartDrawing)==null||o.call(n,t,this.regularPolygon))}mousemove({app:t}){if(!this.regularPolygon)return;const n=t.pointer.x-this.startPointer.x,o=t.pointer.y-this.startPointer.y,l=new pe(this.startPointer.x+n/2,this.startPointer.y+o/2);this.regularPolygon.setPosition(l),this.regularPolygon.radius(l.distanceTo(t.pointer)),t.render()}mouseup({app:t,pointer:n}){var o,l,i;if(this.regularPolygon){if(this.startPointer.eq(n)){(o=this.regularPolygon)==null||o.destroy(),this.regularPolygon=null;return}(i=(l=this.hooks)==null?void 0:l.onCompleteDrawing)==null||i.call(l,t,this.regularPolygon),this.regularPolygon=null,this.startPointer.setXY(0,0)}}enableChanged(){this.regularPolygon=null,this.startPointer.setXY(0,0)}}class wi{constructor({config:t,hooks:n}){x(this,"name","drawingTool");x(this,"config");x(this,"hooks");x(this,"line",null);x(this,"points",[]);this.config=t,this.hooks=n}mousedown({app:t}){var o,l;const n=this.points.at(-1);n!=null&&n.eq(t.pointer)||this.points.push(t.pointer),!this.line&&(this.line=new z.Line({points:De(this.points),globalCompositeOperation:"source-over",lineCap:"round",lineJoin:"round",strokeScaleEnabled:!1,hitStrokeWidth:20,...this.config}),t.add(this.line),(l=(o=this.hooks)==null?void 0:o.onStartDrawing)==null||l.call(o,t,this.line))}mousemove({app:t,event:n}){this.line&&(n.evt.stopPropagation(),this.points.push(t.pointer),this.line.points(De(this.points)))}mouseup({app:t,pointer:n}){var l,i;if(!this.line)return;const o=this.points.at(-1);this.points.length<=6&&o&&n.distanceTo(o)<10&&this.line&&this.line.destroy(),(i=(l=this.hooks)==null?void 0:l.onCompleteDrawing)==null||i.call(l,t,this.line),this.line=null,this.points=[]}enableChanged(){this.line=null,this.points=[]}}class ki{constructor({config:t,hooks:n}){x(this,"name","ellipseTool");x(this,"config");x(this,"hooks");x(this,"ellipse",null);x(this,"startPointer",new pe(0,0));this.config=t,this.hooks=n}mousedown({app:t}){this.ellipse||(this.startPointer.clone(t.pointer),this.ellipse=new z.Ellipse({radiusX:0,radiusY:0,strokeScaleEnabled:!1,...this.config}),this.ellipse.setPosition(this.startPointer),this.ellipse.radius(new pe(0,0)),t.add(this.ellipse))}mousemove({app:t}){if(!this.ellipse)return;const n=t.pointer.x-this.startPointer.x,o=t.pointer.y-this.startPointer.y,l=new pe(Math.abs(n)/2,Math.abs(o)/2);this.ellipse.setPosition(new pe(this.startPointer.x+n/2,this.startPointer.y+o/2)),this.ellipse.radius(l),t.render()}mouseup({app:t,pointer:n}){var o,l,i;if(this.ellipse){if(this.startPointer.eq(n)){(o=this.ellipse)==null||o.destroy(),this.ellipse=null;return}(i=(l=this.hooks)==null?void 0:l.onCompleteDrawing)==null||i.call(l,t,this.ellipse),this.ellipse=null,this.startPointer.setXY(0,0)}}enableChanged(){this.ellipse=null,this.startPointer.setXY(0,0)}}class Si{constructor({config:t,hooks:n}){x(this,"name","lineTool");x(this,"config");x(this,"hooks");x(this,"points",[]);x(this,"line",null);this.config=t,this.hooks=n}mousedown({app:t}){var o,l;this.line||(this.line=new z.Line({points:De(this.points),fill:"transparent",strokeScaleEnabled:!1,hitStrokeWidth:20,...this.config}),t.add(this.line),(l=(o=this.hooks)==null?void 0:o.onStartDrawing)==null||l.call(o,t,this.line));const n=this.points.at(-1);n!=null&&n.eq(t.pointer)||this.points.push(t.pointer),this.line.points(De(this.points))}mousemove({app:t,pointer:n}){this.line&&(this.line.points(De(this.points).concat(n.x,n.y)),t.render())}doubleClick({app:t}){var n,o;this.line&&((o=(n=this.hooks)==null?void 0:n.onCompleteDrawing)==null||o.call(n,t,this.line),this.line=null,this.points=[])}enableChanged(){this.line=null,this.points=[]}}class Pi{constructor({config:t,hooks:n}){x(this,"name","rectTool");x(this,"config");x(this,"hooks");x(this,"startPointer",new pe(0,0));x(this,"rectangle",null);this.config=t,this.hooks=n}mousedown({app:t}){var n,o;this.rectangle||(this.startPointer.clone(t.pointer),this.rectangle=new z.Rect({strokeScaleEnabled:!1,...this.config}),this.rectangle.setPosition(this.startPointer),this.rectangle.width(0),this.rectangle.height(0),t.add(this.rectangle),(o=(n=this.hooks)==null?void 0:n.onStartDrawing)==null||o.call(n,t,this.rectangle))}mousemove({app:t}){this.rectangle&&(this.rectangle.setPosition(new pe(Math.min(this.startPointer.x,t.pointer.x),Math.min(this.startPointer.y,t.pointer.y))),this.rectangle.width(Math.abs(t.pointer.x-this.startPointer.x)),this.rectangle.height(Math.abs(t.pointer.y-this.startPointer.y)),t.render())}mouseup({app:t,pointer:n}){var o,l,i;if(this.rectangle){if(this.startPointer.eq(n)){(o=this.rectangle)==null||o.destroy(),this.rectangle=null;return}(i=(l=this.hooks)==null?void 0:l.onCompleteDrawing)==null||i.call(l,t,this.rectangle),this.rectangle=null,this.startPointer.setXY(0,0)}}enableChanged(){this.rectangle=null,this.startPointer.setXY(0,0)}}class $i{constructor(t){x(this,"name","eraserTool");x(this,"hooks");x(this,"targetMap",new Map);x(this,"isEraser",!1);this.hooks=t.hooks}mousedown({event:t}){this.isEraser=!0,!(t.target instanceof z.Stage)&&(this.targetMap.set(t.target.id(),{node:t.target,opacity:t.target.attrs.opacity}),t.target.opacity(.3))}mouseup({app:t}){this.targetMap.size&&(t.remove(...[...this.targetMap.values()].map(({node:n,opacity:o})=>(n.opacity(o),n))),this.targetMap.clear(),this.isEraser=!1)}mousemove({event:t}){!this.isEraser||t.target instanceof z.Stage||this.targetMap.get(t.target.id())||(this.targetMap.set(t.target.id(),{node:t.target,opacity:t.target.attrs.opacity}),t.target.opacity(.3))}enableChanged(){this.targetMap.clear(),this.isEraser=!1}}class _i{constructor({config:t,hooks:n}){x(this,"name","ArrowTool");x(this,"config");x(this,"hooks");x(this,"startPoint");x(this,"endPoint");x(this,"arrow");this.config=t,this.hooks=n}drawArrow(t){var n,o;!this.startPoint||!this.endPoint||(this.arrow=new z.Arrow({points:[this.startPoint.x,this.startPoint.y,this.endPoint.x,this.endPoint.y],pointerLength:10,pointerWidth:10,fill:"black",stroke:"black",strokeWidth:2,...this.config}),t.add(this.arrow),(o=(n=this.hooks)==null?void 0:n.onStartDrawing)==null||o.call(n,t,this.arrow))}stop(){this.startPoint=void 0,this.endPoint=void 0,this.arrow=void 0}mousedown({app:t}){var n,o;this.arrow?((o=(n=this.hooks)==null?void 0:n.onCompleteDrawing)==null||o.call(n,t,this.arrow),this.stop()):(this.startPoint=t.pointer,this.endPoint=t.pointer,this.drawArrow(t))}mousemove({app:t,pointer:n}){this.arrow&&this.startPoint&&this.endPoint&&(this.arrow.points([this.startPoint.x,this.startPoint.y,n.x,n.y]),t.render())}}class Ti{constructor({config:t,hooks:n}){x(this,"name","iframeTool");x(this,"config");x(this,"hooks");x(this,"iframe",null);x(this,"startPointer",new pe(0,0));this.config=t,this.hooks=n}mousedown({app:t}){var n,o;this.iframe||(this.startPointer.clone(t.pointer),this.iframe=new Yn({strokeScaleEnabled:!1,...this.config}),this.iframe.setPosition(this.startPointer),this.iframe.width(0),this.iframe.height(0),t.add(this.iframe),(o=(n=this.hooks)==null?void 0:n.onStartDrawing)==null||o.call(n,t,this.iframe))}mousemove({app:t}){this.iframe&&(this.iframe.setPosition(new pe(Math.min(this.startPointer.x,t.pointer.x),Math.min(this.startPointer.y,t.pointer.y))),this.iframe.width(Math.abs(t.pointer.x-this.startPointer.x)),this.iframe.height(Math.abs(t.pointer.y-this.startPointer.y)),t.render())}mouseup({app:t,pointer:n}){var o,l,i;if(this.iframe){if(this.startPointer.eq(n)){(o=this.iframe)==null||o.destroy(),this.iframe=null;return}(i=(l=this.hooks)==null?void 0:l.onCompleteDrawing)==null||i.call(l,t,this.iframe),this.iframe=null,this.startPointer.setXY(0,0)}}}const Ci=""+new URL("round-8b362c12.svg",import.meta.url).href,Ei={class:"flex flex-grow justify-around flex-wrap"},Ri=["name","stroke"],Ai=O({__name:"Tools",setup(e){const t=ce(Me),n=new Dl({hooks:{onActive(a){var c,u;(u=(c=a.getPlugin("selectorPlugin"))==null?void 0:c.enable)==null||u.call(c)},onInactive(a){var c,u;(u=(c=a.getPlugin("selectorPlugin"))==null?void 0:c.disable)==null||u.call(c)}}}),o=[{icon:"move",name:"selectTool",title:"选择",tool:n},{icon:"rectangle",name:"rectTool",title:"矩形",tool:()=>new Pi({hooks:{onActive(a){a.containerElement.style.cursor="crosshair",a.cancelSelect()},onInactive(a){a.containerElement.style.cursor="default"},onCompleteDrawing(a,c){l.value=n.name,V(()=>a.select(c))}}})},{icon:"oval",name:"ellipseTool",title:"椭圆",tool:()=>new ki({hooks:{onActive(a){a.containerElement.style.cursor="crosshair",a.cancelSelect()},onInactive(a){a.containerElement.style.cursor="default"},onCompleteDrawing(a,c){l.value=n.name,V(()=>a.select(c))}}})},{icon:"diamond",name:"diamondTool",title:"菱形",tool:()=>new xi({hooks:{onActive(a){a.containerElement.style.cursor="crosshair",a.cancelSelect()},onInactive(a){a.containerElement.style.cursor="default"},onCompleteDrawing(a,c){l.value=n.name,V(()=>a.select(c))}}})},{icon:"line-1",name:"lineTool",title:"线条",tool:()=>new Si({hooks:{onActive(a){a.containerElement.style.cursor="crosshair",a.cancelSelect()},onInactive(a){a.containerElement.style.cursor="default"},onCompleteDrawing(a,c){l.value=n.name,V(()=>a.select(c))}}})},{icon:"pencil",name:"drawingTool",title:"自由书写",tool:()=>new wi({hooks:{onActive(a){a.containerElement.style.cursor="crosshair",a.cancelSelect()},onInactive(a){a.containerElement.style.cursor="default"}}})},{icon:"arrow",name:"arrowTool",title:"箭头",tool:()=>new _i({hooks:{onActive(a){a.containerElement.style.cursor="crosshair",a.cancelSelect()},onInactive(a){a.containerElement.style.cursor="default"}}})},{icon:"picture",name:"imageTool",title:"图片",tool:async()=>{const a=await Bt([".jpg",".png",".jpge",".PNG",".JPG",".JPGE",".svg"],!1),c=await Bl(r=>r.readAsDataURL(a[0])),u=new Image;return u.src=c,new Ol({config:{image:u},hooks:{onActive(r){r.cancelSelect()},onInactive(r){r.containerElement.style.cursor="default"},onCompleteDrawing(r,v){l.value=n.name,V(()=>r.select(v))}}})}},{icon:"text",name:"textTool",title:"文本",tool:()=>new Ml({hooks:{onActive(a){a.containerElement.style.cursor="crosshair"},onInactive(a){a.containerElement.style.cursor="default"},onCompleteDrawing(a,c){l.value=n.name,V(()=>a.select(c))}}})},{icon:"eraser",name:"eraserTool",title:"橡皮擦",tool:()=>new $i({hooks:{onActive(a){a.containerElement.style.cursor=`url(${Ci}), auto`},onInactive(a){a.containerElement.style.cursor="default"}}})},{icon:"web",name:"iframeTool",title:"网页",tool:()=>new Ti({hooks:{onActive(a){a.containerElement.style.cursor="crosshair",a.cancelSelect()},onInactive(a){a.containerElement.style.cursor="default"},onCompleteDrawing(a,c){l.value=n.name,V(()=>a.select(c))}}})}],l=w(o[0].name),{theme:i}=Dt(),s=b(()=>i.value==="dark"?"#d1d5db":"#333333");return he(async()=>{var c;let a=(c=o.find(({name:u})=>u===l.value))==null?void 0:c.tool;typeof a=="function"&&(a=await a()),a&&t.setTool(a)}),(a,c)=>($(),X(R(At),{modelValue:l.value,"onUpdate:modelValue":c[0]||(c[0]=u=>l.value=u)},{default:D(()=>[y("div",Ei,[($(),B(H,null,ee(o,(u,r)=>E(R(Lt),{key:r,value:u.name,title:a.$t(u.title)},{default:D(({checked:v})=>[y("div",{class:re(["rounded-lg inline-flex items-center relative cursor-pointer select-none p-2",v?"bg-blue-500":"hover:bg-gray-200 dark:hover:bg-navyBlue-100"])},[y("iconpark-icon",{name:u.icon,stroke:s.value},null,8,Ri)],2)]),_:2},1032,["value","title"])),64))])]),_:1},8,["modelValue"]))}}),Li={class:"w-full h-full"},Di={class:"absolute left-0 top-0 right-0 bottom-0 p-8 z-50 pointer-events-none grid grid-cols-3 grid-rows-[auto_1fr_50px] gap-12"},Bi={class:"row-start-1 col-start-1 justify-self-start"},Oi={class:"row-start-1 col-start-2 justify-self-stretch"},Mi={class:"row-start-1 col-start-3 justify-self-end"},Ii={class:"grid grid-flow-col gap-1 items-center w-full pointer-events-auto rounded-lg p-1 ring-1 ring-slate-950 dark:ring-navyBlue-100 bg-white dark:bg-navyBlue-200"},Fi={class:"absolute z-50 mt-3 mr-10 max-h-60 left-[-30px] w-fit rounded-lg bg-white dark:bg-navyBlue-200 py-1 text-base shadow-lg ring-1 ring-slate-950 dark:ring-navyBlue-100 focus:outline-none sm:text-sm"},Ki={class:"row-start-2 col-start-3 justify-self-end"},Vi={class:"row-start-3 col-start-1 justify-self-start flex flex-row gap-2"},ji={class:"grid grid-flow-col gap-1 items-center w-full pointer-events-auto rounded-lg p-1 ring-1 ring-slate-950 dark:ring-navyBlue-100 bg-white dark:bg-navyBlue-200"},Gi={class:"flex text-center text-sm text-slate-900 dark:text-gray-300 h-full w-8 justify-center items-center select-none"},Ni={class:"grid grid-flow-col gap-1 items-center w-full pointer-events-auto rounded-lg p-1 ring-1 ring-slate-950 dark:ring-navyBlue-100 bg-white dark:bg-navyBlue-200"},zi=O({__name:"index",setup(e){const t=w(null),{triggerTheme:n,theme:o}=Dt(),{app:l,selected:i,scale:s}=Yo(),{undo:a,redo:c}=Bo(t,l,i);to(l,i);const u=b(()=>`${Math.ceil(s.value*100)}%`),r=Ue(ti),v=()=>{l.scaleTo(s.value+l.config.mousewheel.factor)},f=()=>{l.scaleTo(s.value-l.config.mousewheel.factor)},p=()=>a(),g=()=>c(),d=()=>n();return j(()=>{t.value&&(l.mount(t.value),t.value.tabIndex=0)}),(h,m)=>($(),B("div",Li,[y("div",Di,[y("section",Bi,[E(ri,{class:"pointer-events-auto rounded-lg ring-1 ring-slate-950 dark:ring-navyBlue-100"})]),y("section",Oi,[E(Ai,{class:"pointer-events-auto w-full rounded-lg p-2 ring-1 ring-slate-950 dark:ring-navyBlue-100 bg-white dark:bg-navyBlue-200"})]),y("section",Mi,[y("div",Ii,[E(Q,{class:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-navyBlue-100 text-lg dark:text-gray-300",icon:R(o)==="dark"?"sun":"moon",onClick:d},null,8,["icon"]),E(Jt,{modelValue:h.$i18n.locale,"onUpdate:modelValue":m[0]||(m[0]=S=>h.$i18n.locale=S)},{listbox:D(()=>[E(Q,{class:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-navyBlue-100 text-lg dark:text-gray-300",title:h.$t("语言"),icon:"translate"},null,8,["title"])]),default:D(()=>[y("div",Fi,[($(!0),B(H,null,ee(R($l),({label:S,value:k},P)=>($(),X(Zt,{key:P,value:k,label:S,class:"p-1"},null,8,["value","label"]))),128))])]),_:1},8,["modelValue"]),E(Q,{class:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-navyBlue-100 text-lg dark:text-gray-300",title:h.$t("帮助中心"),icon:"helpcenter",onClick:m[1]||(m[1]=S=>R(r)({}))},null,8,["title"])])]),y("section",Ki,[E(bi,{class:"p-4 w-56 shadow-md rounded-lg ring-1 ring-slate-950 dark:ring-navyBlue-100 bg-white dark:bg-navyBlue-200 pointer-events-auto"})]),y("section",Vi,[y("div",ji,[E(Q,{class:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-navyBlue-100 dark:text-gray-300",icon:"minus",title:h.$t("缩小"),onClick:f},null,8,["title"]),y("span",Gi,K(u.value),1),E(Q,{class:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-navyBlue-100 dark:text-gray-300",icon:"plus",title:h.$t("放大"),onClick:v},null,8,["title"])]),y("div",Ni,[E(Q,{class:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-navyBlue-100 dark:text-gray-300",icon:"undo",title:h.$t("撤销"),onClick:p},null,8,["title"]),E(Q,{class:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-navyBlue-100 dark:text-gray-300",icon:"redo",title:h.$t("重做"),onClick:g},null,8,["title"])])])]),y("div",{ref_key:"canvasRef",ref:t,class:"w-full h-full absolute overflow-clip dark:bg-navyBlue-300 focus:border-none"},null,512)]))}});export{zi as default};
