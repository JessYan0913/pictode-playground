var ll=Object.defineProperty;var nl=(e,t,n)=>t in e?ll(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var O=(e,t,n)=>(nl(e,typeof t!="symbol"?t+"":t,n),n);import{r as x,d as D,c as b,m as bt,o as j,a as le,n as ol,h as z,f as Ne,b as Ge,H as q,F as H,w as ve,S as Ce,e as he,g as _,E as xt,u as Y,i as Fe,P as Ve,N as me,T as al,p as te,j as ce,s as il,t as de,k as He,l as G,V as rl,q as sl,M as ul,y as lt,v as V,x as R,U as cl,_ as dl,z as ft,A as Pe,B as wt,C as kt,D as St,G as nt,I as vl,K as $t,J as ot,L as at,O as _t,Q as oe,R as fl,W as pl,X as Ct,Y as gl,Z as ml,$ as $e,a0 as hl,a1 as ae,a2 as Je,a3 as Pt,a4 as T,a5 as yl,a6 as E,a7 as bl,a8 as Tt,a9 as S,aa as B,ab as m,ac as F,ad as Et,ae as X,af as xl,ag as wl,ah as Q,ai as Te,aj as kl,ak as Ee,al as A,am as it,an as Rt,ao as Lt,ap as Sl,aq as At,ar as $l}from"./index-2cdd91a6.js";import{K as fe,s as Bt,F as _l,I as Cl,B as Pl,A as Tl,H as El,S as Rl,a as Ll,P as ye,f as Be,b as Al,r as Bl,c as Ol,T as Dl}from"./index-0ba9e563.js";function Il(e){throw new Error("Unexpected object: "+e)}var M=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(M||{});function Ot(e,t){let n=t.resolveItems();if(n.length<=0)return null;let o=t.resolveActiveIndex(),l=o??-1,a=(()=>{switch(e.focus){case 0:return n.findIndex(r=>!t.resolveDisabled(r));case 1:{let r=n.slice().reverse().findIndex((i,c,u)=>l!==-1&&u.length-c-1>=l?!1:!t.resolveDisabled(i));return r===-1?r:n.length-1-r}case 2:return n.findIndex((r,i)=>i<=l?!1:!t.resolveDisabled(r));case 3:{let r=n.slice().reverse().findIndex(i=>!t.resolveDisabled(i));return r===-1?r:n.length-1-r}case 4:return n.findIndex(r=>t.resolveId(r)===e.id);case 5:return null;default:Il(e)}})();return a===-1?o:a}function pt(e){return[e.screenX,e.screenY]}function Dt(){let e=x([-1,-1]);return{wasMoved(t){let n=pt(t);return e.value[0]===n[0]&&e.value[1]===n[1]?!1:(e.value=n,!0)},update(t){e.value=pt(t)}}}function Ml(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function rt(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function De(){let e=[],t={addEventListener(n,o,l,a){return n.addEventListener(o,l,a),t.add(()=>n.removeEventListener(o,l,a))},requestAnimationFrame(...n){let o=requestAnimationFrame(...n);t.add(()=>cancelAnimationFrame(o))},nextFrame(...n){t.requestAnimationFrame(()=>{t.requestAnimationFrame(...n)})},setTimeout(...n){let o=setTimeout(...n);t.add(()=>clearTimeout(o))},microTask(...n){let o={current:!0};return rt(()=>{o.current&&n[0]()}),t.add(()=>{o.current=!1})},style(n,o,l){let a=n.style.getPropertyValue(o);return Object.assign(n.style,{[o]:l}),this.add(()=>{Object.assign(n.style,{[o]:a})})},group(n){let o=De();return n(o),this.add(()=>o.dispose())},add(n){return e.push(n),()=>{let o=e.indexOf(n);if(o>=0)for(let l of e.splice(o,1))l()}},dispose(){for(let n of e.splice(0))n()}};return t}function Fl(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}function It(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.value){let o=_(n);o instanceof HTMLElement&&t.add(o)}return t}var Mt=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(Mt||{});let Le=Object.assign(D({name:"FocusTrap",props:{as:{type:[Object,String],default:"div"},initialFocus:{type:Object,default:null},features:{type:Number,default:30},containers:{type:[Object,Function],default:x(new Set)}},inheritAttrs:!1,setup(e,{attrs:t,slots:n,expose:o}){let l=x(null);o({el:l,$el:l});let a=b(()=>bt(l)),r=x(!1);j(()=>r.value=!0),le(()=>r.value=!1),jl({ownerDocument:a},b(()=>r.value&&!!(e.features&16)));let i=Vl({ownerDocument:a,container:l,initialFocus:b(()=>e.initialFocus)},b(()=>r.value&&!!(e.features&2)));Nl({ownerDocument:a,container:l,containers:e.containers,previousActiveElement:i},b(()=>r.value&&!!(e.features&8)));let c=ol();function u(p){let y=_(l);y&&(f=>f())(()=>{Y(c.value,{[Fe.Forwards]:()=>{Ve(y,me.First,{skipElements:[p.relatedTarget]})},[Fe.Backwards]:()=>{Ve(y,me.Last,{skipElements:[p.relatedTarget]})}})})}let s=x(!1);function d(p){p.key==="Tab"&&(s.value=!0,requestAnimationFrame(()=>{s.value=!1}))}function v(p){if(!r.value)return;let y=It(e.containers);_(l)instanceof HTMLElement&&y.add(_(l));let f=p.relatedTarget;f instanceof HTMLElement&&f.dataset.headlessuiFocusGuard!=="true"&&(Ft(y,f)||(s.value?Ve(_(l),Y(c.value,{[Fe.Forwards]:()=>me.Next,[Fe.Backwards]:()=>me.Previous})|me.WrapAround,{relativeTo:p.target}):p.target instanceof HTMLElement&&Ce(p.target)))}return()=>{let p={},y={ref:l,onKeydown:d,onFocusout:v},{features:f,initialFocus:g,containers:h,...k}=e;return z(H,[!!(f&4)&&z(Ne,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:u,features:Ge.Focusable}),q({ourProps:y,theirProps:{...t,...k},slot:p,attrs:t,slots:n,name:"FocusTrap"}),!!(f&4)&&z(Ne,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:u,features:Ge.Focusable})])}}}),{features:Mt}),Se=[];Fl(()=>{function e(t){t.target instanceof HTMLElement&&t.target!==document.body&&Se[0]!==t.target&&(Se.unshift(t.target),Se=Se.filter(n=>n!=null&&n.isConnected),Se.splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function Kl(e){let t=x(Se.slice());return he([e],([n],[o])=>{o===!0&&n===!1?rt(()=>{t.value.splice(0)}):o===!1&&n===!0&&(t.value=Se.slice())},{flush:"post"}),()=>{var n;return(n=t.value.find(o=>o!=null&&o.isConnected))!=null?n:null}}function jl({ownerDocument:e},t){let n=Kl(t);j(()=>{ve(()=>{var o,l;t.value||((o=e.value)==null?void 0:o.activeElement)===((l=e.value)==null?void 0:l.body)&&Ce(n())},{flush:"post"})}),le(()=>{t.value&&Ce(n())})}function Vl({ownerDocument:e,container:t,initialFocus:n},o){let l=x(null),a=x(!1);return j(()=>a.value=!0),le(()=>a.value=!1),j(()=>{he([t,n,o],(r,i)=>{if(r.every((u,s)=>(i==null?void 0:i[s])===u)||!o.value)return;let c=_(t);c&&rt(()=>{var u,s;if(!a.value)return;let d=_(n),v=(u=e.value)==null?void 0:u.activeElement;if(d){if(d===v){l.value=v;return}}else if(c.contains(v)){l.value=v;return}d?Ce(d):Ve(c,me.First|me.NoScroll)===al.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),l.value=(s=e.value)==null?void 0:s.activeElement})},{immediate:!0,flush:"post"})}),l}function Nl({ownerDocument:e,container:t,containers:n,previousActiveElement:o},l){var a;xt((a=e.value)==null?void 0:a.defaultView,"focus",r=>{if(!l.value)return;let i=It(n);_(t)instanceof HTMLElement&&i.add(_(t));let c=o.value;if(!c)return;let u=r.target;u&&u instanceof HTMLElement?Ft(i,u)?(o.value=u,Ce(u)):(r.preventDefault(),r.stopPropagation(),Ce(c)):Ce(o.value)},!0)}function Ft(e,t){for(let n of e)if(n.contains(t))return!0;return!1}let Xe=new Map,Ae=new Map;function gt(e,t=x(!0)){ve(n=>{var o;if(!t.value)return;let l=_(e);if(!l)return;n(function(){var r;if(!l)return;let i=(r=Ae.get(l))!=null?r:1;if(i===1?Ae.delete(l):Ae.set(l,i-1),i!==1)return;let c=Xe.get(l);c&&(c["aria-hidden"]===null?l.removeAttribute("aria-hidden"):l.setAttribute("aria-hidden",c["aria-hidden"]),l.inert=c.inert,Xe.delete(l))});let a=(o=Ae.get(l))!=null?o:0;Ae.set(l,a+1),a===0&&(Xe.set(l,{"aria-hidden":l.getAttribute("aria-hidden"),inert:l.inert}),l.setAttribute("aria-hidden","true"),l.inert=!0)})}let Kt=Symbol("StackContext");var Ze=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(Ze||{});function Gl(){return ce(Kt,()=>{})}function Ul({type:e,enabled:t,element:n,onUpdate:o}){let l=Gl();function a(...r){o==null||o(...r),l(...r)}j(()=>{he(t,(r,i)=>{r?a(0,e,n):i===!0&&a(1,e,n)},{immediate:!0,flush:"sync"})}),le(()=>{t.value&&a(1,e,n)}),te(Kt,a)}function Hl(e){let t=il(e.getSnapshot());return le(e.subscribe(()=>{t.value=e.getSnapshot()})),t}function Wl(e,t){let n=e(),o=new Set;return{getSnapshot(){return n},subscribe(l){return o.add(l),()=>o.delete(l)},dispatch(l,...a){let r=t[l].call(n,...a);r&&(n=r,o.forEach(i=>i()))}}}function zl(){let e;return{before({doc:t}){var n;let o=t.documentElement;e=((n=t.defaultView)!=null?n:window).innerWidth-o.clientWidth},after({doc:t,d:n}){let o=t.documentElement,l=o.clientWidth-o.offsetWidth,a=e-l;n.style(o,"paddingRight",`${a}px`)}}}function Yl(){if(!Ml())return{};let e;return{before(){e=window.pageYOffset},after({doc:t,d:n,meta:o}){function l(r){return o.containers.flatMap(i=>i()).some(i=>i.contains(r))}if(window.getComputedStyle(t.documentElement).scrollBehavior!=="auto"){let r=De();r.style(t.documentElement,"scroll-behavior","auto"),n.add(()=>n.microTask(()=>r.dispose()))}n.style(t.body,"marginTop",`-${e}px`),window.scrollTo(0,0);let a=null;n.addEventListener(t,"click",r=>{if(r.target instanceof HTMLElement)try{let i=r.target.closest("a");if(!i)return;let{hash:c}=new URL(i.href),u=t.querySelector(c);u&&!l(u)&&(a=u)}catch{}},!0),n.addEventListener(t,"touchmove",r=>{r.target instanceof HTMLElement&&!l(r.target)&&r.preventDefault()},{passive:!1}),n.add(()=>{window.scrollTo(0,window.pageYOffset+e),a&&a.isConnected&&(a.scrollIntoView({block:"nearest"}),a=null)})}}}function Xl(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function ql(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let _e=Wl(()=>new Map,{PUSH(e,t){var n;let o=(n=this.get(e))!=null?n:{doc:e,count:0,d:De(),meta:new Set};return o.count++,o.meta.add(t),this.set(e,o),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let o={doc:e,d:t,meta:ql(n)},l=[Yl(),zl(),Xl()];l.forEach(({before:a})=>a==null?void 0:a(o)),l.forEach(({after:a})=>a==null?void 0:a(o))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});_e.subscribe(()=>{let e=_e.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let o=t.get(n.doc)==="hidden",l=n.count!==0;(l&&!o||!l&&o)&&_e.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&_e.dispatch("TEARDOWN",n)}});function Jl(e,t,n){let o=Hl(_e),l=b(()=>{let a=e.value?o.value.get(e.value):void 0;return a?a.count>0:!1});return he([e,t],([a,r],[i],c)=>{if(!a||!r)return;_e.dispatch("PUSH",a,n);let u=!1;c(()=>{u||(_e.dispatch("POP",i??a,n),u=!0)})},{immediate:!0}),l}var Zl=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Zl||{});let Qe=Symbol("DialogContext");function st(e){let t=ce(Qe,null);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,st),n}return t}let Ke="DC8F892D-2EBD-447C-A4C8-A03058436FF4",Ql=D({name:"Dialog",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},open:{type:[Boolean,String],default:Ke},initialFocus:{type:Object,default:null},id:{type:String,default:()=>`headlessui-dialog-${de()}`}},emits:{close:e=>!0},setup(e,{emit:t,attrs:n,slots:o,expose:l}){var a;let r=x(!1);j(()=>{r.value=!0});let i=x(0),c=He(),u=b(()=>e.open===Ke&&c!==null?(c.value&G.Open)===G.Open:e.open),s=x(null),d=b(()=>bt(s));if(l({el:s,$el:s}),!(e.open!==Ke||c!==null))throw new Error("You forgot to provide an `open` prop to the `Dialog`.");if(typeof u.value!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${u.value===Ke?void 0:e.open}`);let v=b(()=>r.value&&u.value?0:1),p=b(()=>v.value===0),y=b(()=>i.value>1),f=ce(Qe,null)!==null,[g,h]=rl(),{resolveContainers:k,mainTreeNodeRef:w,MainTreeNode:$}=sl({portals:g,defaultContainers:[b(()=>{var I;return(I=W.panelRef.value)!=null?I:s.value})]}),C=b(()=>y.value?"parent":"leaf"),P=b(()=>c!==null?(c.value&G.Closing)===G.Closing:!1),L=b(()=>f||P.value?!1:p.value),U=b(()=>{var I,N,ee;return(ee=Array.from((N=(I=d.value)==null?void 0:I.querySelectorAll("body > *"))!=null?N:[]).find(se=>se.id==="headlessui-portal-root"?!1:se.contains(_(w))&&se instanceof HTMLElement))!=null?ee:null});gt(U,L);let J=b(()=>y.value?!0:p.value),be=b(()=>{var I,N,ee;return(ee=Array.from((N=(I=d.value)==null?void 0:I.querySelectorAll("[data-headlessui-portal]"))!=null?N:[]).find(se=>se.contains(_(w))&&se instanceof HTMLElement))!=null?ee:null});gt(be,J),Ul({type:"Dialog",enabled:b(()=>v.value===0),element:s,onUpdate:(I,N)=>{if(N==="Dialog")return Y(I,{[Ze.Add]:()=>i.value+=1,[Ze.Remove]:()=>i.value-=1})}});let ie=ul({name:"DialogDescription",slot:b(()=>({open:u.value}))}),xe=x(null),W={titleId:xe,panelRef:x(null),dialogState:v,setTitleId(I){xe.value!==I&&(xe.value=I)},close(){t("close",!1)}};te(Qe,W);let we=b(()=>!(!p.value||y.value));lt(k,(I,N)=>{W.close(),V(()=>N==null?void 0:N.focus())},we);let re=b(()=>!(y.value||v.value!==0));xt((a=d.value)==null?void 0:a.defaultView,"keydown",I=>{re.value&&(I.defaultPrevented||I.key===R.Escape&&(I.preventDefault(),I.stopPropagation(),W.close()))});let pe=b(()=>!(P.value||v.value!==0||f));return Jl(d,pe,I=>{var N;return{containers:[...(N=I.containers)!=null?N:[],k]}}),ve(I=>{if(v.value!==0)return;let N=_(s);if(!N)return;let ee=new ResizeObserver(se=>{for(let Me of se){let ge=Me.target.getBoundingClientRect();ge.x===0&&ge.y===0&&ge.width===0&&ge.height===0&&W.close()}});ee.observe(N),I(()=>ee.disconnect())}),()=>{let{id:I,open:N,initialFocus:ee,...se}=e,Me={...n,ref:s,id:I,role:"dialog","aria-modal":v.value===0?!0:void 0,"aria-labelledby":xe.value,"aria-describedby":ie.value},ge={open:v.value===0};return z(ft,{force:!0},()=>[z(cl,()=>z(dl,{target:s.value},()=>z(ft,{force:!1},()=>z(Le,{initialFocus:ee,containers:k,features:p.value?Y(C.value,{parent:Le.features.RestoreFocus,leaf:Le.features.All&~Le.features.FocusLock}):Le.features.None},()=>z(h,{},()=>q({ourProps:Me,theirProps:{...se,...n},slot:ge,attrs:n,slots:o,visible:v.value===0,features:Pe.RenderStrategy|Pe.Static,name:"Dialog"})))))),z($)])}}}),en=D({name:"DialogPanel",props:{as:{type:[Object,String],default:"div"},id:{type:String,default:()=>`headlessui-dialog-panel-${de()}`}},setup(e,{attrs:t,slots:n,expose:o}){let l=st("DialogPanel");o({el:l.panelRef,$el:l.panelRef});function a(r){r.stopPropagation()}return()=>{let{id:r,...i}=e,c={id:r,ref:l.panelRef,onClick:a};return q({ourProps:c,theirProps:i,slot:{open:l.dialogState.value===0},attrs:t,slots:n,name:"DialogPanel"})}}}),tn=D({name:"DialogTitle",props:{as:{type:[Object,String],default:"h2"},id:{type:String,default:()=>`headlessui-dialog-title-${de()}`}},setup(e,{attrs:t,slots:n}){let o=st("DialogTitle");return j(()=>{o.setTitleId(e.id),le(()=>o.setTitleId(null))}),()=>{let{id:l,...a}=e;return q({ourProps:{id:l},theirProps:a,slot:{open:o.dialogState.value===0},attrs:t,slots:n,name:"DialogTitle"})}}}),mt=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function ht(e){var t,n;let o=(t=e.innerText)!=null?t:"",l=e.cloneNode(!0);if(!(l instanceof HTMLElement))return o;let a=!1;for(let i of l.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))i.remove(),a=!0;let r=a?(n=l.innerText)!=null?n:"":o;return mt.test(r)&&(r=r.replace(mt,"")),r}function ln(e){let t=e.getAttribute("aria-label");if(typeof t=="string")return t.trim();let n=e.getAttribute("aria-labelledby");if(n){let o=n.split(" ").map(l=>{let a=document.getElementById(l);if(a){let r=a.getAttribute("aria-label");return typeof r=="string"?r.trim():ht(a).trim()}return null}).filter(Boolean);if(o.length>0)return o.join(", ")}return ht(e).trim()}function jt(e){let t=x(""),n=x("");return()=>{let o=_(e);if(!o)return"";let l=o.innerText;if(t.value===l)return n.value;let a=ln(o).trim().toLowerCase();return t.value=l,n.value=a,a}}function nn(e,t){return e===t}var on=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(on||{}),an=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(an||{}),rn=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(rn||{});function sn(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let Vt=Symbol("ListboxContext");function We(e){let t=ce(Vt,null);if(t===null){let n=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,We),n}return t}let un=D({name:"Listbox",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>nn},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:t,attrs:n,emit:o}){let l=x(1),a=x(null),r=x(null),i=x(null),c=x([]),u=x(""),s=x(null),d=x(1);function v(w=$=>$){let $=s.value!==null?c.value[s.value]:null,C=_t(w(c.value.slice()),L=>_(L.dataRef.domRef)),P=$?C.indexOf($):null;return P===-1&&(P=null),{options:C,activeOptionIndex:P}}let p=b(()=>e.multiple?1:0),[y,f]=wt(b(()=>e.modelValue),w=>o("update:modelValue",w),b(()=>e.defaultValue)),g=b(()=>y.value===void 0?Y(p.value,{1:[],0:void 0}):y.value),h={listboxState:l,value:g,mode:p,compare(w,$){if(typeof e.by=="string"){let C=e.by;return(w==null?void 0:w[C])===($==null?void 0:$[C])}return e.by(w,$)},orientation:b(()=>e.horizontal?"horizontal":"vertical"),labelRef:a,buttonRef:r,optionsRef:i,disabled:b(()=>e.disabled),options:c,searchQuery:u,activeOptionIndex:s,activationTrigger:d,closeListbox(){e.disabled||l.value!==1&&(l.value=1,s.value=null)},openListbox(){e.disabled||l.value!==0&&(l.value=0)},goToOption(w,$,C){if(e.disabled||l.value===1)return;let P=v(),L=Ot(w===M.Specific?{focus:M.Specific,id:$}:{focus:w},{resolveItems:()=>P.options,resolveActiveIndex:()=>P.activeOptionIndex,resolveId:U=>U.id,resolveDisabled:U=>U.dataRef.disabled});u.value="",s.value=L,d.value=C??1,c.value=P.options},search(w){if(e.disabled||l.value===1)return;let $=u.value!==""?0:1;u.value+=w.toLowerCase();let C=(s.value!==null?c.value.slice(s.value+$).concat(c.value.slice(0,s.value+$)):c.value).find(L=>L.dataRef.textValue.startsWith(u.value)&&!L.dataRef.disabled),P=C?c.value.indexOf(C):-1;P===-1||P===s.value||(s.value=P,d.value=1)},clearSearch(){e.disabled||l.value!==1&&u.value!==""&&(u.value="")},registerOption(w,$){let C=v(P=>[...P,{id:w,dataRef:$}]);c.value=C.options,s.value=C.activeOptionIndex},unregisterOption(w){let $=v(C=>{let P=C.findIndex(L=>L.id===w);return P!==-1&&C.splice(P,1),C});c.value=$.options,s.value=$.activeOptionIndex,d.value=1},theirOnChange(w){e.disabled||f(w)},select(w){e.disabled||f(Y(p.value,{0:()=>w,1:()=>{let $=oe(h.value.value).slice(),C=oe(w),P=$.findIndex(L=>h.compare(C,oe(L)));return P===-1?$.push(C):$.splice(P,1),$}}))}};lt([r,i],(w,$)=>{var C;h.closeListbox(),kt($,St.Loose)||(w.preventDefault(),(C=_(r))==null||C.focus())},b(()=>l.value===0)),te(Vt,h),nt(b(()=>Y(l.value,{0:G.Open,1:G.Closed})));let k=b(()=>{var w;return(w=_(r))==null?void 0:w.closest("form")});return j(()=>{he([k],()=>{if(!k.value||e.defaultValue===void 0)return;function w(){h.theirOnChange(e.defaultValue)}return k.value.addEventListener("reset",w),()=>{var $;($=k.value)==null||$.removeEventListener("reset",w)}},{immediate:!0})}),()=>{let{name:w,modelValue:$,disabled:C,form:P,...L}=e,U={open:l.value===0,disabled:C,value:g.value};return z(H,[...w!=null&&g.value!=null?vl({[w]:g.value}).map(([J,be])=>z(Ne,$t({features:Ge.Hidden,key:J,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:P,name:J,value:be}))):[],q({ourProps:{},theirProps:{...n,...ot(L,["defaultValue","onUpdate:modelValue","horizontal","multiple","by"])},slot:U,slots:t,attrs:n,name:"Listbox"})])}}}),cn=D({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-listbox-button-${de()}`}},setup(e,{attrs:t,slots:n,expose:o}){let l=We("ListboxButton");o({el:l.buttonRef,$el:l.buttonRef});function a(u){switch(u.key){case R.Space:case R.Enter:case R.ArrowDown:u.preventDefault(),l.openListbox(),V(()=>{var s;(s=_(l.optionsRef))==null||s.focus({preventScroll:!0}),l.value.value||l.goToOption(M.First)});break;case R.ArrowUp:u.preventDefault(),l.openListbox(),V(()=>{var s;(s=_(l.optionsRef))==null||s.focus({preventScroll:!0}),l.value.value||l.goToOption(M.Last)});break}}function r(u){switch(u.key){case R.Space:u.preventDefault();break}}function i(u){l.disabled.value||(l.listboxState.value===0?(l.closeListbox(),V(()=>{var s;return(s=_(l.buttonRef))==null?void 0:s.focus({preventScroll:!0})})):(u.preventDefault(),l.openListbox(),sn(()=>{var s;return(s=_(l.optionsRef))==null?void 0:s.focus({preventScroll:!0})})))}let c=at(b(()=>({as:e.as,type:t.type})),l.buttonRef);return()=>{var u,s;let d={open:l.listboxState.value===0,disabled:l.disabled.value,value:l.value.value},{id:v,...p}=e,y={ref:l.buttonRef,id:v,type:c.value,"aria-haspopup":"listbox","aria-controls":(u=_(l.optionsRef))==null?void 0:u.id,"aria-expanded":l.listboxState.value===0,"aria-labelledby":l.labelRef.value?[(s=_(l.labelRef))==null?void 0:s.id,v].join(" "):void 0,disabled:l.disabled.value===!0?!0:void 0,onKeydown:a,onKeyup:r,onClick:i};return q({ourProps:y,theirProps:p,slot:d,attrs:t,slots:n,name:"ListboxButton"})}}}),dn=D({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-listbox-options-${de()}`}},setup(e,{attrs:t,slots:n,expose:o}){let l=We("ListboxOptions"),a=x(null);o({el:l.optionsRef,$el:l.optionsRef});function r(u){switch(a.value&&clearTimeout(a.value),u.key){case R.Space:if(l.searchQuery.value!=="")return u.preventDefault(),u.stopPropagation(),l.search(u.key);case R.Enter:if(u.preventDefault(),u.stopPropagation(),l.activeOptionIndex.value!==null){let s=l.options.value[l.activeOptionIndex.value];l.select(s.dataRef.value)}l.mode.value===0&&(l.closeListbox(),V(()=>{var s;return(s=_(l.buttonRef))==null?void 0:s.focus({preventScroll:!0})}));break;case Y(l.orientation.value,{vertical:R.ArrowDown,horizontal:R.ArrowRight}):return u.preventDefault(),u.stopPropagation(),l.goToOption(M.Next);case Y(l.orientation.value,{vertical:R.ArrowUp,horizontal:R.ArrowLeft}):return u.preventDefault(),u.stopPropagation(),l.goToOption(M.Previous);case R.Home:case R.PageUp:return u.preventDefault(),u.stopPropagation(),l.goToOption(M.First);case R.End:case R.PageDown:return u.preventDefault(),u.stopPropagation(),l.goToOption(M.Last);case R.Escape:u.preventDefault(),u.stopPropagation(),l.closeListbox(),V(()=>{var s;return(s=_(l.buttonRef))==null?void 0:s.focus({preventScroll:!0})});break;case R.Tab:u.preventDefault(),u.stopPropagation();break;default:u.key.length===1&&(l.search(u.key),a.value=setTimeout(()=>l.clearSearch(),350));break}}let i=He(),c=b(()=>i!==null?(i.value&G.Open)===G.Open:l.listboxState.value===0);return()=>{var u,s,d,v;let p={open:l.listboxState.value===0},{id:y,...f}=e,g={"aria-activedescendant":l.activeOptionIndex.value===null||(u=l.options.value[l.activeOptionIndex.value])==null?void 0:u.id,"aria-multiselectable":l.mode.value===1?!0:void 0,"aria-labelledby":(v=(s=_(l.labelRef))==null?void 0:s.id)!=null?v:(d=_(l.buttonRef))==null?void 0:d.id,"aria-orientation":l.orientation.value,id:y,onKeydown:r,role:"listbox",tabIndex:0,ref:l.optionsRef};return q({ourProps:g,theirProps:f,slot:p,attrs:t,slots:n,features:Pe.RenderStrategy|Pe.Static,visible:c.value,name:"ListboxOptions"})}}}),vn=D({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-listbox.option-${de()}`}},setup(e,{slots:t,attrs:n,expose:o}){let l=We("ListboxOption"),a=x(null);o({el:a,$el:a});let r=b(()=>l.activeOptionIndex.value!==null?l.options.value[l.activeOptionIndex.value].id===e.id:!1),i=b(()=>Y(l.mode.value,{0:()=>l.compare(oe(l.value.value),oe(e.value)),1:()=>oe(l.value.value).some(h=>l.compare(oe(h),oe(e.value)))})),c=b(()=>Y(l.mode.value,{1:()=>{var h;let k=oe(l.value.value);return((h=l.options.value.find(w=>k.some($=>l.compare(oe($),oe(w.dataRef.value)))))==null?void 0:h.id)===e.id},0:()=>i.value})),u=jt(a),s=b(()=>({disabled:e.disabled,value:e.value,get textValue(){return u()},domRef:a}));j(()=>l.registerOption(e.id,s)),le(()=>l.unregisterOption(e.id)),j(()=>{he([l.listboxState,i],()=>{l.listboxState.value===0&&i.value&&Y(l.mode.value,{1:()=>{c.value&&l.goToOption(M.Specific,e.id)},0:()=>{l.goToOption(M.Specific,e.id)}})},{immediate:!0})}),ve(()=>{l.listboxState.value===0&&r.value&&l.activationTrigger.value!==0&&V(()=>{var h,k;return(k=(h=_(a))==null?void 0:h.scrollIntoView)==null?void 0:k.call(h,{block:"nearest"})})});function d(h){if(e.disabled)return h.preventDefault();l.select(e.value),l.mode.value===0&&(l.closeListbox(),V(()=>{var k;return(k=_(l.buttonRef))==null?void 0:k.focus({preventScroll:!0})}))}function v(){if(e.disabled)return l.goToOption(M.Nothing);l.goToOption(M.Specific,e.id)}let p=Dt();function y(h){p.update(h)}function f(h){p.wasMoved(h)&&(e.disabled||r.value||l.goToOption(M.Specific,e.id,0))}function g(h){p.wasMoved(h)&&(e.disabled||r.value&&l.goToOption(M.Nothing))}return()=>{let{disabled:h}=e,k={active:r.value,selected:i.value,disabled:h},{id:w,value:$,disabled:C,...P}=e,L={id:w,ref:a,role:"option",tabIndex:h===!0?void 0:-1,"aria-disabled":h===!0?!0:void 0,"aria-selected":i.value,disabled:void 0,onClick:d,onFocus:v,onPointerenter:y,onMouseenter:y,onPointermove:f,onMousemove:f,onPointerleave:g,onMouseleave:g};return q({ourProps:L,theirProps:P,slot:k,attrs:n,slots:t,name:"ListboxOption"})}}});var fn=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(fn||{}),pn=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(pn||{});function gn(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let Nt=Symbol("MenuContext");function ze(e){let t=ce(Nt,null);if(t===null){let n=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,ze),n}return t}let mn=D({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(e,{slots:t,attrs:n}){let o=x(1),l=x(null),a=x(null),r=x([]),i=x(""),c=x(null),u=x(1);function s(v=p=>p){let p=c.value!==null?r.value[c.value]:null,y=_t(v(r.value.slice()),g=>_(g.dataRef.domRef)),f=p?y.indexOf(p):null;return f===-1&&(f=null),{items:y,activeItemIndex:f}}let d={menuState:o,buttonRef:l,itemsRef:a,items:r,searchQuery:i,activeItemIndex:c,activationTrigger:u,closeMenu:()=>{o.value=1,c.value=null},openMenu:()=>o.value=0,goToItem(v,p,y){let f=s(),g=Ot(v===M.Specific?{focus:M.Specific,id:p}:{focus:v},{resolveItems:()=>f.items,resolveActiveIndex:()=>f.activeItemIndex,resolveId:h=>h.id,resolveDisabled:h=>h.dataRef.disabled});i.value="",c.value=g,u.value=y??1,r.value=f.items},search(v){let p=i.value!==""?0:1;i.value+=v.toLowerCase();let y=(c.value!==null?r.value.slice(c.value+p).concat(r.value.slice(0,c.value+p)):r.value).find(g=>g.dataRef.textValue.startsWith(i.value)&&!g.dataRef.disabled),f=y?r.value.indexOf(y):-1;f===-1||f===c.value||(c.value=f,u.value=1)},clearSearch(){i.value=""},registerItem(v,p){let y=s(f=>[...f,{id:v,dataRef:p}]);r.value=y.items,c.value=y.activeItemIndex,u.value=1},unregisterItem(v){let p=s(y=>{let f=y.findIndex(g=>g.id===v);return f!==-1&&y.splice(f,1),y});r.value=p.items,c.value=p.activeItemIndex,u.value=1}};return lt([l,a],(v,p)=>{var y;d.closeMenu(),kt(p,St.Loose)||(v.preventDefault(),(y=_(l))==null||y.focus())},b(()=>o.value===0)),te(Nt,d),nt(b(()=>Y(o.value,{0:G.Open,1:G.Closed}))),()=>{let v={open:o.value===0,close:d.closeMenu};return q({ourProps:{},theirProps:e,slot:v,slots:t,attrs:n,name:"Menu"})}}}),hn=D({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-menu-button-${de()}`}},setup(e,{attrs:t,slots:n,expose:o}){let l=ze("MenuButton");o({el:l.buttonRef,$el:l.buttonRef});function a(u){switch(u.key){case R.Space:case R.Enter:case R.ArrowDown:u.preventDefault(),u.stopPropagation(),l.openMenu(),V(()=>{var s;(s=_(l.itemsRef))==null||s.focus({preventScroll:!0}),l.goToItem(M.First)});break;case R.ArrowUp:u.preventDefault(),u.stopPropagation(),l.openMenu(),V(()=>{var s;(s=_(l.itemsRef))==null||s.focus({preventScroll:!0}),l.goToItem(M.Last)});break}}function r(u){switch(u.key){case R.Space:u.preventDefault();break}}function i(u){e.disabled||(l.menuState.value===0?(l.closeMenu(),V(()=>{var s;return(s=_(l.buttonRef))==null?void 0:s.focus({preventScroll:!0})})):(u.preventDefault(),l.openMenu(),gn(()=>{var s;return(s=_(l.itemsRef))==null?void 0:s.focus({preventScroll:!0})})))}let c=at(b(()=>({as:e.as,type:t.type})),l.buttonRef);return()=>{var u;let s={open:l.menuState.value===0},{id:d,...v}=e,p={ref:l.buttonRef,id:d,type:c.value,"aria-haspopup":"menu","aria-controls":(u=_(l.itemsRef))==null?void 0:u.id,"aria-expanded":l.menuState.value===0,onKeydown:a,onKeyup:r,onClick:i};return q({ourProps:p,theirProps:v,slot:s,attrs:t,slots:n,name:"MenuButton"})}}}),yn=D({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-menu-items-${de()}`}},setup(e,{attrs:t,slots:n,expose:o}){let l=ze("MenuItems"),a=x(null);o({el:l.itemsRef,$el:l.itemsRef}),fl({container:b(()=>_(l.itemsRef)),enabled:b(()=>l.menuState.value===0),accept(s){return s.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:s.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(s){s.setAttribute("role","none")}});function r(s){var d;switch(a.value&&clearTimeout(a.value),s.key){case R.Space:if(l.searchQuery.value!=="")return s.preventDefault(),s.stopPropagation(),l.search(s.key);case R.Enter:if(s.preventDefault(),s.stopPropagation(),l.activeItemIndex.value!==null){let v=l.items.value[l.activeItemIndex.value];(d=_(v.dataRef.domRef))==null||d.click()}l.closeMenu(),Ct(_(l.buttonRef));break;case R.ArrowDown:return s.preventDefault(),s.stopPropagation(),l.goToItem(M.Next);case R.ArrowUp:return s.preventDefault(),s.stopPropagation(),l.goToItem(M.Previous);case R.Home:case R.PageUp:return s.preventDefault(),s.stopPropagation(),l.goToItem(M.First);case R.End:case R.PageDown:return s.preventDefault(),s.stopPropagation(),l.goToItem(M.Last);case R.Escape:s.preventDefault(),s.stopPropagation(),l.closeMenu(),V(()=>{var v;return(v=_(l.buttonRef))==null?void 0:v.focus({preventScroll:!0})});break;case R.Tab:s.preventDefault(),s.stopPropagation(),l.closeMenu(),V(()=>pl(_(l.buttonRef),s.shiftKey?me.Previous:me.Next));break;default:s.key.length===1&&(l.search(s.key),a.value=setTimeout(()=>l.clearSearch(),350));break}}function i(s){switch(s.key){case R.Space:s.preventDefault();break}}let c=He(),u=b(()=>c!==null?(c.value&G.Open)===G.Open:l.menuState.value===0);return()=>{var s,d;let v={open:l.menuState.value===0},{id:p,...y}=e,f={"aria-activedescendant":l.activeItemIndex.value===null||(s=l.items.value[l.activeItemIndex.value])==null?void 0:s.id,"aria-labelledby":(d=_(l.buttonRef))==null?void 0:d.id,id:p,onKeydown:r,onKeyup:i,role:"menu",tabIndex:0,ref:l.itemsRef};return q({ourProps:f,theirProps:y,slot:v,attrs:t,slots:n,features:Pe.RenderStrategy|Pe.Static,visible:u.value,name:"MenuItems"})}}}),bn=D({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-menu-item-${de()}`}},setup(e,{slots:t,attrs:n,expose:o}){let l=ze("MenuItem"),a=x(null);o({el:a,$el:a});let r=b(()=>l.activeItemIndex.value!==null?l.items.value[l.activeItemIndex.value].id===e.id:!1),i=jt(a),c=b(()=>({disabled:e.disabled,get textValue(){return i()},domRef:a}));j(()=>l.registerItem(e.id,c)),le(()=>l.unregisterItem(e.id)),ve(()=>{l.menuState.value===0&&r.value&&l.activationTrigger.value!==0&&V(()=>{var f,g;return(g=(f=_(a))==null?void 0:f.scrollIntoView)==null?void 0:g.call(f,{block:"nearest"})})});function u(f){if(e.disabled)return f.preventDefault();l.closeMenu(),Ct(_(l.buttonRef))}function s(){if(e.disabled)return l.goToItem(M.Nothing);l.goToItem(M.Specific,e.id)}let d=Dt();function v(f){d.update(f)}function p(f){d.wasMoved(f)&&(e.disabled||r.value||l.goToItem(M.Specific,e.id,0))}function y(f){d.wasMoved(f)&&(e.disabled||r.value&&l.goToItem(M.Nothing))}return()=>{let{disabled:f}=e,g={active:r.value,disabled:f,close:l.closeMenu},{id:h,...k}=e;return q({ourProps:{id:h,ref:a,role:"menuitem",tabIndex:f===!0?void 0:-1,"aria-disabled":f===!0?!0:void 0,disabled:void 0,onClick:u,onFocus:s,onPointerenter:v,onMouseenter:v,onPointermove:p,onMousemove:p,onPointerleave:y,onMouseleave:y},theirProps:{...n,...k},slot:g,attrs:n,slots:t,name:"MenuItem"})}}}),xn=Symbol("GroupContext"),wn=D({name:"Switch",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"button"},modelValue:{type:Boolean,default:void 0},defaultChecked:{type:Boolean,optional:!0},form:{type:String,optional:!0},name:{type:String,optional:!0},value:{type:String,optional:!0},id:{type:String,default:()=>`headlessui-switch-${de()}`}},inheritAttrs:!1,setup(e,{emit:t,attrs:n,slots:o,expose:l}){let a=ce(xn,null),[r,i]=wt(b(()=>e.modelValue),g=>t("update:modelValue",g),b(()=>e.defaultChecked));function c(){i(!r.value)}let u=x(null),s=a===null?u:a.switchRef,d=at(b(()=>({as:e.as,type:n.type})),s);l({el:s,$el:s});function v(g){g.preventDefault(),c()}function p(g){g.key===R.Space?(g.preventDefault(),c()):g.key===R.Enter&&gl(g.currentTarget)}function y(g){g.preventDefault()}let f=b(()=>{var g,h;return(h=(g=_(s))==null?void 0:g.closest)==null?void 0:h.call(g,"form")});return j(()=>{he([f],()=>{if(!f.value||e.defaultChecked===void 0)return;function g(){i(e.defaultChecked)}return f.value.addEventListener("reset",g),()=>{var h;(h=f.value)==null||h.removeEventListener("reset",g)}},{immediate:!0})}),()=>{let{id:g,name:h,value:k,form:w,...$}=e,C={checked:r.value},P={id:g,ref:s,role:"switch",type:d.value,tabIndex:0,"aria-checked":r.value,"aria-labelledby":a==null?void 0:a.labelledby.value,"aria-describedby":a==null?void 0:a.describedby.value,onClick:v,onKeyup:p,onKeypress:y};return z(H,[h!=null&&r.value!=null?z(Ne,$t({features:Ge.Hidden,as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:r.value,form:w,name:h,value:k})):null,q({ourProps:P,theirProps:{...n,...ot($,["modelValue","defaultChecked"])},slot:C,attrs:n,slots:o,name:"Switch"})])}}});function kn(e){let t={called:!1};return(...n)=>{if(!t.called)return t.called=!0,e(...n)}}function qe(e,...t){e&&t.length>0&&e.classList.add(...t)}function je(e,...t){e&&t.length>0&&e.classList.remove(...t)}var et=(e=>(e.Finished="finished",e.Cancelled="cancelled",e))(et||{});function Sn(e,t){let n=De();if(!e)return n.dispose;let{transitionDuration:o,transitionDelay:l}=getComputedStyle(e),[a,r]=[o,l].map(i=>{let[c=0]=i.split(",").filter(Boolean).map(u=>u.includes("ms")?parseFloat(u):parseFloat(u)*1e3).sort((u,s)=>s-u);return c});return a!==0?n.setTimeout(()=>t("finished"),a+r):t("finished"),n.add(()=>t("cancelled")),n.dispose}function yt(e,t,n,o,l,a){let r=De(),i=a!==void 0?kn(a):()=>{};return je(e,...l),qe(e,...t,...n),r.nextFrame(()=>{je(e,...n),qe(e,...o),r.add(Sn(e,c=>(je(e,...o,...t),qe(e,...l),i(c))))}),r.add(()=>je(e,...t,...n,...o,...l)),r.add(()=>i("cancelled")),r.dispose}function ke(e=""){return e.split(" ").filter(t=>t.trim().length>1)}let ut=Symbol("TransitionContext");var $n=(e=>(e.Visible="visible",e.Hidden="hidden",e))($n||{});function _n(){return ce(ut,null)!==null}function Cn(){let e=ce(ut,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}function Pn(){let e=ce(ct,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}let ct=Symbol("NestingContext");function Ye(e){return"children"in e?Ye(e.children):e.value.filter(({state:t})=>t==="visible").length>0}function Gt(e){let t=x([]),n=x(!1);j(()=>n.value=!0),le(()=>n.value=!1);function o(a,r=$e.Hidden){let i=t.value.findIndex(({id:c})=>c===a);i!==-1&&(Y(r,{[$e.Unmount](){t.value.splice(i,1)},[$e.Hidden](){t.value[i].state="hidden"}}),!Ye(t)&&n.value&&(e==null||e()))}function l(a){let r=t.value.find(({id:i})=>i===a);return r?r.state!=="visible"&&(r.state="visible"):t.value.push({id:a,state:"visible"}),()=>o(a,$e.Unmount)}return{children:t,register:l,unregister:o}}let Ut=Pe.RenderStrategy,tt=D({props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:n,slots:o,expose:l}){let a=x(0);function r(){a.value|=G.Opening,t("beforeEnter")}function i(){a.value&=~G.Opening,t("afterEnter")}function c(){a.value|=G.Closing,t("beforeLeave")}function u(){a.value&=~G.Closing,t("afterLeave")}if(!_n()&&ml())return()=>z(Ht,{...e,onBeforeEnter:r,onAfterEnter:i,onBeforeLeave:c,onAfterLeave:u},o);let s=x(null),d=b(()=>e.unmount?$e.Unmount:$e.Hidden);l({el:s,$el:s});let{show:v,appear:p}=Cn(),{register:y,unregister:f}=Pn(),g=x(v.value?"visible":"hidden"),h={value:!0},k=de(),w={value:!1},$=Gt(()=>{!w.value&&g.value!=="hidden"&&(g.value="hidden",f(k),u())});j(()=>{let W=y(k);le(W)}),ve(()=>{if(d.value===$e.Hidden&&k){if(v.value&&g.value!=="visible"){g.value="visible";return}Y(g.value,{hidden:()=>f(k),visible:()=>y(k)})}});let C=ke(e.enter),P=ke(e.enterFrom),L=ke(e.enterTo),U=ke(e.entered),J=ke(e.leave),be=ke(e.leaveFrom),ie=ke(e.leaveTo);j(()=>{ve(()=>{if(g.value==="visible"){let W=_(s);if(W instanceof Comment&&W.data==="")throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}})});function xe(W){let we=h.value&&!p.value,re=_(s);!re||!(re instanceof HTMLElement)||we||(w.value=!0,v.value&&r(),v.value||c(),W(v.value?yt(re,C,P,L,U,pe=>{w.value=!1,pe===et.Finished&&i()}):yt(re,J,be,ie,U,pe=>{w.value=!1,pe===et.Finished&&(Ye($)||(g.value="hidden",f(k),u()))})))}return j(()=>{he([v],(W,we,re)=>{xe(re),h.value=!1},{immediate:!0})}),te(ct,$),nt(b(()=>Y(g.value,{visible:G.Open,hidden:G.Closed})|a.value)),()=>{let{appear:W,show:we,enter:re,enterFrom:pe,enterTo:I,entered:N,leave:ee,leaveFrom:se,leaveTo:Me,...ge}=e,el={ref:s},tl={...ge,...p.value&&v.value&&hl.isServer?{class:ae([n.class,ge.class,...C,...P])}:{}};return q({theirProps:tl,ourProps:el,slot:{},slots:o,attrs:n,features:Ut,visible:g.value==="visible",name:"TransitionChild"})}}}),Tn=tt,Ht=D({inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:n,slots:o}){let l=He(),a=b(()=>e.show===null&&l!==null?(l.value&G.Open)===G.Open:e.show);ve(()=>{if(![!0,!1].includes(a.value))throw new Error('A <Transition /> is used but it is missing a `:show="true | false"` prop.')});let r=x(a.value?"visible":"hidden"),i=Gt(()=>{r.value="hidden"}),c=x(!0),u={show:a,appear:b(()=>e.appear||!c.value)};return j(()=>{ve(()=>{c.value=!1,a.value?r.value="visible":Ye(i)||(r.value="hidden")})}),te(ct,i),te(ut,u),()=>{let s=ot(e,["show","appear","unmount","onBeforeEnter","onBeforeLeave","onAfterEnter","onAfterLeave"]),d={unmount:e.unmount};return q({ourProps:{...d,as:"template"},theirProps:{},slot:{},slots:{...o,default:()=>[z(Tn,{onBeforeEnter:()=>t("beforeEnter"),onAfterEnter:()=>t("afterEnter"),onBeforeLeave:()=>t("beforeLeave"),onAfterLeave:()=>t("afterLeave"),...n,...d,...s},o.default)]},attrs:{},features:Ut,visible:r.value==="visible",name:"Transition"})}}});const En=e=>{let t=document.body;return e.appendTo&&(typeof e.appendTo=="string"&&(t=document.querySelector(e.appendTo)),e.appendTo instanceof HTMLElement&&(t=e.appendTo),t instanceof HTMLElement||(t=document.body)),t},Rn=(e,t,n,o=null)=>{const l=T(e,t);return l.appContext=o,Pt(l,n),En(t).appendChild(n),l},Ue=e=>{var a,r;const t=(a=Je())==null?void 0:a.appContext;if(t){const i=(r=Je())==null?void 0:r.provides;Reflect.set(t,"provides",{...t.provides,...i})}const n=document.createElement("div"),o=()=>{var i;Pt(null,n),(i=n.parentNode)==null||i.removeChild(n)},l=i=>{var s;if(Reflect.has(i,"visible")||(i.visible=!0),typeof i.onClose!="function")i.onClose=o;else{const d=i.onClose;i.onClose=()=>{d(),o()}}const c=Rn(e,i,n,t),u=(s=c.component)==null?void 0:s.proxy;for(const d in i)Reflect.has(i,d)&&!Reflect.has(u.$props,d)&&(u[d]=i[d]);return c};return l.close=o,l},K=(e,t)=>{const n=(t==null?void 0:t.target)??window,o=navigator.userAgent.toLowerCase().includes("mac");let l=!1,a=t==null?void 0:t.key;const r=()=>{const u=t??{},s=[];return u.ctrlKey&&s.push(o?"Cmd":"Ctrl"),u.shiftKey&&s.push(o?"Option":"Shift"),a&&s.push(a),s},c=yl(n,"keydown",u=>{u.stopPropagation();const s=t??{};if(!(l||!a)&&(a=typeof a=="string"?[a]:a,a.map(d=>d.toLowerCase()).includes(u.key.toLowerCase())&&Ln(s,u))){u.preventDefault();const d=e();if(typeof d!="function")return;const v=E(n)??window,p=y=>{y.preventDefault(),d(),v.removeEventListener("keyup",p)};v.addEventListener("keyup",p)}});return e.hotKey=r(),e.directions=(t==null?void 0:t.directions)??"",e.removeListener=c,e.pause=()=>l=!0,e.unpause=()=>l=!1,e},Ln=(e,t)=>{const n=e.ctrlKey??!1,o=e.shiftKey??!1;if(e.exact)return(n===t.metaKey||n===t.ctrlKey)&&o===t.shiftKey;const l=[];return l.push(n===t.metaKey||n===t.ctrlKey),l.push(o===t.shiftKey),l.every(a=>a)},An=(e,t,n)=>{bl(window,e,o=>{var a;const l=o.target;(a=t.value)!=null&&a.contains(l)||n()})},ue=(e,t)=>{const n=ce(e,t);if(!n)throw new Error(`Could not resolve ${e.description}`);return n},Wt=(e,t)=>{const n=Je();return(n==null?void 0:n.provides[e])||ce(e,t)},Bn=(e,t)=>{const n=Wt(e,t);if(!n)throw new Error(`Could not resolve ${e.description}`);return n},zt=Symbol("FORM_STATE"),Ie=Symbol("PictodeAppKey"),On=Symbol("PictodePluginKey"),dt=Symbol("PictodeSelectedKey"),Yt=Symbol("PictodePanelFormKey"),Re=Symbol("PictodeHotKeyListKey"),Dn=D({__name:"Container",props:{config:{},model:{},prop:{default:""},labelWidth:{},size:{default:"small"}},emits:["change"],setup(e,{emit:t}){const n=e,o=ue(zt),{config:l,prop:a,model:r}=Tt(n),i=b(()=>l.value.name||""),c=b(()=>{let d="";if(i.value)d=i.value;else return a.value;return`${a.value}${a.value?".":""}${d}`}),u=b(()=>{let{type:d}=l.value;return d==="form"?"":d==null?void 0:d.replace(/([A-Z])/g,"-$1").toLowerCase()}),s=async(d,v)=>{let p=v;try{typeof l.value.onChange=="function"&&(p=await l.value.onChange(o,p,{model:r.value,config:l.value,prop:d}))}catch(y){console.error(y)}Reflect.get(r.value,d)!==p&&(Reflect.set(r.value,d,p),t("change",r.value))};return(d,v)=>(S(),B("div",{class:ae([`${d.labelWidth}`=="0"||!E(l).label?"hidden":"","select-none","flex flex-col content-start gap-1 px-1 py-2"])},[m("label",{style:Et({width:`${d.labelWidth}px`}),class:"text-start text-sm text-gray-600 dark:text-gray-300"},F(d.$t(E(l).label??"")),5),(S(),X(xl(u.value),{key:E(l).name,class:ae(E(l).class),model:E(r),config:E(l),prop:c.value,onChange:s},null,40,["class","model","config","prop"]))],2))}}),In=["model","size"],Mn=D({__name:"Form",props:{model:{default:()=>({})},config:{default:()=>[]},labelWidth:{default:"200px"},disabled:{type:Boolean,default:!1},height:{default:"auto"},size:{default:"default"},inline:{type:Boolean,default:!1}},emits:["change","update:modelValue"],setup(e,{expose:t,emit:n}){const o=e,{config:l,model:a}=Tt(o),r=x(),i=x(a),c=wl({config:l.value,model:i.value}),u=()=>n("change",i.value),s=async()=>{var v;try{return await((v=r.value)==null?void 0:v.validate()),oe(i.value)}catch{const y=[];throw new Error(y.join("<br>"))}},d=()=>{var v;return(v=r.value)==null?void 0:v.resetFields()};return te(zt,c),t({formModel:i,formState:c,resetForm:d,submitForm:s}),(v,p)=>(S(),B("form",{ref_key:"formRef",ref:r,model:i.value,size:v.size,onChange:u},[(S(!0),B(H,null,Q(o.config,(y,f)=>(S(),X(Dn,{key:f,config:y,model:i.value,onChange:u},null,8,["config","model"]))),128))],40,In))}}),Fn={class:"flex justify-center items-center"},Kn=["name","title"],jn={class:"cursor-pointer"},Z=D({__name:"Button",props:{icon:{},text:{}},setup(e){return(t,n)=>(S(),B("button",kl({type:"button"},t.$attrs),[Te(t.$slots,"default",{},()=>[m("label",Fn,[t.icon?(S(),B("iconpark-icon",{key:0,name:t.icon,title:t.$attrs.title,class:"cursor-pointer"},null,8,Kn)):Ee("",!0),m("span",jn,F(t.text),1)])])],16))}});function Vn(e,t){return S(),B("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[m("path",{"fill-rule":"evenodd",d:"M19.916 4.626a.75.75 0 01.208 1.04l-9 13.5a.75.75 0 01-1.154.114l-6-6a.75.75 0 011.06-1.06l5.353 5.353 8.493-12.739a.75.75 0 011.04-.208z","clip-rule":"evenodd"})])}function Xt(e,t){return S(),B("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[m("path",{"fill-rule":"evenodd",d:"M11.47 4.72a.75.75 0 011.06 0l3.75 3.75a.75.75 0 01-1.06 1.06L12 6.31 8.78 9.53a.75.75 0 01-1.06-1.06l3.75-3.75zm-3.75 9.75a.75.75 0 011.06 0L12 17.69l3.22-3.22a.75.75 0 111.06 1.06l-3.75 3.75a.75.75 0 01-1.06 0l-3.75-3.75a.75.75 0 010-1.06z","clip-rule":"evenodd"})])}const Nn={class:"relative mt-1"},Gn={class:"relative w-full cursor-pointer rounded ring-1 ring-black ring-opacity-5 p-0.5 py-2 pl-3 pr-10 text-left focus:outline-none focus-visible:border-indigo-500 focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75 focus-visible:ring-offset-2 sm:text-sm"},Un={class:"block truncate"},Hn={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},qt=D({__name:"Select",props:{modelValue:{}},emits:["update:modelValue","change"],setup(e,{emit:t}){const n=e,o=b({get(){return n.modelValue},set(l){l!==n.modelValue&&(t("update:modelValue",l),t("change",l))}});return(l,a)=>(S(),X(E(un),{modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=r=>o.value=r)},{default:A(()=>[m("div",Nn,[T(E(cn),{class:"relative w-full"},{default:A(()=>[Te(l.$slots,"listbox",{selected:o.value},()=>[m("div",Gn,[m("span",Un,F(o.value),1),m("span",Hn,[T(E(Xt),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})])])])]),_:3}),T(it,{"leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:A(()=>[T(E(dn),null,{default:A(()=>[Te(l.$slots,"default")]),_:3})]),_:3})])]),_:3},8,["modelValue"]))}}),Wn={key:0,class:"absolute inset-y-0 left-0 flex items-center pl-3 text-blue-400"},Jt=D({__name:"SelectOption",props:{value:{type:[String,Number,Boolean]},label:{type:[String,Number,Boolean]}},setup(e){return(t,n)=>(S(),X(E(vn),{value:t.value},{default:A(({active:o,selected:l})=>[Te(t.$slots,"default",{active:o,selected:l,item:t.value},()=>[m("li",{class:ae([o?"bg-gray-200 dark:bg-navyBlue-100":"","relative rounded-lg cursor-pointer select-none p-2 pl-10 text-gray-900 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-navyBlue-100"])},[m("span",{class:ae([l?"font-medium":"font-normal","block truncate"])},F(t.label),3),l?(S(),B("span",Wn,[T(E(Vn),{class:"h-5 w-5","aria-hidden":"true"})])):Ee("",!0)],2)])]),_:3},8,["value"]))}}),ne=(e=[])=>{function t(o){return o.charAt(0).toUpperCase()+o.slice(1)}function n(o){if(typeof o=="string")return t(o);if(Array.isArray(o))return o.map(l=>t(l)).join("/")}return Array.isArray(e)?e.map(o=>n(o)).join("+"):t(e)},zn=(e=[])=>{function t(o){return o===" "?"Space":o.charAt(0).toUpperCase()+o.slice(1)}function n(o){if(typeof o=="string")return t(o);if(Array.isArray(o))return o.map(l=>t(l)).join(" / ")}return Array.isArray(e)?e.map(o=>n(o)):[t(e)]},Yn=["onClick"],Xn={class:"w-full grid grid-cols-[1rem_1fr_1.5fr] gap-2 text-sm font-medium select-none"},qn=["name"],Jn=D({__name:"ContextMenu",props:{visible:{type:Boolean},x:{},y:{},menuGroups:{default:()=>[]}},emits:["update:visible","close"],setup(e,{emit:t}){const n=e,o=x(null),l=b({get(){return n.visible},set(u){t("update:visible",u),u||t("close")}}),a=b(()=>{const u=Math.max(n.x-2,0),s=Math.max(n.y-2,0),d=12,v=224,p=n.menuGroups.flat().length*40,y=u+v-window.innerWidth+d,f=s+p-window.innerHeight+d;return{left:y>0?`${u-y}px`:`${u}px`,top:f>0?`${s-f}px`:`${s}px`}}),r=b(()=>n.menuGroups.filter(u=>u.length));An("mousedown",o,()=>{l.value=!1});const i=u=>{u.preventDefault()},c=u=>{var s;u.disable||((s=u.action)==null||s.call(u),l.value=!1)};return j(()=>{o.value&&o.value.addEventListener("contextmenu",i,!1)}),le(()=>{o.value&&o.value.removeEventListener("contextmenu",i,!1)}),(u,s)=>(S(),X(it,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"translate-y-1 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-1 opacity-0"},{default:A(()=>[l.value?(S(),B("div",{key:0,style:Et(a.value),class:"absolute w-screen max-w-sm transform"},[m("div",{ref_key:"popoverRef",ref:o,class:"absolute w-fit py-1 divide-y rounded-sm bg-gray-50 dark:bg-navyBlue-200 shadow-md ring-1 ring-gray-600 dark:ring-navyBlue-100 ring-opacity-5 focus:outline-none"},[(S(!0),B(H,null,Q(r.value,(d,v)=>(S(),B("div",{key:v,class:"py-1"},[(S(!0),B(H,null,Q(d,(p,y)=>(S(),B("div",{key:y,class:ae(["flex items-center py-2 px-4 transition duration-150 ease-in-out",[p.disable?"text-gray-300 dark:text-slate-500 cursor-default":"text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-navyBlue-100 cursor-pointer"]]),onClick:f=>c(p)},[m("div",Xn,[p.icon?(S(),B("iconpark-icon",{key:0,name:p.icon},null,8,qn)):Ee("",!0),m("p",null,F(u.$t(p.label)),1),m("p",{class:ae([p.disable?"":"text-gray-400 dark:text-slate-400","text-end text-xs"])},F(p.hotKey),3)])],10,Yn))),128))]))),128))],512)],4)):Ee("",!0)]),_:1}))}});const Zn=(e,t)=>{const n=Ue(Jn),{moveDown:o,moveUp:l,moveBottom:a,moveTop:r,deleteNode:i,selectAll:c,resetStage:u,undo:s,redo:d,makeGroup:v,decomposeGroup:p}=Bn(Re),y=({event:f})=>{f.evt.preventDefault();let g=!1;const h=e.findTopGroup(f.target);if(f.target instanceof fe.Stage)g=!0;else if(!t.value.find(J=>J.id()===f.target.id()||J.id()===(h==null?void 0:h.id()))){const J=h??f.target;e.select(J)}const k=t.value.length&&!g?[{icon:"sent-to-back",label:o.directions,hotKey:ne(o.hotKey),action:o},{icon:"bring-to-front",label:l.directions,hotKey:ne(l.hotKey),action:l},{icon:"bring-to-front-one",label:a.directions,hotKey:ne(a.hotKey),action:a},{icon:"send-to-back",label:r.directions,hotKey:ne(r.hotKey),action:r}]:[],w=t.value.length>1&&!g?[{icon:"group",label:v.directions,hotKey:ne(v.hotKey),action:v}]:[],$=t.value.length===1&&t.value[0]instanceof fe.Group?[{icon:"ungroup",label:p.directions,hotKey:ne(p.hotKey),action:p}]:[],C=t.value.length&&!g?[{icon:"delete-one",label:i.directions,hotKey:ne(i.hotKey),action:i}]:[],P=g||t.value.length===0?[{icon:"full-selection",label:c.directions,hotKey:ne(c.hotKey),action:c},{icon:"clear",label:u.directions,hotKey:ne(u.hotKey),action:u}]:[],L=[{icon:"undo",label:s.directions,hotKey:ne(s.hotKey),disable:!e.canUndo(),action:s},{icon:"redo",label:d.directions,hotKey:ne(d.hotKey),disable:!e.canRedo(),action:d}],U=[P,k,w,$,L,C];n({x:f.evt.clientX,y:f.evt.clientY,menuGroups:U})};j(()=>e.on("mouse:contextmenu",y)),le(()=>e.off("mouse:contextmenu",y))},Qn=Zn,eo=m("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),to={class:"fixed inset-0 overflow-y-auto"},lo={class:"flex min-h-full items-center justify-center p-4 text-center"},vt=D({__name:"Dialog",props:{visible:{type:Boolean}},emits:["update:visible","close"],setup(e,{emit:t}){const n=e,o=b({get(){return n.visible},set(a){t("update:visible",a),a||t("close")}});function l(){o.value=!1}return(a,r)=>(S(),X(E(Ht),{appear:"",show:o.value,as:"template"},{default:A(()=>[T(E(Ql),{as:"div",class:"relative z-10",onClose:l},{default:A(()=>[T(E(tt),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:A(()=>[eo]),_:1}),m("div",to,[m("div",lo,[T(E(tt),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:A(()=>[T(E(en),{class:"rounded-lg bg-white dark:bg-navyBlue-200 p-4 text-left dark:text-gray-300 align-middle shadow-xl transition-all w-auto"},{default:A(()=>[T(E(tn),{class:"grid grid-cols-[1fr_2rem] py-2"},{default:A(()=>[m("div",null,[Te(a.$slots,"title")]),T(Z,{class:"hover:bg-none",icon:"close",onClick:l})]),_:3}),Te(a.$slots,"default")]),_:3})]),_:3})])])]),_:3})]),_:3},8,["show"]))}}),no={as:"h3",class:"text-lg font-medium leading-6"},oo={class:"flex flex-col"},ao={class:"mt-3"},io={class:"text-sm text-gray-500"},ro={class:"mt-4 flex flex-row justify-between"},so=D({__name:"MessageBox",props:{visible:{type:Boolean},title:{},message:{}},emits:["update:visible","close","submit"],setup(e,{emit:t}){const n=e,o=b({get(){return n.visible},set(r){t("update:visible",r),r||t("close")}}),l=()=>{o.value=!1},a=()=>{t("submit"),l()};return(r,i)=>(S(),X(vt,{visible:o.value,onClose:l},{title:A(()=>[m("div",no,F(r.$t(r.title)),1)]),default:A(()=>[m("div",oo,[m("div",ao,[m("p",io,F(r.$t(r.message)),1)]),m("div",ro,[T(Z,{class:"inline-flex justify-center rounded-md border border-transparent bg-red-400 px-4 py-2 text-sm font-medium text-red-50 hover:bg-red-500 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2",title:r.$t("关闭"),text:r.$t("关闭"),onClick:l},null,8,["title","text"]),T(Z,{class:"inline-flex justify-center rounded-md border border-transparent bg-blue-400 px-4 py-2 text-sm font-medium text-blue-50 hover:bg-blue-500 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",title:r.$t("确认"),text:r.$t("确认"),onClick:a},null,8,["title","text"])])])]),_:1},8,["visible"]))}}),uo=()=>{const e=x(!1),t=x();return{loading:e,error:t,execute:async(o=["*"],l=!1)=>{try{return e.value=!0,await Bt(o,l)}catch(a){throw(a instanceof _l||a instanceof Cl)&&(t.value=a),a}finally{e.value=!1}}}},co=()=>{const e=x(!1),t=x(),{error:n,execute:o}=uo();return he(()=>n.value,a=>{t.value=a}),{loading:e,error:t,execute:async(a=["*"])=>{try{e.value=!0;const r=await o(a)??[],i=new FileReader;return new Promise((c,u)=>{i.onload=({target:s})=>{c(s==null?void 0:s.result)},i.onerror=s=>{t.value=s,u(t.value)},i.readAsText(r[0])})}catch(r){t.value=r}finally{e.value=!1}}}},vo=m("span",{class:"sr-only"},"Enable notifications",-1),fo=D({__name:"Switch",props:{modelValue:{type:Boolean}},emits:["change","update:modelValue"],setup(e,{emit:t}){const n=e,o=b({get(){return n.modelValue},set(l){l!==n.modelValue&&(t("update:modelValue",l),t("change",l))}});return(l,a)=>(S(),X(E(wn),{modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=r=>o.value=r),class:ae([o.value?"bg-blue-400":"bg-gray-200","relative inline-flex h-6 w-11 items-center rounded-full"])},{default:A(()=>[vo,m("span",{class:ae([o.value?"translate-x-6":"translate-x-1","inline-block h-4 w-4 transform rounded-full bg-white transition"])},null,2)]),_:1},8,["modelValue","class"]))}});var Oe=(e=>(e.HTML="text/html",e.CSS="text/css",e.JPEG="image/jpeg",e.PNG="image/png",e.GIF="image/gif",e.MPEG="audio/mpeg",e.OGG="audio/ogg",e.MP4="video/mp4",e.JSON="application/json",e.JAVASCRIPT="application/javascript",e.ECMASCRIPT="application/ecmascript",e.EXCEL="application/vnb.ms-excel",e.CSV="application/x-csv",e.ZIP="application/zip",e.TGZ="application/x-gtar",e.TAR_GZ="application/x-gzip",e.XML="text/xml",e.TEXT="text/plain",e.SVG="image/svg+xml",e))(Oe||{});class po extends Pl{constructor(t,n){super(`${t} 导出失败`,{cause:n.cause})}}const Zt=(e,t="file",n=Oe.TEXT,o="utf-8",l=!1)=>{const a=x(!1),r=x();return{execute:async c=>{a.value=!0,typeof t=="function"&&(t=t(c));try{const u=await Promise.resolve(e(c)),s=document.createElement("a");if(l)s.href=u;else{const d=new Blob([u],{type:`${n};charset=${o}`});s.href=window.URL.createObjectURL(d)}s.download=t,s.click(),window.URL.revokeObjectURL(s.href)}catch(u){throw r.value=new po(t,u),r.value}finally{a.value=!1}},loading:a,error:r}},go={class:"text-lg"},mo={class:"max-w-5xl min-w-fit flex flex-row justify-between transform overflow-hidden"},ho={class:"flex items-center h-96 w-96"},yo={class:"w-full h-full flex flex-grow justify-center bg-fixed rounded-md p-1",style:{"background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMUlEQVQ4T2NkYGAQYcAP3uCTZhw1gGGYhAGBZIA/nYDCgBDAm9BGDWAAJyRCgLaBCAAgXwixzAS0pgAAAABJRU5ErkJggg==)"}},bo=["src"],xo={class:"flex flex-col flex-wrap w-96 min-w-max gap-6 grow ml-6 antialiased p-2"},wo={class:"flex flex-row justify-between items-center"},ko={class:"flex flex-row justify-between items-center"},So={class:"flex flex-grow justify-around flex-wrap"},$o={class:"flex flex-row justify-between items-center"},_o={class:"relative w-full cursor-pointer rounded-lg ring-1 ring-slate-950 dark:ring-navyBlue-100 py-2 pl-2 pr-6 text-left focus:outline-none focus-visible:border-indigo-500 focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75 focus-visible:ring-offset-2 sm:text-sm"},Co={class:"block truncate"},Po={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},To={class:"absolute mt-3 max-h-60 w-fit rounded-lg bg-white dark:bg-navyBlue-200 py-1 text-base shadow-lg ring-1 ring-slate-950 dark:ring-navyBlue-100 focus:outline-none sm:text-sm"},Eo={class:"grow flex flex-col justify-end"},Ro=D({__name:"ExportImageDialog",props:{visible:{type:Boolean}},emits:["update:visible","close"],setup(e,{emit:t}){const n=e,o=ue(Ie),l=ue(dt),a=b({get(){return n.visible},set(f){t("update:visible",f),f||t("close")}}),r=[{label:"PNG",value:Oe.PNG,format:"png"},{label:"JPEG",value:Oe.JPEG,format:"jpeg"}],i=[1,2,3],c=x(!0),u=x(2),s=x(r[0].value),d=x(""),v=()=>{a.value=!1},p=async()=>{const{dataURL:f}=await o.toDataURL(l.value,{pixelRatio:u.value,mimeType:s.value,haveBackground:c.value});d.value=f},y=async()=>{const{execute:f}=Zt(()=>d.value,()=>{var g;return`Pictode-${new Date}.${(g=r.find(h=>h.value===s.value))==null?void 0:g.format}`},s.value,"utf-8",!0);await f(),a.value=!1};return j(()=>{V(()=>{p()})}),(f,g)=>(S(),X(vt,{visible:a.value,onClose:v},{title:A(()=>[m("div",go,F(f.$t("导出图片")),1)]),default:A(()=>[m("div",mo,[m("div",ho,[m("div",yo,[m("img",{src:d.value,class:"object-contain max-w-full max-h-full"},null,8,bo)])]),m("div",xo,[m("div",wo,[m("label",null,F(f.$t("背景")),1),T(fo,{modelValue:c.value,"onUpdate:modelValue":g[0]||(g[0]=h=>c.value=h),onChange:p},null,8,["modelValue"])]),m("div",ko,[m("label",null,F(f.$t("缩放比")),1),T(E(Rt),{modelValue:u.value,"onUpdate:modelValue":g[1]||(g[1]=h=>u.value=h),class:"rounded-lg ring-1 w-24 ring-slate-950 dark:ring-navyBlue-100 p-0.5",onChange:p},{default:A(()=>[m("div",So,[(S(),B(H,null,Q(i,(h,k)=>T(E(Lt),{key:k,value:h,class:"font-mono text-xs"},{default:A(({checked:w})=>[m("div",{class:ae(["rounded-lg inline-flex items-center relative cursor-pointer select-none p-2",w?"bg-blue-500":"hover:bg-gray-200 dark:hover:bg-navyBlue-100"])},F(`${h}x`),3)]),_:2},1032,["value"])),64))])]),_:1},8,["modelValue"])]),m("div",$o,[m("label",null,F(f.$t("图片格式")),1),T(qt,{modelValue:s.value,"onUpdate:modelValue":g[2]||(g[2]=h=>s.value=h),class:"w-24",onChange:p},{listbox:A(()=>{var h;return[m("div",_o,[m("span",Co,F((h=r.find(k=>k.value===s.value))==null?void 0:h.label),1),m("span",Po,[T(E(Xt),{class:"h-3 w-3 text-gray-400","aria-hidden":"true"})])])]}),default:A(()=>[m("div",To,[(S(),B(H,null,Q(r,({label:h,value:k},w)=>T(Jt,{key:w,value:k,label:h,class:"p-1 w-24"},null,8,["value","label"])),64))])]),_:1},8,["modelValue"])]),m("div",Eo,[T(Z,{class:"inline-flex justify-center rounded-md border border-transparent px-4 py-2 text-sm font-medium bg-blue-400 text-blue-50",title:f.$t("下载"),text:f.$t("下载"),onClick:y},null,8,["title","text"])])])])]),_:1},8,["visible"]))}}),Lo=(e,t,n)=>{const o=Wt(Re,null);if(o)return o;const l=Ue(so),a=Ue(Ro),{execute:r}=co(),i={open:K(async()=>{const c=await r([".pictode"]);c&&t.fromJSON(c)},{key:"o",directions:"打开",exact:!0,ctrlKey:!0,target:e}),exportImg:K(()=>{a({})},{key:"e",directions:"导出图片",exact:!0,ctrlKey:!0,shiftKey:!0,target:e}),moveDown:K(()=>{t.moveDown(...n.value)},{key:"[",directions:"下移一层",exact:!0,ctrlKey:!0,target:e}),moveUp:K(()=>{t.moveUp(...n.value)},{key:"]",directions:"上移一层",exact:!0,ctrlKey:!0,target:e}),moveBottom:K(()=>{t.moveBottom(...n.value)},{key:"[",directions:"置于底层",exact:!0,ctrlKey:!0,shiftKey:!0,target:e}),moveTop:K(()=>{t.moveTop(...n.value)},{key:"]",directions:"置于顶层",exact:!0,ctrlKey:!0,shiftKey:!0,target:e}),deleteNode:K(()=>{t.remove(...n.value)},{key:["delete","backspace"],directions:"删除",target:e}),selectAll:K(()=>{const c=t.isPluginEnable("selectorPlugin");t.triggerSelector(!0),t.selectAll(),t.triggerSelector(c)},{key:"a",directions:"全部选中",exact:!0,ctrlKey:!0,target:e}),resetStage:K(()=>{l({title:"清除画布",message:"将会清空画布内容，是否继续？",onSubmit:()=>{t.clear(),l.close()}})},{key:"r",directions:"重置画布",exact:!0,ctrlKey:!0,target:e}),undo:K(()=>{t.undo()},{key:"z",directions:"撤销",exact:!0,ctrlKey:!0,target:e}),redo:K(()=>{t.redo()},{key:"y",directions:"重做",exact:!0,ctrlKey:!0,target:e}),stageDrag:K(()=>(t.triggerPanning(!0),()=>{t.triggerPanning(!1)}),{key:" ",directions:"移动画布",target:e}),mouseWheel:K(()=>(t.triggerMouseWheel(!0),()=>{t.triggerMouseWheel(!1)}),{key:["Control","Meta"],directions:"缩放画布",target:e}),makeGroup:K(()=>{const c=t.makeGroup(n.value);Array.isArray(c)||t.select(c)},{key:"g",directions:"组合",ctrlKey:!0,shiftKey:!0,exact:!0,target:e}),decomposeGroup:K(()=>{const c=n.value[0];c instanceof fe.Group&&t.decomposeGroup(c)},{key:"j",directions:"解除组合",ctrlKey:!0,shiftKey:!0,exact:!0,target:e}),alignLeft:K(()=>{n.value.length<1||t.alignLeft(n.value)},{key:"a",directions:"左对齐",shiftKey:!0,target:e}),alignCenterX:K(()=>{n.value.length<1||t.alignCenterX(n.value)},{key:"h",directions:"水平居中",shiftKey:!0,target:e}),alignRight:K(()=>{n.value.length<1||t.alignRight(n.value)},{key:"d",directions:"右对齐",shiftKey:!0,target:e}),alignTop:K(()=>{n.value.length<1||t.alignTop(n.value)},{key:"w",directions:"顶对齐",shiftKey:!0,target:e}),alignCenterY:K(()=>{n.value.length<1||t.alignCenterY(n.value)},{key:"v",directions:"垂直居中",shiftKey:!0,target:e}),alignBottom:K(()=>{n.value.length<1||t.alignBottom(n.value)},{key:"s",directions:"底对齐",shiftKey:!0,target:e}),distributeX:K(()=>{n.value.length<2||t.dispersionX(n.value)},{key:"h",directions:"水平分布",ctrlKey:!0,shiftKey:!0,target:e}),distributeY:K(()=>{n.value.length<2||t.dispersionY(n.value)},{key:"v",directions:"垂直分布",ctrlKey:!0,shiftKey:!0,target:e})};return te(Re,i),i},Ao=Lo,Bo={bindTool:["ellipseTool"],bindShape:["Ellipse"],formConfig:[{name:"stroke",label:"描边",type:"Color"},{name:"fill",label:"填充",type:"Color"},{name:"strokeWidth",label:"描边宽度",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:2,title:"细"},{label:"line-2",value:4,title:"粗"},{label:"line-3",value:8,title:"特粗"}]},{name:"dash",label:"边框样式",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:[],title:"实线"},{label:"dotted-line-2",value:[12,8],title:"虚线"},{label:"dotted-line-1",value:[6,4],title:"点虚线"}]},{name:"opacity",label:"透明度",type:"Slider"}],model:{stroke:"#000",fill:"#ffffff",strokeWidth:2,dash:[],opacity:1}},Oo={bindTool:["imageTool"],bindShape:["Image"],formConfig:[{name:"stroke",label:"描边",type:"Color"},{name:"strokeWidth",label:"描边宽度",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:2,title:"细"},{label:"line-2",value:4,title:"粗"},{label:"line-3",value:8,title:"特粗"}]},{name:"dash",label:"边框样式",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:[],title:"实线"},{label:"dotted-line-2",value:[12,8],title:"虚线"},{label:"dotted-line-1",value:[6,4],title:"点虚线"}]},{name:"opacity",label:"透明度",type:"Slider"}],model:{stroke:"#ffffff00",strokeWidth:2,dash:[],opacity:1}},Do={bindTool:["lineTool","drawingTool"],bindShape:["Line"],formConfig:[{name:"stroke",label:"描边",type:"Color"},{name:"strokeWidth",label:"描边宽度",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:2,title:"细"},{label:"line-2",value:4,title:"粗"},{label:"line-3",value:8,title:"特粗"}]},{name:"tension",label:"边角",type:"RadioGroup",optionType:"icon",options:[{label:"node-flat",value:0,title:"直角"},{label:"node-round",value:.4,title:"圆角"}]},{name:"dash",label:"边框样式",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:[],title:"实线"},{label:"dotted-line-2",value:[12,8],title:"虚线"},{label:"dotted-line-1",value:[6,4],title:"点虚线"}]},{name:"opacity",label:"透明度",type:"Slider"}],model:{stroke:"#000000",strokeWidth:2,opacity:1,tension:.4,dash:[]}},Io={bindTool:["rectTool"],bindShape:["Rect"],formConfig:[{name:"stroke",label:"描边",type:"Color"},{name:"fill",label:"填充",type:"Color"},{name:"strokeWidth",label:"描边宽度",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:2,title:"细"},{label:"line-2",value:4,title:"粗"},{label:"line-3",value:8,title:"特粗"}]},{name:"cornerRadius",label:"边角",type:"RadioGroup",optionType:"icon",options:[{label:"node-flat",value:0,title:"直角"},{label:"node-round",value:20,title:"圆角"}]},{name:"dash",label:"边框样式",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:[],title:"实线"},{label:"dotted-line-2",value:[12,8],title:"虚线"},{label:"dotted-line-1",value:[6,4],title:"点虚线"}]},{name:"opacity",label:"透明度",type:"Slider"}],model:{stroke:"#000000",fill:"#ffffff",strokeWidth:2,cornerRadius:20,dash:[],opacity:1}},Mo={bindTool:["regularPolygonTool"],bindShape:["RegularPolygon"],formConfig:[{name:"stroke",label:"描边",type:"Color"},{name:"fill",label:"填充",type:"Color"},{name:"strokeWidth",label:"描边宽度",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:2,title:"细"},{label:"line-2",value:4,title:"粗"},{label:"line-3",value:8,title:"特粗"}]},{name:"dash",label:"边框样式",type:"RadioGroup",optionType:"icon",options:[{label:"line-1",value:[],title:"实线"},{label:"dotted-line-2",value:[12,8],title:"虚线"},{label:"dotted-line-1",value:[6,4],title:"点虚线"}]},{name:"opacity",label:"透明度",type:"Slider"}],model:{stroke:"#000000",fill:"#ffffff",strokeWidth:2,dash:[],opacity:1}},Fo={bindTool:["textTool"],bindShape:["Text"],formConfig:[{name:"fill",label:"填充",type:"Color"},{name:"fontSize",label:"字体大小",type:"RadioGroup",optionType:"text",options:[{label:"S",value:12,class:"w-[1rem] h-[1rem] flex items-center justify-center",title:"S"},{label:"M",value:16,class:"w-[1rem] h-[1rem] flex items-center justify-center",title:"M"},{label:"L",value:20,class:"w-[1rem] h-[1rem] flex items-center justify-center",title:"L"},{label:"XL",value:24,class:"w-[1rem] h-[1rem] flex items-center justify-center",title:"XL"}]},{name:"stroke",label:"描边",type:"Color"},{name:"strokeWidth",label:"描边宽度",type:"Slider",min:0,max:2},{name:"opacity",label:"透明度",type:"Slider"}],model:{stroke:"#000000",strokeWidth:0,fill:"#000000",fontSize:16,opacity:1}},Qt=[Mo,Bo,Oo,Do,Io,Fo],Ko=e=>Qt.find(({bindShape:t})=>t.includes(e)),jo=e=>Qt.find(({bindTool:t})=>t.includes(e)),Vo=()=>{const e=new Tl,t=new El({enabled:!0,stackSize:50}),n=new Rl({enabled:!0,multipleSelect:!0}),o=new Ll({enabled:!0});e.use(t),e.use(n),e.use(o);const l=x([]),a=x([]),r=x({}),i=x(e.scale()),c=({selected:d})=>{var p,y;if(l.value=d,((p=e.curTool)==null?void 0:p.name)!=="selectTool")return;const v=Ko(((y=d[0])==null?void 0:y.className)??"");a.value=(v==null?void 0:v.formConfig)??[],v!=null&&v.model&&(v.model=Object.keys(v.model).reduce((f,g)=>{var h;return{...f,[g]:(h=l.value)==null?void 0:h[0].attrs[g]}},{})),r.value=(v==null?void 0:v.model)??{}},u=({curTool:d})=>{if(!d)return;const v=jo(d.name);v&&(a.value=v.formConfig,r.value=v.model,d.config={...d.config,...r.value})},s=({scale:d})=>{i.value=d};return j(()=>{e.on("selected:changed",c),e.on("tool:changed",u),e.on("canvas:zoom:end",s)}),le(()=>{e.off("selected:changed",c),e.off("tool:changed",u),e.off("canvas:zoom:end",s)}),te(Ie,e),te(dt,l),te(On,{selectorPlugin:n,historyPlugin:t}),te(Yt,{panelFormConfig:a,panelFormModel:r}),{app:e,scale:i,selected:l,panelFormConfig:a,panelFormModel:r}},No=Vo,Go={class:"w-full min-w-fit md:min-w-[60rem] h-[40rem] p-2 overflow-auto scrollbar scrollbar-w-2 scrollbar-thumb-gray-200 scrollbar-track-gray-100 scrollbar-thumb-rounded-lg scrollbar-track-rounded-lg"},Uo={class:"my-4 text-xl font-bold"},Ho={class:"columns-2 gap-8"},Wo={class:"font-bold text-base"},zo={class:"rounded-lg ring-1 ring-slate-950 dark:ring-navyBlue-100 divide-y divide-slate-950 dark:divide-navyBlue-100 mt-2 text-xs"},Yo={class:"justify-self-end flex flex-row gap-1"},Xo=D({__name:"HotKeyList",props:{visible:{type:Boolean}},emits:["update:visible","close"],setup(e,{emit:t}){const n=e,{undo:o,redo:l,deleteNode:a,selectAll:r,resetStage:i,stageDrag:c,mouseWheel:u,moveUp:s,moveBottom:d,moveTop:v,moveDown:p,makeGroup:y,decomposeGroup:f,alignBottom:g,alignLeft:h,alignCenterX:k,alignCenterY:w,alignRight:$,alignTop:C,distributeX:P,distributeY:L}=ue(Re),U=[{title:"编辑",hotKeyList:[o,l,r,a,i]},{title:"视图",hotKeyList:[c,u]},{title:"转换",hotKeyList:[v,s,p,d,y,f,h,k,$,C,w,g,P,L]}],J=b({get(){return n.visible},set(ie){t("update:visible",ie),ie||t("close")}}),be=()=>{J.value=!1};return(ie,xe)=>(S(),X(vt,{visible:J.value,onClose:be},{title:A(()=>[Sl(F(ie.$t("帮助中心")),1)]),default:A(()=>[m("div",Go,[m("h3",Uo,F(ie.$t("快捷键列表")),1),m("div",Ho,[(S(),B(H,null,Q(U,({title:W,hotKeyList:we},re)=>m("div",{key:re,class:"w-full break-inside-avoid-column pb-4"},[m("h3",Wo,F(ie.$t(W)),1),m("div",zo,[(S(!0),B(H,null,Q(we,(pe,I)=>(S(),B("div",{key:I,class:"w-full p-4 flex flex-row justify-between items-center"},[m("div",null,F(ie.$t(pe.directions??"")),1),m("div",Yo,[(S(!0),B(H,null,Q(E(zn)(pe.hotKey),(N,ee)=>(S(),B("i",{key:ee,class:"p-2 min-w-fit bg-blue-100 rounded-lg dark:text-gray-600"},F(N),1))),128))])]))),128))])])),64))])])]),_:1},8,["visible"]))}}),qo=m("iconpark-icon",{name:"hamburger",class:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-navyBlue-100 text-lg dark:text-gray-300"},null,-1),Jo={class:"relative"},Zo={class:"w-full flex flex-row justify-between items-center gap-2"},Qo=["name"],ea={class:"flex-1 text-start"},ta={class:"text-xs text-gray-700 dark:text-slate-400"},la=D({__name:"Menu",setup(e){const t=ue(Ie),{open:n,resetStage:o,exportImg:l}=ue(Re),{execute:a}=Zt(()=>t.toJSON(),()=>`Pictode-${new Date}.pictode`,Oe.JSON,"utf-8"),r=[[{icon:"folder-close",label:n.directions??"",hotkey:n.hotKey,handler:n},{icon:"hard-disk-one",label:"保存到本地",handler:()=>{a()}},{icon:"down-picture",label:l.directions??"",hotkey:l.hotKey,handler:l},{icon:"clear",label:o.directions??"",hotkey:o.hotKey,handler:o}]];return(i,c)=>(S(),X(E(mn),{as:"div"},{default:A(()=>[T(E(hn),{class:"outline-none flex justify-start dark:bg-navyBlue-200 rounded-lg"},{default:A(()=>[qo]),_:1}),T(it,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:A(()=>[m("div",Jo,[T(E(yn),{class:"absolute mt-2 w-60 p-1 divide-y rounded-lg bg-white dark:bg-navyBlue-200 shadow-md ring-1 ring-slate-950 dark:ring-navyBlue-100 focus:outline-none"},{default:A(()=>[(S(),B(H,null,Q(r,(u,s)=>m("div",{key:s,class:"px-1 py-1"},[(S(!0),B(H,null,Q(u,(d,v)=>(S(),X(E(bn),{key:v,class:"hover:bg-gray-200 dark:hover:bg-navyBlue-100"},{default:A(({active:p})=>[T(Z,{class:ae([p?"bg-blue-100":"text-gray-900 ","group flex w-full items-center rounded-md px-2 py-2 text-sm dark:text-gray-300"]),title:i.$t(d.label),onClick:d.handler},{default:A(()=>[m("div",Zo,[m("iconpark-icon",{name:d.icon},null,8,Qo),m("span",ea,F(i.$t(d.label)),1),m("span",ta,F(E(ne)(d.hotkey)),1)])]),_:2},1032,["class","title","onClick"])]),_:2},1024))),128))])),64))]),_:1})])]),_:1})]),_:1}))}}),na={key:0},oa={key:0,class:"flex flex-col content-start gap-1 px-1 py-2 select-none"},aa={class:"text-start text-sm text-gray-600 dark:text-gray-300"},ia={class:"flex flex-row justify-start flex-wrap gap-2"},ra={key:1,class:"select-none p-2"},sa=m("iconpark-icon",null,null,-1),ua=[sa],ca={class:"flex flex-col content-start gap-1 px-1 py-2 select-none"},da={class:"text-start text-sm text-gray-600 dark:text-gray-300"},va={class:"flex flex-row justify-start flex-wrap gap-2"},fa=D({__name:"PropertyPanel",setup(e){const t=ue(Ie),n=ue(dt),{panelFormConfig:o,panelFormModel:l}=ue(Yt),{moveBottom:a,moveDown:r,moveUp:i,moveTop:c,alignLeft:u,alignRight:s,alignTop:d,alignBottom:v,alignCenterX:p,alignCenterY:y,distributeX:f,distributeY:g}=ue(Re),h=b(()=>[{icon:"bring-to-front-one",action:a},{icon:"sent-to-back",action:r},{icon:"bring-to-front",action:i},{icon:"send-to-back",action:c}]),k=b(()=>[{icon:"align-left",visible:n.value.length>1,action:u},{icon:"align-horizontally",visible:n.value.length>1,action:p},{icon:"align-right",visible:n.value.length>1,action:s},{icon:"distribute-horizontal-spacing",visible:n.value.length>2,action:f},{icon:"align-top",visible:n.value.length>1,action:d},{icon:"align-vertically",visible:n.value.length>1,action:y},{icon:"align-bottom",visible:n.value.length>1,action:v},{icon:"distribute-vertical-spacing",visible:n.value.length>2,action:g}]),w=b(()=>n.value.length>1),$=C=>{t.update(...n.value.map(P=>{const L=P.toObject();return L.attrs={...L.attrs,...C},L}))};return(C,P)=>E(o).length?(S(),B("div",na,[T(E(Mn),{model:E(l),config:E(o),onChange:$},null,8,["model","config"]),w.value?(S(),B("div",oa,[m("label",aa,F(C.$t("对齐")),1),m("div",ia,[(S(!0),B(H,null,Q(k.value,(L,U)=>(S(),B("div",{key:U},[L.visible?(S(),X(Z,{key:0,class:"rounded-lg inline-flex items-center relative cursor-pointer select-none p-2 hover:bg-gray-200 dark:hover:bg-navyBlue-100 dark:text-gray-300",title:C.$t(L.action.directions??""),icon:L.icon,onClick:L.action},null,8,["title","icon","onClick"])):(S(),B("div",ra,ua))]))),128))])])):Ee("",!0),m("div",ca,[m("label",da,F(C.$t("层级")),1),m("div",va,[(S(!0),B(H,null,Q(h.value,(L,U)=>(S(),X(Z,{key:U,class:"rounded-lg inline-flex items-center relative cursor-pointer select-none p-2 hover:bg-gray-200 dark:hover:bg-navyBlue-100 dark:text-gray-300",title:C.$t(L.action.directions??""),icon:L.icon,onClick:L.action},null,8,["title","icon","onClick"]))),128))])])])):Ee("",!0)}});class pa{constructor({config:t,hooks:n}){O(this,"name","regularPolygonTool");O(this,"hooks");O(this,"config");O(this,"regularPolygon",null);O(this,"startPointer",new ye(0,0));this.config=t,this.hooks=n}mousedown({app:t}){var n,o;this.regularPolygon||(this.startPointer.clone(t.pointer),this.regularPolygon=new fe.RegularPolygon({sides:4,radius:0,strokeScaleEnabled:!1,...this.config}),this.regularPolygon.setPosition(this.startPointer),t.add(this.regularPolygon),(o=(n=this.hooks)==null?void 0:n.onStartDrawing)==null||o.call(n,t,this.regularPolygon))}mousemove({app:t}){if(!this.regularPolygon)return;const n=t.pointer.x-this.startPointer.x,o=t.pointer.y-this.startPointer.y,l=new ye(this.startPointer.x+n/2,this.startPointer.y+o/2);this.regularPolygon.setPosition(l),this.regularPolygon.radius(l.distanceTo(t.pointer)),t.render()}mouseup({app:t,pointer:n}){var o,l,a;if(this.regularPolygon){if(this.startPointer.eq(n)){(o=this.regularPolygon)==null||o.destroy(),this.regularPolygon=null;return}(a=(l=this.hooks)==null?void 0:l.onCompleteDrawing)==null||a.call(l,t,this.regularPolygon),this.regularPolygon=null,this.startPointer.setXY(0,0)}}enableChanged(){this.regularPolygon=null,this.startPointer.setXY(0,0)}}class ga{constructor({config:t,hooks:n}){O(this,"name","drawingTool");O(this,"config");O(this,"hooks");O(this,"line",null);O(this,"points",[]);this.config=t,this.hooks=n}mousedown({app:t}){var o,l;const n=this.points.at(-1);n!=null&&n.eq(t.pointer)||this.points.push(t.pointer),!this.line&&(this.line=new fe.Line({points:Be(this.points),globalCompositeOperation:"source-over",lineCap:"round",lineJoin:"round",strokeScaleEnabled:!1,hitStrokeWidth:20,...this.config}),t.add(this.line),(l=(o=this.hooks)==null?void 0:o.onStartDrawing)==null||l.call(o,t,this.line))}mousemove({app:t,event:n}){this.line&&(n.evt.stopPropagation(),this.points.push(t.pointer),this.line.points(Be(this.points)))}mouseup({app:t,pointer:n}){var l,a;if(!this.line)return;const o=this.points.at(-1);this.points.length<=6&&o&&n.distanceTo(o)<10&&this.line&&this.line.destroy(),(a=(l=this.hooks)==null?void 0:l.onCompleteDrawing)==null||a.call(l,t,this.line),this.line=null,this.points=[]}enableChanged(){this.line=null,this.points=[]}}class ma{constructor({config:t,hooks:n}){O(this,"name","ellipseTool");O(this,"config");O(this,"hooks");O(this,"ellipse",null);O(this,"startPointer",new ye(0,0));this.config=t,this.hooks=n}mousedown({app:t}){this.ellipse||(this.startPointer.clone(t.pointer),this.ellipse=new fe.Ellipse({radiusX:0,radiusY:0,strokeScaleEnabled:!1,...this.config}),this.ellipse.setPosition(this.startPointer),this.ellipse.radius(new ye(0,0)),t.add(this.ellipse))}mousemove({app:t}){if(!this.ellipse)return;const n=t.pointer.x-this.startPointer.x,o=t.pointer.y-this.startPointer.y,l=new ye(Math.abs(n)/2,Math.abs(o)/2);this.ellipse.setPosition(new ye(this.startPointer.x+n/2,this.startPointer.y+o/2)),this.ellipse.radius(l),t.render()}mouseup({app:t,pointer:n}){var o,l,a;if(this.ellipse){if(this.startPointer.eq(n)){(o=this.ellipse)==null||o.destroy(),this.ellipse=null;return}(a=(l=this.hooks)==null?void 0:l.onCompleteDrawing)==null||a.call(l,t,this.ellipse),this.ellipse=null,this.startPointer.setXY(0,0)}}enableChanged(){this.ellipse=null,this.startPointer.setXY(0,0)}}class ha{constructor({config:t,hooks:n}){O(this,"name","lineTool");O(this,"config");O(this,"hooks");O(this,"points",[]);O(this,"line",null);this.config=t,this.hooks=n}mousedown({app:t}){var o,l;this.line||(this.line=new fe.Line({points:Be(this.points),fill:"transparent",strokeScaleEnabled:!1,hitStrokeWidth:20,...this.config}),t.add(this.line),(l=(o=this.hooks)==null?void 0:o.onStartDrawing)==null||l.call(o,t,this.line));const n=this.points.at(-1);n!=null&&n.eq(t.pointer)||this.points.push(t.pointer),this.line.points(Be(this.points))}mousemove({app:t,pointer:n}){this.line&&(this.line.points(Be(this.points).concat(n.x,n.y)),t.render())}doubleClick({app:t}){var n,o;this.line&&((o=(n=this.hooks)==null?void 0:n.onCompleteDrawing)==null||o.call(n,t,this.line),this.line=null,this.points=[])}enableChanged(){this.line=null,this.points=[]}}class ya{constructor({config:t,hooks:n}){O(this,"name","rectTool");O(this,"config");O(this,"hooks");O(this,"startPointer",new ye(0,0));O(this,"rectangle",null);this.config=t,this.hooks=n}mousedown({app:t}){var n,o;this.rectangle||(this.startPointer.clone(t.pointer),this.rectangle=new fe.Rect({strokeScaleEnabled:!1,...this.config}),this.rectangle.setPosition(this.startPointer),this.rectangle.width(0),this.rectangle.height(0),t.add(this.rectangle),(o=(n=this.hooks)==null?void 0:n.onStartDrawing)==null||o.call(n,t,this.rectangle))}mousemove({app:t}){this.rectangle&&(this.rectangle.setPosition(new ye(Math.min(this.startPointer.x,t.pointer.x),Math.min(this.startPointer.y,t.pointer.y))),this.rectangle.width(Math.abs(t.pointer.x-this.startPointer.x)),this.rectangle.height(Math.abs(t.pointer.y-this.startPointer.y)),t.render())}mouseup({app:t,pointer:n}){var o,l,a;if(this.rectangle){if(this.startPointer.eq(n)){(o=this.rectangle)==null||o.destroy(),this.rectangle=null;return}(a=(l=this.hooks)==null?void 0:l.onCompleteDrawing)==null||a.call(l,t,this.rectangle),this.rectangle=null,this.startPointer.setXY(0,0)}}enableChanged(){this.rectangle=null,this.startPointer.setXY(0,0)}}class ba{constructor(t){O(this,"name","eraserTool");O(this,"hooks");O(this,"targetMap",new Map);O(this,"isEraser",!1);this.hooks=t.hooks}mousedown({event:t}){this.isEraser=!0,!(t.target instanceof fe.Stage)&&(this.targetMap.set(t.target.id(),{node:t.target,opacity:t.target.attrs.opacity}),t.target.opacity(.3))}mouseup({app:t}){this.targetMap.size&&(t.remove(...[...this.targetMap.values()].map(({node:n,opacity:o})=>(n.opacity(o),n))),this.targetMap.clear(),this.isEraser=!1)}mousemove({event:t}){!this.isEraser||t.target instanceof fe.Stage||this.targetMap.get(t.target.id())||(this.targetMap.set(t.target.id(),{node:t.target,opacity:t.target.attrs.opacity}),t.target.opacity(.3))}enableChanged(){this.targetMap.clear(),this.isEraser=!1}}const xa=""+new URL("round-8b362c12.svg",import.meta.url).href,wa={class:"flex flex-grow justify-around flex-wrap"},ka=["name","stroke"],Sa=D({__name:"Tools",setup(e){const t=ue(Ie),n=new Al({hooks:{onActive(i){var c,u;(u=(c=i.getPlugin("selectorPlugin"))==null?void 0:c.enable)==null||u.call(c)},onInactive(i){var c,u;(u=(c=i.getPlugin("selectorPlugin"))==null?void 0:c.disable)==null||u.call(c)}}}),o=[{icon:"move",name:"selectTool",title:"选择",tool:n},{icon:"rectangle",name:"rectTool",title:"矩形",tool:()=>new ya({hooks:{onActive(i){i.containerElement.style.cursor="crosshair",i.cancelSelect()},onInactive(i){i.containerElement.style.cursor="default"},onCompleteDrawing(i,c){l.value=n.name,V(()=>i.select(c))}}})},{icon:"oval",name:"ellipseTool",title:"椭圆",tool:()=>new ma({hooks:{onActive(i){i.containerElement.style.cursor="crosshair",i.cancelSelect()},onInactive(i){i.containerElement.style.cursor="default"},onCompleteDrawing(i,c){l.value=n.name,V(()=>i.select(c))}}})},{icon:"diamond",name:"diamondTool",title:"菱形",tool:()=>new pa({hooks:{onActive(i){i.containerElement.style.cursor="crosshair",i.cancelSelect()},onInactive(i){i.containerElement.style.cursor="default"},onCompleteDrawing(i,c){l.value=n.name,V(()=>i.select(c))}}})},{icon:"line-1",name:"lineTool",title:"线条",tool:()=>new ha({hooks:{onActive(i){i.containerElement.style.cursor="crosshair",i.cancelSelect()},onInactive(i){i.containerElement.style.cursor="default"},onCompleteDrawing(i,c){l.value=n.name,V(()=>i.select(c))}}})},{icon:"pencil",name:"drawingTool",title:"自由书写",tool:()=>new ga({hooks:{onActive(i){i.containerElement.style.cursor="crosshair",i.cancelSelect()},onInactive(i){i.containerElement.style.cursor="default"}}})},{icon:"picture",name:"imageTool",title:"图片",tool:async()=>{const i=await Bt([".jpg",".png",".jpge",".PNG",".JPG",".JPGE",".svg"],!1),c=await Bl(s=>s.readAsDataURL(i[0])),u=new Image;return u.src=c,new Ol({config:{image:u},hooks:{onActive(s){s.cancelSelect()},onInactive(s){s.containerElement.style.cursor="default"},onCompleteDrawing(s,d){l.value=n.name,V(()=>s.select(d))}}})}},{icon:"text",name:"textTool",title:"文本",tool:()=>new Dl({hooks:{onActive(i){i.containerElement.style.cursor="crosshair"},onInactive(i){i.containerElement.style.cursor="default"},onCompleteDrawing(i,c){l.value=n.name,V(()=>i.select(c))}}})},{icon:"eraser",name:"eraserTool",title:"橡皮擦",tool:()=>new ba({hooks:{onActive(i){i.containerElement.style.cursor=`url(${xa}), auto`},onInactive(i){i.containerElement.style.cursor="default"}}})}],l=x(o[0].name),{theme:a}=At(),r=b(()=>a.value==="dark"?"#d1d5db":"#333333");return ve(async()=>{var c;let i=(c=o.find(({name:u})=>u===l.value))==null?void 0:c.tool;typeof i=="function"&&(i=await i()),i&&t.setTool(i)}),(i,c)=>(S(),X(E(Rt),{modelValue:l.value,"onUpdate:modelValue":c[0]||(c[0]=u=>l.value=u)},{default:A(()=>[m("div",wa,[(S(),B(H,null,Q(o,(u,s)=>T(E(Lt),{key:s,value:u.name,title:i.$t(u.title)},{default:A(({checked:d})=>[m("div",{class:ae(["rounded-lg inline-flex items-center relative cursor-pointer select-none p-2",d?"bg-blue-500":"hover:bg-gray-200 dark:hover:bg-navyBlue-100"])},[m("iconpark-icon",{name:u.icon,stroke:r.value},null,8,ka)],2)]),_:2},1032,["value","title"])),64))])]),_:1},8,["modelValue"]))}}),$a={class:"w-full h-full"},_a={class:"absolute left-0 top-0 right-0 bottom-0 p-8 z-10 pointer-events-none grid grid-cols-3 grid-rows-[auto_1fr_50px] gap-12"},Ca={class:"row-start-1 col-start-1 justify-self-start"},Pa={class:"row-start-1 col-start-2 justify-self-stretch"},Ta={class:"row-start-1 col-start-3 justify-self-end"},Ea={class:"grid grid-flow-col gap-1 items-center w-full pointer-events-auto rounded-lg p-1 ring-1 ring-slate-950 dark:ring-navyBlue-100 bg-white dark:bg-navyBlue-200"},Ra={class:"absolute z-50 mt-3 mr-10 max-h-60 left-[-30px] w-fit rounded-lg bg-white dark:bg-navyBlue-200 py-1 text-base shadow-lg ring-1 ring-slate-950 dark:ring-navyBlue-100 focus:outline-none sm:text-sm"},La={class:"row-start-2 col-start-3 justify-self-end"},Aa={class:"row-start-3 col-start-1 justify-self-start flex flex-row gap-2"},Ba={class:"grid grid-flow-col gap-1 items-center w-full pointer-events-auto rounded-lg p-1 ring-1 ring-slate-950 dark:ring-navyBlue-100 bg-white dark:bg-navyBlue-200"},Oa={class:"flex text-center text-sm text-slate-900 dark:text-gray-300 h-full w-8 justify-center items-center select-none"},Da={class:"grid grid-flow-col gap-1 items-center w-full pointer-events-auto rounded-lg p-1 ring-1 ring-slate-950 dark:ring-navyBlue-100 bg-white dark:bg-navyBlue-200"},Ka=D({__name:"index",setup(e){const t=x(null),{triggerTheme:n,theme:o}=At(),{app:l,selected:a,scale:r}=No(),{undo:i,redo:c}=Ao(t,l,a);Qn(l,a);const u=b(()=>`${Math.ceil(r.value*100)}%`),s=Ue(Xo),d=()=>{l.scaleTo(r.value+l.config.mousewheel.factor)},v=()=>{l.scaleTo(r.value-l.config.mousewheel.factor)},p=()=>i(),y=()=>c(),f=()=>n();return j(()=>{t.value&&(l.mount(t.value),t.value.tabIndex=0)}),(g,h)=>(S(),B("div",$a,[m("div",_a,[m("section",Ca,[T(la,{class:"pointer-events-auto rounded-lg ring-1 ring-slate-950 dark:ring-navyBlue-100"})]),m("section",Pa,[T(Sa,{class:"pointer-events-auto w-full rounded-lg p-2 ring-1 ring-slate-950 dark:ring-navyBlue-100 bg-white dark:bg-navyBlue-200"})]),m("section",Ta,[m("div",Ea,[T(Z,{class:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-navyBlue-100 text-lg dark:text-gray-300",icon:E(o)==="dark"?"sun":"moon",onClick:f},null,8,["icon"]),T(qt,{modelValue:g.$i18n.locale,"onUpdate:modelValue":h[0]||(h[0]=k=>g.$i18n.locale=k)},{listbox:A(()=>[T(Z,{class:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-navyBlue-100 text-lg dark:text-gray-300",title:g.$t("语言"),icon:"translate"},null,8,["title"])]),default:A(()=>[m("div",Ra,[(S(!0),B(H,null,Q(E($l),({label:k,value:w},$)=>(S(),X(Jt,{key:$,value:w,label:k,class:"p-1"},null,8,["value","label"]))),128))])]),_:1},8,["modelValue"]),T(Z,{class:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-navyBlue-100 text-lg dark:text-gray-300",title:g.$t("帮助中心"),icon:"helpcenter",onClick:h[1]||(h[1]=k=>E(s)({}))},null,8,["title"])])]),m("section",La,[T(fa,{class:"p-4 w-56 shadow-md rounded-lg ring-1 ring-slate-950 dark:ring-navyBlue-100 bg-white dark:bg-navyBlue-200 pointer-events-auto"})]),m("section",Aa,[m("div",Ba,[T(Z,{class:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-navyBlue-100 dark:text-gray-300",icon:"minus",title:g.$t("缩小"),onClick:v},null,8,["title"]),m("span",Oa,F(u.value),1),T(Z,{class:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-navyBlue-100 dark:text-gray-300",icon:"plus",title:g.$t("放大"),onClick:d},null,8,["title"])]),m("div",Da,[T(Z,{class:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-navyBlue-100 dark:text-gray-300",icon:"undo",title:g.$t("撤销"),onClick:p},null,8,["title"]),T(Z,{class:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-navyBlue-100 dark:text-gray-300",icon:"redo",title:g.$t("重做"),onClick:y},null,8,["title"])])])]),m("div",{ref_key:"canvasRef",ref:t,class:"w-full h-full dark:bg-navyBlue-300 focus:border-none"},null,512)]))}});export{Ka as default};
